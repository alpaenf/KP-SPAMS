import{m as p,p as B,c as O,w as Me,a as e,g as d,h as r,i as g,v as c,n as W,t as l,o,F as Q,r as X,e as m,M as oe,f as S,j as z,y as je,k as Le,C as M}from"./app-DsUpNF95.js";import{_ as Te}from"./AppLayout-DSxrTPze.js";import{_ as re}from"./InfoCicilan-DWqBtZ4r.js";/* empty css            */const Ie={class:"py-12"},Ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Pe={class:"mb-6 lg:mb-8"},Se={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4 mb-4"},ze={class:"flex flex-col sm:flex-row gap-3"},Ue={class:"relative"},Ve={class:"mb-6 border-b border-gray-200"},Re={class:"-mb-px flex space-x-8"},De={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6"},Ne={class:"bg-white rounded-lg shadow-md p-6"},$e={class:"flex items-center"},Ke={class:"ml-4"},Fe={class:"text-2xl font-bold text-gray-900"},Ge={class:"bg-white rounded-lg shadow-md p-6"},He={class:"flex items-center"},Ye={class:"ml-4"},Je={class:"text-2xl font-bold text-gray-900"},Ee={class:"bg-white rounded-lg shadow-md p-6"},qe={class:"flex items-center"},Oe={class:"ml-4"},We={class:"text-2xl font-bold text-gray-900"},Qe={class:"bg-white rounded-lg shadow-md p-6"},Xe={class:"flex items-center"},Ze={class:"ml-4"},ea={class:"text-2xl font-bold text-gray-900"},aa={class:"bg-white rounded-lg shadow-md overflow-hidden"},ta={class:"overflow-x-auto"},sa={class:"min-w-full divide-y divide-gray-200"},na={class:"bg-white divide-y divide-gray-200"},la={class:"px-6 py-4 whitespace-nowrap"},oa={class:"text-sm font-medium text-gray-900"},ra={class:"px-6 py-4 whitespace-nowrap"},ia={class:"flex items-center gap-2"},ua={class:"text-sm font-medium text-gray-900"},da={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-800",title:"Memiliki Tunggakan"},ga={class:"px-6 py-4 whitespace-nowrap"},ma={class:"text-sm text-gray-600"},pa={class:"px-6 py-4 whitespace-nowrap"},ba={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},xa={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ca={class:"px-6 py-4 whitespace-nowrap"},ya={class:"text-sm text-gray-900"},va={class:"px-6 py-4 whitespace-nowrap"},fa={class:"text-sm text-gray-900"},ha={class:"px-6 py-4 whitespace-nowrap"},_a={class:"text-sm font-medium text-gray-900"},ka={class:"px-6 py-4 whitespace-nowrap"},wa={key:0,class:"text-sm font-bold text-red-600"},Ca={key:1,class:"text-sm text-gray-400"},Ba={class:"px-6 py-4 whitespace-nowrap"},Ma={key:0,class:"space-y-1"},ja={class:"text-sm font-bold text-blue-600"},La={key:0,class:"text-xs text-green-600"},Ta={key:1,class:"text-sm text-gray-400"},Ia={class:"px-6 py-4 whitespace-nowrap"},Aa={class:"flex flex-col gap-1"},Pa={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},Sa={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},za={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Ua={key:3,class:"inline-flex flex-col items-start gap-1"},Va={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Ra={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Da={key:4,class:"text-xs text-gray-400"},Na={class:"px-6 py-4 whitespace-nowrap text-sm"},$a=["onClick"],Ka={class:"px-6 py-4 whitespace-nowrap text-sm"},Fa={key:0,class:"flex gap-2"},Ga=["onClick"],Ha=["onClick"],Ya={key:2,class:"text-xs text-green-600 font-medium"},Ja={key:3,class:"text-xs text-gray-400"},Ea={class:"flex items-center justify-center min-h-screen px-4"},qa={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},Oa={class:"space-y-4"},Wa={class:"flex items-center"},Qa={key:0},Xa={class:"border-t pt-4"},Za={class:"flex items-start"},et={class:"mt-6 flex gap-3"},at=["disabled"],tt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},st={class:"bg-white rounded-lg shadow-md p-6"},nt={class:"flex items-center"},lt={class:"ml-4"},ot={class:"text-2xl font-bold text-gray-900"},rt={class:"bg-white rounded-lg shadow-md p-6"},it={class:"flex items-center"},ut={class:"ml-4"},dt={class:"text-2xl font-bold text-gray-900"},gt={class:"bg-white rounded-lg shadow-md p-6"},mt={class:"flex items-center"},pt={class:"ml-4"},bt={class:"text-2xl font-bold text-gray-900"},xt={class:"bg-white rounded-lg shadow-md overflow-hidden"},ct={class:"overflow-x-auto"},yt={class:"min-w-full divide-y divide-gray-200"},vt={class:"bg-white divide-y divide-gray-200"},ft={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-sm text-gray-900"},_t={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-medium text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm font-medium text-gray-900"},Bt={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"text-sm text-gray-600"},jt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"text-sm text-gray-900"},Tt={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm text-gray-600"},At={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"text-sm text-gray-600"},St={class:"px-6 py-4 whitespace-nowrap"},zt={class:"text-sm text-gray-600"},Ut={class:"px-6 py-4 text-center"},Vt={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Rt={key:1,class:"text-gray-400 text-sm"},Dt={class:"px-6 py-4 whitespace-nowrap"},Nt={class:"text-sm font-semibold text-gray-900"},$t={class:"px-6 py-4 whitespace-nowrap"},Kt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Ft={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Gt={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Ht={class:"px-6 py-4 whitespace-nowrap"},Yt={class:"text-sm text-gray-900"},Jt={class:"px-6 py-4"},Et={class:"text-sm text-gray-600 max-w-xs truncate"},qt={class:"px-6 py-4 whitespace-nowrap text-center"},Ot=["onClick"],Wt={key:0},Qt={colspan:"14",class:"px-6 py-12 text-center text-gray-500"},Xt={key:0},Zt={key:1},es={class:"flex items-center justify-center min-h-screen px-4"},as={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full p-6"},ts={class:"text-xl font-bold text-gray-900 mb-4"},ss={key:0,class:"mb-4 bg-purple-50 border border-purple-200 rounded-lg p-3"},ns={class:"space-y-4"},ls=["value"],os={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},rs={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},is=["value"],us={key:0},ds={key:0},gs={class:"flex items-center"},ms={key:1},ps=["value"],bs={class:"mt-6 flex gap-3"},xs=["disabled"],cs={class:"flex items-center justify-center min-h-screen px-4"},ys={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},vs={key:0,class:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3"},fs={class:"text-sm"},hs={class:"mt-2 text-lg font-bold text-blue-600"},_s={class:"space-y-4"},ks={key:0,class:"text-xs text-purple-600 mt-1 font-medium"},ws={key:1,class:"text-xs text-gray-500 mt-1"},Cs={class:"flex items-center space-x-3 cursor-pointer"},Bs={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ms={class:"flex items-start"},js={class:"flex-1"},Ls={class:"text-sm font-medium text-red-800 flex items-center gap-2"},Ts={class:"text-xs text-red-700 mt-1 font-medium"},Is={class:"text-xs text-red-600 mt-2 space-y-1"},As={class:"text-red-700"},Ps={class:"font-bold text-red-900"},Ss={key:0,class:"mt-3"},zs=["max"],Us={class:"text-xs text-red-600 mt-1"},Vs={class:"block text-sm font-medium text-gray-700 mb-2"},Rs={key:0,class:"text-blue-600 text-xs"},Ds=["readonly"],Ns={key:0,class:"text-xs text-blue-600 mt-1"},$s={class:"mt-6 flex gap-3"},Ks=["disabled"],Fs={class:"flex items-center justify-center min-h-screen px-4"},Gs={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full p-6"},Hs={key:0,class:"space-y-4"},Ys={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Js={class:"text-sm"},Es={class:"text-sm"},qs={class:"text-sm"},Os={class:"text-sm"},Ws={key:0},Qs=["src"],Xs={key:1},Zs={class:"mt-6 flex gap-3"},en=["disabled"],an=["disabled"],tn={class:"flex items-center justify-center min-h-screen px-4"},sn={class:"relative bg-white rounded-lg shadow-xl max-w-lg w-full p-6"},nn={key:0,class:"space-y-4"},ln={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},on={class:"space-y-1 text-sm"},rn={class:"space-y-2"},un={class:"text-base text-gray-900"},dn={class:"text-base text-gray-900"},gn={class:"grid grid-cols-3 gap-4 bg-gray-50 p-3 rounded-lg"},mn={class:"text-sm font-medium text-gray-900"},pn={class:"text-sm font-medium text-gray-900"},bn={class:"text-sm font-medium text-gray-900"},xn={key:0},cn={class:"text-2xl font-bold text-green-600"},yn={class:"text-base text-gray-900"},vn={class:"text-base text-gray-900"},fn={key:1},hn={class:"text-base text-gray-900"},Bn={__name:"Index",props:{pelangganList:Array,pembayaranList:Array,bulan:String},setup(Z){const _=Z,k=p(_.bulan),w=p(""),A=p(!1),K=p(!1),F=p(!1),G=p(!1),H=p(!1),i=p(null),f=p(null),x=p(null),j=p(""),U=p(!1),V=p(!1),R=p(!1),C=p(!1),y=p([]),v=p({bulan:_.bulan,tarif_per_kubik:2e3,ada_abunemen:!0,biaya_abunemen:3e3,masukkan_tunggakan:!1}),u=p({meteran_sebelum:null,meteran_sesudah:null,tarif_per_kubik:2e3,ada_abunemen:!0,biaya_abunemen:3e3}),n=p({tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,jumlah_kubik:0,abunemen:!1,jumlah_bayar:0,keterangan:"LUNAS",catatan:"",bayar_tunggakan:!1,jumlah_bayar_tunggakan:0}),ee=B(()=>{const s=parseFloat(u.value.meteran_sebelum)||0;return(parseFloat(u.value.meteran_sesudah)||0)-s}),ie=B(()=>{if(i.value?.kategori==="sosial")return 0;const s=ee.value,a=parseFloat(u.value.tarif_per_kubik)||0,t=s*a,b=u.value.ada_abunemen&&parseFloat(u.value.biaya_abunemen)||0;return t+b}),ae=B(()=>_.pelangganList.filter(s=>s.tagihan&&s.tagihan.meteran_sesudah!==null).length),ue=B(()=>_.pelangganList.length-ae.value),de=B(()=>_.pelangganList.filter(s=>s.tagihan&&s.tagihan.status_bayar==="SUDAH_BAYAR").length),T=p("tagihan"),ge=B(()=>{if(!w.value)return _.pelangganList;const s=w.value.toLowerCase();return _.pelangganList.filter(a=>a.nama_pelanggan.toLowerCase().includes(s)||a.id_pelanggan.toLowerCase().includes(s))}),D=B(()=>{if(!w.value)return _.pembayaranList||[];const s=w.value.toLowerCase();return(_.pembayaranList||[]).filter(a=>a.pelanggan.nama_pelanggan.toLowerCase().includes(s)||a.pelanggan.id_pelanggan.toLowerCase().includes(s))}),Y=B(()=>{const s=D.value,a=s.reduce((t,b)=>t+parseFloat(b.jumlah_bayar||0),0);return{totalCount:s.length,totalAmount:a,averageAmount:s.length>0?a/s.length:0}}),h=s=>parseInt(s).toLocaleString("id-ID"),te=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-",N=s=>{const[a,t]=s.split("-");return`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(t)-1]} ${a}`},me=s=>s?new Date(s).toLocaleString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",I=()=>{Le.visit("/tagihan-bulanan",{data:{bulan:k.value},preserveState:!1})},pe=async()=>{if(v.value.masukkan_tunggakan){if(!confirm("Yakin ingin memasukkan tunggakan ke tagihan bulan ini? Pelanggan yang punya tunggakan akan mendapat tagihan lebih besar."))return}else if(!confirm("Generate tagihan untuk semua pelanggan aktif?"))return;U.value=!0;try{const s=await M.post("/tagihan-bulanan/generate-bulk",v.value);alert(s.data.message),A.value=!1,I()}catch(s){alert("Gagal generate tagihan: "+(s.response?.data?.message||s.message))}finally{U.value=!1}},be=async s=>{if(s.tagihan&&s.tagihan.meteran_sesudah!==null){u.value.meteran_sebelum=s.tagihan.meteran_sebelum,u.value.meteran_sesudah=s.tagihan.meteran_sesudah,u.value.tarif_per_kubik=s.tagihan.tarif_per_kubik,u.value.ada_abunemen=s.tagihan.ada_abunemen,u.value.biaya_abunemen=s.tagihan.biaya_abunemen;return}const a=se(k.value);if(a){let t=!1,b=0;try{const L=await M.get(`/api/tagihan-bulanan/${s.id}/${a}`);L.data&&L.data.tagihan&&L.data.tagihan.meteran_sesudah>0&&(b=L.data.tagihan.meteran_sesudah,t=!0)}catch{console.log("Tidak ada tagihan bulan sebelumnya")}if(t){u.value.meteran_sebelum=b,u.value.meteran_sesudah=null;return}}u.value.meteran_sebelum=null,u.value.meteran_sesudah=null},xe=async s=>{i.value=s,u.value={meteran_sebelum:null,meteran_sesudah:null,tarif_per_kubik:2e3,ada_abunemen:!0,biaya_abunemen:3e3},K.value=!0,await be(s)},J=()=>{K.value=!1,i.value=null},se=s=>{if(!s)return null;let[a,t]=s.split("-").map(Number);return t=t-1,t===0&&(a-=1,t=12),`${a}-${String(t).padStart(2,"0")}`},ce=async s=>{if(s.tagihan&&s.tagihan.meteran_sesudah!==null){n.value.meteran_sebelum=s.tagihan.meteran_sebelum,n.value.meteran_sesudah=s.tagihan.meteran_sesudah,n.value.jumlah_kubik=s.tagihan.pemakaian_kubik,n.value.abunemen=s.tagihan.ada_abunemen;return}const a=se(k.value);if(a)try{const t=await M.get(`/api/tagihan-bulanan/${s.id}/${a}`);if(t.data&&t.data.tagihan&&t.data.tagihan.meteran_sesudah>0){n.value.meteran_sebelum=t.data.tagihan.meteran_sesudah,n.value.meteran_sesudah=null,n.value.jumlah_kubik=0;return}}catch{console.log("Tidak ada tagihan bulan sebelumnya")}n.value.meteran_sebelum=0,n.value.meteran_sesudah=null,n.value.jumlah_kubik=0},ye=async s=>{i.value=s;const a=s.tagihan?.total_tagihan||0;n.value={tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,jumlah_kubik:0,abunemen:s.tagihan?.ada_abunemen||!1,jumlah_bayar:a,keterangan:"LUNAS",catatan:"",bayar_tunggakan:!1,jumlah_bayar_tunggakan:0},F.value=!0;try{const t=await M.get(`/api/tagihan-bulanan/${s.id}/tunggakan`);t.data&&t.data.tunggakan?y.value=t.data.tunggakan:y.value=[]}catch(t){console.log("Error fetching tunggakan:",t),y.value=[]}await ce(s)},E=()=>{const s=parseFloat(n.value.meteran_sebelum)||0,t=(parseFloat(n.value.meteran_sesudah)||0)-s;if(n.value.jumlah_kubik=t>0?t:0,n.value.keterangan!=="CICILAN")if(i.value?.kategori==="sosial")n.value.jumlah_bayar=0;else{const b=n.value.jumlah_kubik*2e3,L=n.value.abunemen?3e3:0,Be=n.value.bayar_tunggakan?parseFloat(n.value.jumlah_bayar_tunggakan||0):0;n.value.jumlah_bayar=b+L+Be}},ve=()=>{if(n.value.bayar_tunggakan){const s=y.value.reduce((a,t)=>a+t.sisa_tagihan,0);n.value.jumlah_bayar_tunggakan=s}else n.value.jumlah_bayar_tunggakan=0;ne()},ne=()=>{if(!i.value||n.value.keterangan==="CICILAN")return;const s=i.value.tagihan?.total_tagihan||0,a=n.value.bayar_tunggakan?parseFloat(n.value.jumlah_bayar_tunggakan||0):0;n.value.jumlah_bayar=s+a},q=()=>{F.value=!1,i.value=null,y.value=[]},fe=s=>{f.value=s,j.value="",G.value=!0},$=()=>{G.value=!1,f.value=null,j.value=""},he=async()=>{if(confirm("Yakin ingin approve pembayaran ini?")){C.value=!0;try{await M.post(`/tagihan-bulanan/${f.value.tagihan.id}/approve-konfirmasi`,{catatan:j.value}),alert("Pembayaran berhasil di-approve!"),$(),I()}catch(s){alert("Gagal approve: "+(s.response?.data?.message||s.message))}finally{C.value=!1}}},_e=async()=>{if(!j.value){alert("Harap isi catatan alasan penolakan");return}if(confirm("Yakin ingin tolak konfirmasi pembayaran ini?")){C.value=!0;try{await M.post(`/tagihan-bulanan/${f.value.tagihan.id}/reject-konfirmasi`,{catatan:j.value}),alert("Konfirmasi pembayaran ditolak"),$(),I()}catch(s){alert("Gagal tolak: "+(s.response?.data?.message||s.message))}finally{C.value=!1}}},ke=async()=>{R.value=!0;try{const s={bulan_bayar:k.value,tanggal_bayar:n.value.tanggal_bayar,meteran_sebelum:n.value.meteran_sebelum,meteran_sesudah:n.value.meteran_sesudah,jumlah_kubik:n.value.jumlah_kubik,abunemen:n.value.abunemen,tunggakan:0,jumlah_bayar:n.value.jumlah_bayar,keterangan:n.value.keterangan,bayar_tunggakan:n.value.bayar_tunggakan,jumlah_bayar_tunggakan:n.value.jumlah_bayar_tunggakan||0};n.value.bayar_tunggakan&&y.value.length>0&&(s.id_tunggakan=y.value.map(a=>a.id)),await M.post(`/pelanggan/${i.value.id}/pembayaran`,s),alert("Pembayaran berhasil disimpan!"),q(),I()}catch(s){alert("Gagal menyimpan pembayaran: "+(s.response?.data?.message||s.message))}finally{R.value=!1}},P=()=>{},we=async()=>{V.value=!0;try{const s=await M.post("/tagihan-bulanan",{pelanggan_id:i.value.id,bulan:k.value,...u.value});alert("Meteran berhasil disimpan!"),J(),I()}catch(s){alert("Gagal menyimpan meteran: "+(s.response?.data?.message||s.message))}finally{V.value=!1}},Ce=s=>{x.value=s,H.value=!0},le=()=>{H.value=!1,x.value=null};return(s,a)=>(o(),O(Te,null,{default:Me(()=>[e("div",Ie,[e("div",Ae,[e("div",Pe,[e("div",Se,[a[29]||(a[29]=e("div",null,[e("h1",{class:"text-2xl lg:text-3xl font-bold text-gray-900"},"Tagihan & Pembayaran Bulanan"),e("p",{class:"text-gray-600 mt-1 text-sm lg:text-base"},"Kelola meteran, tagihan, dan pembayaran pelanggan")],-1)),e("div",ze,[d(e("input",{type:"month","onUpdate:modelValue":a[0]||(a[0]=t=>k.value=t),onChange:I,class:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent text-sm"},null,544),[[c,k.value]]),e("button",{onClick:a[1]||(a[1]=t=>A.value=!0),class:"inline-flex items-center justify-center px-4 lg:px-6 py-2 lg:py-3 bg-blue-800 text-white rounded-lg font-semibold hover:bg-blue-900 transition text-sm lg:text-base whitespace-nowrap"},[...a[28]||(a[28]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden sm:inline"},"Generate Tagihan Bulanan",-1),e("span",{class:"sm:hidden"},"Generate",-1)])])])]),e("div",Ue,[a[30]||(a[30]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),d(e("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=t=>w.value=t),placeholder:"Cari nama pelanggan...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-800 focus:border-transparent sm:text-sm"},null,512),[[c,w.value]])])]),e("div",Ve,[e("nav",Re,[e("button",{onClick:a[3]||(a[3]=t=>T.value="tagihan"),class:W(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",T.value==="tagihan"?"border-blue-800 text-blue-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Input Tagihan ",2),e("button",{onClick:a[4]||(a[4]=t=>T.value="pembayaran"),class:W(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",T.value==="pembayaran"?"border-blue-800 text-blue-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Daftar Pembayaran ",2)])]),e("div",De,[e("div",Ne,[e("div",$e,[a[32]||(a[32]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),e("div",Ke,[a[31]||(a[31]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pelanggan",-1)),e("p",Fe,l(Z.pelangganList.length),1)])])]),e("div",Ge,[e("div",He,[a[34]||(a[34]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Ye,[a[33]||(a[33]=e("p",{class:"text-sm font-medium text-gray-500"},"Sudah Input Meteran",-1)),e("p",Je,l(ae.value),1)])])]),e("div",Ee,[e("div",qe,[a[36]||(a[36]=e("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Oe,[a[35]||(a[35]=e("p",{class:"text-sm font-medium text-gray-500"},"Belum Input Meteran",-1)),e("p",We,l(ue.value),1)])])]),e("div",Qe,[e("div",Xe,[a[38]||(a[38]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Ze,[a[37]||(a[37]=e("p",{class:"text-sm font-medium text-gray-500"},"Sudah Bayar",-1)),e("p",ea,l(de.value),1)])])])]),d(e("div",null,[e("div",aa,[e("div",ta,[e("table",sa,[a[48]||(a[48]=e("thead",{class:"bg-blue-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama Pelanggan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Meteran Sebelum (mÂ³)"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Meteran Sesudah (mÂ³)"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Pemakaian (mÂ³)"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Tunggakan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Total Tagihan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Aksi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Pembayaran")])],-1)),e("tbody",na,[(o(!0),r(Q,null,X(ge.value,t=>(o(),r("tr",{key:t.id,class:"hover:bg-gray-50 transition-colors"},[e("td",la,[e("div",oa,l(t.id_pelanggan),1)]),e("td",ra,[e("div",ia,[e("div",ua,l(t.nama_pelanggan),1),t.tunggakan&&t.tunggakan>0?(o(),r("span",da,[...a[39]||(a[39]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),m(" ! ",-1)])])):g("",!0)])]),e("td",ga,[e("span",ma,l(t.wilayah||"-"),1)]),e("td",pa,[t.kategori==="sosial"?(o(),r("span",ba," Sosial ")):(o(),r("span",xa," Umum "))]),e("td",ca,[e("div",ya,l(t.tagihan?.meteran_sebelum??"-"),1)]),e("td",va,[e("div",fa,l(t.tagihan?.meteran_sesudah??"-"),1)]),e("td",ha,[e("div",_a,l(t.tagihan?.pemakaian_kubik??"-"),1)]),e("td",ka,[t.tunggakan&&t.tunggakan>0?(o(),r("div",wa,l(h(t.tunggakan)),1)):(o(),r("div",Ca,"-"))]),e("td",Ba,[t.tagihan?(o(),r("div",Ma,[e("div",ja,l(h(t.tagihan.total_tagihan)),1),t.tagihan.jumlah_terbayar>0&&t.tagihan.status_bayar==="BELUM_BAYAR"?(o(),r("div",La," Terbayar: "+l(h(t.tagihan.jumlah_terbayar)),1)):g("",!0)])):(o(),r("div",Ta,"Belum ada"))]),e("td",Ia,[e("div",Aa,[t.tagihan?.status_konfirmasi==="pending"?(o(),r("span",Pa,[...a[40]||(a[40]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1),m(" Pending Konfirmasi ",-1)])])):t.tagihan?.status_bayar==="SUDAH_BAYAR"?(o(),r("span",Sa,[...a[41]||(a[41]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),m(" Sudah Bayar ",-1)])])):t.tunggakan&&t.tunggakan>0?(o(),r("span",za,[...a[42]||(a[42]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293z","clip-rule":"evenodd"})],-1),m(" Nunggak ",-1)])])):t.tagihan&&t.tagihan.status_bayar==="BELUM_BAYAR"&&t.tagihan.status_konfirmasi==="none"?(o(),r("span",Ua,[t.tagihan.jumlah_terbayar>0?(o(),r("span",Va,[a[43]||(a[43]=e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),m(" Cicilan "+l(Math.round(t.tagihan.jumlah_terbayar/t.tagihan.total_tagihan*100))+"% ",1)])):(o(),r("span",Ra,[...a[44]||(a[44]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),m(" Belum Bayar ",-1)])]))])):t.tagihan?g("",!0):(o(),r("span",Da,"-"))])]),e("td",Na,[e("button",{onClick:b=>xe(t),class:"text-blue-600 hover:text-blue-800 transition font-medium",title:"Input Meteran"},[...a[45]||(a[45]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,$a)]),e("td",Ka,[t.tagihan?.status_konfirmasi==="pending"?(o(),r("div",Fa,[e("button",{onClick:b=>fe(t),class:"inline-flex items-center px-3 py-1.5 bg-orange-600 text-white text-xs font-medium rounded-md hover:bg-orange-700 transition",title:"Lihat Bukti & Approve"},[...a[46]||(a[46]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),m(" Verifikasi ",-1)])],8,Ga)])):t.tagihan&&t.tagihan.status_bayar==="BELUM_BAYAR"&&t.tagihan.status_konfirmasi==="none"?(o(),r("button",{key:1,onClick:b=>ye(t),class:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-md hover:bg-green-700 transition",title:"Input Pembayaran"},[...a[47]||(a[47]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1),m(" Bayar ",-1)])],8,Ha)):t.tagihan?.status_bayar==="SUDAH_BAYAR"?(o(),r("span",Ya," âœ“ Lunas ")):(o(),r("span",Ja,"-"))])]))),128))])])])])],512),[[oe,T.value==="tagihan"]])]),A.value?(o(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:a[11]||(a[11]=S(t=>A.value=!1,["self"]))},[e("div",Ea,[a[55]||(a[55]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",qa,[a[54]||(a[54]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Generate Tagihan Bulanan",-1)),e("div",Oa,[e("div",null,[a[49]||(a[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan",-1)),d(e("input",{type:"month","onUpdate:modelValue":a[5]||(a[5]=t=>v.value.bulan=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[c,v.value.bulan]])]),e("div",null,[a[50]||(a[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tarif per mÂ³ (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=t=>v.value.tarif_per_kubik=t),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[c,v.value.tarif_per_kubik]])]),e("div",null,[e("label",Wa,[d(e("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=t=>v.value.ada_abunemen=t),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[z,v.value.ada_abunemen]]),a[51]||(a[51]=e("span",{class:"ml-2 text-sm text-gray-700"},"Ada Biaya Abunemen",-1))])]),v.value.ada_abunemen?(o(),r("div",Qa,[a[52]||(a[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biaya Abunemen (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=t=>v.value.biaya_abunemen=t),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[c,v.value.biaya_abunemen]])])):g("",!0),e("div",Xa,[e("label",Za,[d(e("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=t=>v.value.masukkan_tunggakan=t),class:"mt-1 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[z,v.value.masukkan_tunggakan]]),a[53]||(a[53]=e("span",{class:"ml-2"},[e("span",{class:"text-sm font-medium text-gray-700"},"Masukkan Tunggakan ke Tagihan Bulan Ini"),e("span",{class:"block text-xs text-gray-500 mt-1"},"Tunggakan dari bulan sebelumnya akan otomatis ditambahkan ke total tagihan")],-1))])])]),e("div",et,[e("button",{onClick:pe,disabled:U.value,class:"flex-1 px-4 py-2 bg-blue-800 text-white rounded-lg font-medium hover:bg-blue-900 transition disabled:opacity-50"},l(U.value?"Generating...":"Generate"),9,at),e("button",{onClick:a[10]||(a[10]=t=>A.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0)]),d(e("div",null,[e("div",tt,[e("div",st,[e("div",nt,[a[57]||(a[57]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])],-1)),e("div",lt,[a[56]||(a[56]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pembayaran",-1)),e("p",ot,l(Y.value.totalCount),1)])])]),e("div",rt,[e("div",it,[a[59]||(a[59]=e("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ut,[a[58]||(a[58]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pemasukan",-1)),e("p",dt,"Rp "+l(h(Y.value.totalAmount)),1)])])]),e("div",gt,[e("div",mt,[a[61]||(a[61]=e("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",pt,[a[60]||(a[60]=e("p",{class:"text-sm font-medium text-gray-500"},"Rata-rata Pembayaran",-1)),e("p",bt,"Rp "+l(h(Y.value.averageAmount)),1)])])])]),e("div",xt,[e("div",ct,[e("table",yt,[a[64]||(a[64]=e("thead",{class:"bg-blue-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID Pelanggan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama Pelanggan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Bulan Bayar"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"M. Sebelum"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"M. Sesudah"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Pemakaian"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Abunemen"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Jumlah Bayar"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Keterangan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Metode"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Catatan"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",vt,[(o(!0),r(Q,null,X(D.value,t=>(o(),r("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",ft,[e("div",ht,l(te(t.tanggal_bayar)),1)]),e("td",_t,[e("div",kt,l(t.pelanggan.id_pelanggan),1)]),e("td",wt,[e("div",Ct,l(t.pelanggan.nama_pelanggan),1)]),e("td",Bt,[e("div",Mt,l(t.pelanggan.wilayah||"-"),1)]),e("td",jt,[e("div",Lt,l(N(t.bulan_bayar)),1)]),e("td",Tt,[e("div",It,l(t.meteran_sebelum||"-"),1)]),e("td",At,[e("div",Pt,l(t.meteran_sesudah||"-"),1)]),e("td",St,[e("div",zt,l(t.jumlah_kubik?t.jumlah_kubik+" mÂ³":"-"),1)]),e("td",Ut,[t.abunemen?(o(),r("span",Vt,[...a[62]||(a[62]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),m(" Ya ",-1)])])):(o(),r("span",Rt,"-"))]),e("td",Dt,[e("div",Nt,"Rp "+l(h(t.jumlah_bayar)),1)]),e("td",$t,[t.keterangan==="Nunggak"?(o(),r("span",Kt,l(t.keterangan),1)):t.keterangan==="Cicilan"?(o(),r("span",Ft,l(t.keterangan),1)):(o(),r("span",Gt,l(t.keterangan||"Lunas"),1))]),e("td",Ht,[e("div",Yt,l(t.metode_bayar),1)]),e("td",Jt,[e("div",Et,l(t.catatan||"-"),1)]),e("td",qt,[e("button",{onClick:b=>Ce(t),class:"text-blue-600 hover:text-blue-900 transition",title:"Lihat Detail"},[...a[63]||(a[63]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Ot)])]))),128)),!D.value||D.value.length===0?(o(),r("tr",Wt,[e("td",Qt,[w.value?(o(),r("div",Xt,' Tidak ada pembayaran yang sesuai dengan pencarian "'+l(w.value)+'" ',1)):(o(),r("div",Zt," Belum ada pembayaran di bulan ini "))])])):g("",!0)])])])])],512),[[oe,T.value==="pembayaran"]]),K.value?(o(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:S(J,["self"])},[e("div",es,[a[75]||(a[75]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",as,[e("h3",ts," Input Meteran - "+l(i.value?.nama_pelanggan),1),i.value?.kategori==="sosial"?(o(),r("div",ss,[...a[65]||(a[65]=[e("p",{class:"text-sm text-purple-700"},[e("strong",null,"Pelanggan Kategori Sosial:"),m(" Tidak dikenakan biaya (gratis) ")],-1)])])):g("",!0),e("div",ns,[e("div",null,[a[66]||(a[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan Tagihan",-1)),e("input",{type:"month",value:k.value,readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,8,ls),a[67]||(a[67]=e("p",{class:"text-xs text-gray-500 mt-1"},"Bulan yang sedang dipilih di halaman utama",-1))]),e("div",os,[e("div",null,[a[68]||(a[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sebelum (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[12]||(a[12]=t=>u.value.meteran_sebelum=t),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:P},null,544),[[c,u.value.meteran_sebelum]])]),e("div",null,[a[69]||(a[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sesudah (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[13]||(a[13]=t=>u.value.meteran_sesudah=t),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:P},null,544),[[c,u.value.meteran_sesudah]])])]),e("div",rs,[e("div",null,[a[70]||(a[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pemakaian (mÂ³)",-1)),e("input",{type:"number",value:ee.value,readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,8,is)]),i.value?.kategori!=="sosial"?(o(),r("div",us,[a[71]||(a[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tarif per mÂ³ (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[14]||(a[14]=t=>u.value.tarif_per_kubik=t),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:P},null,544),[[c,u.value.tarif_per_kubik]])])):g("",!0)]),i.value?.kategori!=="sosial"?(o(),r("div",ds,[e("label",gs,[d(e("input",{type:"checkbox","onUpdate:modelValue":a[15]||(a[15]=t=>u.value.ada_abunemen=t),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",onChange:P},null,544),[[z,u.value.ada_abunemen]]),a[72]||(a[72]=e("span",{class:"ml-2 text-sm text-gray-700"},"Ada Biaya Abunemen",-1))])])):g("",!0),u.value.ada_abunemen&&i.value?.kategori!=="sosial"?(o(),r("div",ms,[a[73]||(a[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biaya Abunemen (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[16]||(a[16]=t=>u.value.biaya_abunemen=t),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:P},null,544),[[c,u.value.biaya_abunemen]])])):g("",!0),e("div",null,[a[74]||(a[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Tagihan (Rp)",-1)),e("input",{type:"text",value:h(ie.value),readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-blue-50 font-bold text-blue-600"},null,8,ps)])]),i.value?.tagihan?(o(),O(re,{key:1,"total-tagihan":i.value.tagihan.total_tagihan||0,"jumlah-terbayar":i.value.tagihan.jumlah_terbayar||0,"status-bayar":i.value.tagihan.status_bayar||"BELUM_BAYAR",class:"mt-4"},null,8,["total-tagihan","jumlah-terbayar","status-bayar"])):g("",!0),e("div",bs,[e("button",{onClick:we,disabled:V.value,class:"flex-1 px-4 py-2 bg-blue-800 text-white rounded-lg font-medium hover:bg-blue-900 transition disabled:opacity-50"},l(V.value?"Menyimpan...":"Simpan"),9,xs),e("button",{onClick:J,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0),F.value?(o(),r("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:S(q,["self"])},[e("div",cs,[a[93]||(a[93]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ys,[a[92]||(a[92]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Input Pembayaran",-1)),i.value?(o(),r("div",vs,[e("div",fs,[e("p",null,[a[76]||(a[76]=e("strong",null,"ID:",-1)),m(" "+l(i.value.id_pelanggan),1)]),e("p",null,[a[77]||(a[77]=e("strong",null,"Nama:",-1)),m(" "+l(i.value.nama_pelanggan),1)]),e("p",null,[a[78]||(a[78]=e("strong",null,"Bulan:",-1)),m(" "+l(N(k.value)),1)]),e("p",hs," Total Tagihan: "+l(h(i.value.tagihan?.total_tagihan||0)),1)])])):g("",!0),i.value?.tagihan?(o(),O(re,{key:1,"total-tagihan":i.value.tagihan.total_tagihan||0,"jumlah-terbayar":i.value.tagihan.jumlah_terbayar||0,"status-bayar":i.value.tagihan.status_bayar||"BELUM_BAYAR",class:"mb-4"},null,8,["total-tagihan","jumlah-terbayar","status-bayar"])):g("",!0),e("div",_s,[e("div",null,[a[79]||(a[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Bayar",-1)),d(e("input",{type:"date","onUpdate:modelValue":a[17]||(a[17]=t=>n.value.tanggal_bayar=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",required:""},null,512),[[c,n.value.tanggal_bayar]])]),e("div",null,[a[80]||(a[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sebelum (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[18]||(a[18]=t=>n.value.meteran_sebelum=t),step:"0.01",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",onInput:E},null,544),[[c,n.value.meteran_sebelum]]),a[81]||(a[81]=e("p",{class:"text-xs text-gray-500 mt-1"},"Angka meteran bulan lalu",-1))]),e("div",null,[a[82]||(a[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sesudah (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[19]||(a[19]=t=>n.value.meteran_sesudah=t),step:"0.01",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",onInput:E},null,544),[[c,n.value.meteran_sesudah]]),a[83]||(a[83]=e("p",{class:"text-xs text-gray-500 mt-1"},"Angka meteran bulan ini",-1))]),e("div",null,[a[84]||(a[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pemakaian (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":a[20]||(a[20]=t=>n.value.jumlah_kubik=t),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 bg-gray-50",readonly:""},null,512),[[c,n.value.jumlah_kubik]]),i.value?.kategori==="sosial"?(o(),r("p",ks,"Tarif: Gratis (Kategori Sosial)")):(o(),r("p",ws,"Tarif: Rp 2.000 / mÂ³"))]),e("div",null,[e("label",Cs,[d(e("input",{type:"checkbox","onUpdate:modelValue":a[21]||(a[21]=t=>n.value.abunemen=t),onChange:E,class:"w-5 h-5 text-blue-800 border-gray-300 rounded focus:ring-2 focus:ring-blue-800"},null,544),[[z,n.value.abunemen]]),a[85]||(a[85]=e("div",null,[e("span",{class:"text-sm font-medium text-gray-700"},"Abunemen"),e("p",{class:"text-xs text-gray-500"},"Biaya tambahan: Rp 3.000")],-1))])]),y.value.length>0?(o(),r("div",Bs,[e("div",Ms,[d(e("input",{type:"checkbox","onUpdate:modelValue":a[22]||(a[22]=t=>n.value.bayar_tunggakan=t),onChange:ve,class:"mt-1 mr-3 h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"},null,544),[[z,n.value.bayar_tunggakan]]),e("div",js,[e("label",Ls,[a[86]||(a[86]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),m(" âš ï¸ Bayar Tunggakan ("+l(y.value.length)+" bulan) ",1)]),e("p",Ts," Total tunggakan: Rp "+l(Number(y.value.reduce((t,b)=>t+b.sisa_tagihan,0)).toLocaleString("id-ID")),1),e("div",Is,[(o(!0),r(Q,null,X(y.value,t=>(o(),r("div",{key:t.id,class:"flex justify-between py-1 border-b border-red-200 last:border-0"},[e("span",As,l(N(t.bulan)),1),e("span",Ps,"Rp "+l(Number(t.sisa_tagihan).toLocaleString("id-ID")),1)]))),128))]),n.value.bayar_tunggakan?(o(),r("div",Ss,[a[87]||(a[87]=e("label",{class:"block text-sm font-medium text-red-800 mb-1"},[m(" Jumlah Bayar Tunggakan (Rp) "),e("span",{class:"text-xs font-normal text-red-600"},"- Bisa bayar sebagian/cicil")],-1)),d(e("input",{type:"number","onUpdate:modelValue":a[23]||(a[23]=t=>n.value.jumlah_bayar_tunggakan=t),onInput:ne,step:"1000",min:"0",max:y.value.reduce((t,b)=>t+b.sisa_tagihan,0),class:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 bg-white",placeholder:"Isi jumlah bayar tunggakan (bisa cicil)"},null,40,zs),[[c,n.value.jumlah_bayar_tunggakan]]),e("p",Us," ðŸ’¡ Isi sesuai kemampuan (misal: Rp 5.000 dari total Rp "+l(Number(y.value.reduce((t,b)=>t+b.sisa_tagihan,0)).toLocaleString("id-ID"))+") ",1)])):g("",!0)])])])):g("",!0),e("div",null,[e("label",Vs,[m(l(n.value.keterangan==="CICILAN"?"Jumlah Cicilan":"Jumlah Bayar")+" (Rp) ",1),n.value.keterangan==="CICILAN"?(o(),r("span",Rs,"- Bisa diedit")):g("",!0)]),d(e("input",{type:"number","onUpdate:modelValue":a[24]||(a[24]=t=>n.value.jumlah_bayar=t),class:W(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",n.value.keterangan==="CICILAN"||n.value.bayar_tunggakan?"bg-white":"bg-gray-50"]),step:"1000",min:"0",required:"",readonly:n.value.keterangan!=="CICILAN"&&!n.value.bayar_tunggakan},null,10,Ds),[[c,n.value.jumlah_bayar]]),n.value.keterangan==="CICILAN"?(o(),r("p",Ns,"ðŸ’¡ Untuk cicilan, isi jumlah berapa saja (misal: Rp 1.000, Rp 5.000, dll)")):g("",!0)]),e("div",null,[a[89]||(a[89]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m("Keterangan "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":a[25]||(a[25]=t=>n.value.keterangan=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",required:""},[...a[88]||(a[88]=[e("option",{value:"LUNAS"},"Lunas - Bayar penuh tagihan bulan ini",-1),e("option",{value:"TUNGGAKAN"},"Tunggakan - Belum bayar, masuk bulan depan",-1),e("option",{value:"CICILAN"},"Cicilan - Bayar sebagian",-1)])],512),[[je,n.value.keterangan]]),a[90]||(a[90]=e("p",{class:"text-xs text-gray-500 mt-1"}," Lunas = Bayar penuh | Tunggakan = Belum bayar | Cicilan = Bayar sebagian ",-1))]),e("div",null,[a[91]||(a[91]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catatan Tambahan (Opsional)",-1)),d(e("textarea",{"onUpdate:modelValue":a[26]||(a[26]=t=>n.value.catatan=t),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",placeholder:"Catatan pembayaran..."},null,512),[[c,n.value.catatan]])])]),e("div",$s,[e("button",{onClick:ke,disabled:R.value,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition disabled:opacity-50"},l(R.value?"Menyimpan...":"Simpan Pembayaran"),9,Ks),e("button",{onClick:q,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0),G.value?(o(),r("div",{key:2,class:"fixed inset-0 z-50 overflow-y-auto",onClick:S($,["self"])},[e("div",Fs,[a[102]||(a[102]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",Gs,[a[101]||(a[101]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Verifikasi Konfirmasi Pembayaran",-1)),f.value?(o(),r("div",Hs,[e("div",Ys,[e("p",Js,[a[94]||(a[94]=e("strong",null,"ID Pelanggan:",-1)),m(" "+l(f.value.id_pelanggan),1)]),e("p",Es,[a[95]||(a[95]=e("strong",null,"Nama:",-1)),m(" "+l(f.value.nama_pelanggan),1)]),e("p",qs,[a[96]||(a[96]=e("strong",null,"Total Tagihan:",-1)),m(" "+l(h(f.value.tagihan?.total_tagihan||0)),1)]),e("p",Os,[a[97]||(a[97]=e("strong",null,"Waktu Konfirmasi:",-1)),m(" "+l(me(f.value.tagihan?.konfirmasi_at)),1)])]),f.value.tagihan?.bukti_transfer?(o(),r("div",Ws,[a[98]||(a[98]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bukti Transfer:",-1)),e("img",{src:`/storage/${f.value.tagihan.bukti_transfer}`,alt:"Bukti Transfer",class:"w-full max-h-96 object-contain border rounded-lg"},null,8,Qs)])):(o(),r("div",Xs,[...a[99]||(a[99]=[e("p",{class:"text-sm text-gray-500 italic"},"Tidak ada bukti transfer yang diupload",-1)])])),e("div",null,[a[100]||(a[100]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catatan (Opsional)",-1)),d(e("textarea",{"onUpdate:modelValue":a[27]||(a[27]=t=>j.value=t),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",placeholder:"Tambahkan catatan jika perlu..."},null,512),[[c,j.value]])])])):g("",!0),e("div",Zs,[e("button",{onClick:he,disabled:C.value,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition disabled:opacity-50"},l(C.value?"Memproses...":"âœ“ Approve"),9,en),e("button",{onClick:_e,disabled:C.value,class:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition disabled:opacity-50"},l(C.value?"Memproses...":"âœ— Tolak"),9,an),e("button",{onClick:$,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0),H.value?(o(),r("div",{key:3,class:"fixed inset-0 z-50 overflow-y-auto",onClick:S(le,["self"])},[e("div",tn,[a[118]||(a[118]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",sn,[a[117]||(a[117]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Detail Pembayaran",-1)),x.value?(o(),r("div",nn,[e("div",ln,[a[106]||(a[106]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Informasi Pelanggan",-1)),e("div",on,[e("p",null,[a[103]||(a[103]=e("span",{class:"font-medium"},"ID Pelanggan:",-1)),m(" "+l(x.value.pelanggan.id_pelanggan),1)]),e("p",null,[a[104]||(a[104]=e("span",{class:"font-medium"},"Nama:",-1)),m(" "+l(x.value.pelanggan.nama_pelanggan),1)]),e("p",null,[a[105]||(a[105]=e("span",{class:"font-medium"},"Wilayah:",-1)),m(" "+l(x.value.pelanggan.wilayah||"-"),1)])])]),e("div",rn,[e("div",null,[a[107]||(a[107]=e("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Pembayaran",-1)),e("p",un,l(te(x.value.tanggal_bayar)),1)]),e("div",null,[a[108]||(a[108]=e("label",{class:"text-sm font-medium text-gray-500"},"Bulan Bayar",-1)),e("p",dn,l(N(x.value.bulan_bayar)),1)]),e("div",gn,[e("div",null,[a[109]||(a[109]=e("label",{class:"text-xs font-medium text-gray-500"},"Meteran Sebelum",-1)),e("p",mn,l(x.value.meteran_sebelum||"-"),1)]),e("div",null,[a[110]||(a[110]=e("label",{class:"text-xs font-medium text-gray-500"},"Meteran Sesudah",-1)),e("p",pn,l(x.value.meteran_sesudah||"-"),1)]),e("div",null,[a[111]||(a[111]=e("label",{class:"text-xs font-medium text-gray-500"},"Pemakaian",-1)),e("p",bn,l(x.value.jumlah_kubik?x.value.jumlah_kubik+" mÂ³":"-"),1)])]),x.value.abunemen?(o(),r("div",xn,[...a[112]||(a[112]=[e("label",{class:"text-sm font-medium text-gray-500"},"Abunemen",-1),e("p",{class:"text-base text-gray-900"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),m(" Ya (Rp 3.000) ")])],-1)])])):g("",!0),e("div",null,[a[113]||(a[113]=e("label",{class:"text-sm font-medium text-gray-500"},"Jumlah Bayar",-1)),e("p",cn,"Rp "+l(h(x.value.jumlah_bayar)),1)]),e("div",null,[a[114]||(a[114]=e("label",{class:"text-sm font-medium text-gray-500"},"Metode Pembayaran",-1)),e("p",yn,l(x.value.metode_bayar),1)]),e("div",null,[a[115]||(a[115]=e("label",{class:"text-sm font-medium text-gray-500"},"Keterangan",-1)),e("p",vn,l(x.value.keterangan||"Lunas"),1)]),x.value.catatan?(o(),r("div",fn,[a[116]||(a[116]=e("label",{class:"text-sm font-medium text-gray-500"},"Catatan",-1)),e("p",hn,l(x.value.catatan),1)])):g("",!0)])])):g("",!0),e("div",{class:"mt-6 flex justify-end"},[e("button",{onClick:le,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Tutup ")])])])])):g("",!0)]),_:1}))}};export{Bn as default};
