import{p as N,h as n,i as c,a as e,n as $,F as j,r as V,t as r,o as a,u as U,m as M,c as I,w as K,f as A,g as f,d as l,v as k,e as h,b as O,y as B,k as D}from"./app-CGVuTIx6.js";import{_ as F}from"./AppLayout-3PSdJpkt.js";/* empty css            */const T={key:0,class:"flex flex-wrap justify-center gap-1 mt-4"},W=["disabled"],H={key:0,class:"px-3 py-1 text-sm text-gray-500 border rounded cursor-default bg-white"},L=["onClick"],R=["disabled"],Y={__name:"ClientPagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},emits:["page-change"],setup(d){const w=d,x=N(()=>{const g=w.totalPages,p=w.currentPage,u=1;let s=[],y=[],b;s.push(1);for(let m=p-u;m<=p+u;m++)m<g&&m>1&&s.push(m);s.push(g),s=[...new Set(s)].sort((m,_)=>m-_);for(let m of s)b&&(m-b===2?y.push(b+1):m-b!==1&&y.push("...")),y.push(m),b=m;return y});return(g,p)=>d.totalPages>1?(a(),n("div",T,[e("button",{disabled:d.currentPage===1,onClick:p[0]||(p[0]=u=>g.$emit("page-change",d.currentPage-1)),class:$(["px-3 py-1 text-sm border rounded hover:bg-white disabled:opacity-50 bg-white",d.currentPage===1?"cursor-not-allowed text-gray-400":"text-gray-700"])}," Â« Prev ",10,W),(a(!0),n(j,null,V(x.value,(u,s)=>(a(),n(j,{key:s},[u==="..."?(a(),n("span",H,"...")):(a(),n("button",{key:1,onClick:y=>g.$emit("page-change",u),class:$(["px-3 py-1 text-sm border rounded hover:bg-white focus:border-blue-500 focus:text-blue-500 transition-colors",u===d.currentPage?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300"])},r(u),11,L))],64))),128)),e("button",{disabled:d.currentPage===d.totalPages,onClick:p[1]||(p[1]=u=>g.$emit("page-change",d.currentPage+1)),class:$(["px-3 py-1 text-sm border rounded hover:bg-white disabled:opacity-50 bg-white",d.currentPage===d.totalPages?"cursor-not-allowed text-gray-400":"text-gray-700"])}," Next Â» ",10,R)])):c("",!0)}},G={class:"min-h-screen bg-gray-50 py-8"},J={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Q={key:0,class:"max-w-md mx-auto mt-20"},X={class:"bg-white rounded-2xl shadow-xl overflow-hidden"},Z={class:"p-8"},ee={key:0,class:"text-red-500 text-xs mt-1 text-center"},te=["disabled"],se={key:1,class:"space-y-6"},oe={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},le={class:"bg-white shadow-sm rounded-xl overflow-hidden border border-gray-200"},ae={class:"overflow-x-auto"},ne={class:"min-w-full divide-y divide-gray-200"},re={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap"},de={class:"flex items-center"},ue={class:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-lg border border-blue-200"},me={class:"ml-4"},ce={class:"text-sm font-medium text-gray-900"},pe={class:"text-sm text-gray-500"},xe={class:"px-6 py-4 whitespace-nowrap"},ge={key:0,class:"text-xs text-gray-500 mt-1"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},ye={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},fe=["onClick"],he=["onClick"],we={class:"bg-white px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between sm:px-6 gap-3 rounded-b-xl border-x-0"},ve={class:"text-sm text-gray-700 text-center sm:text-left"},ke={class:"font-semibold"},Pe={class:"font-semibold"},_e={class:"font-semibold"},Ce={key:2,class:"relative z-[200]","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},$e={class:"fixed inset-0 z-10 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Me={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},Ne={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ve={class:"text-lg font-medium leading-6 text-gray-900 mb-4"},Ue={key:0,class:"text-red-500 text-xs mt-1"},Ae={key:0,class:"text-red-500 text-xs mt-1"},Be={key:0},Se=["value"],qe={key:0,class:"text-red-500 text-xs mt-1"},ze={class:"grid grid-cols-2 gap-4"},Ee={class:"block text-sm font-medium text-gray-700 mb-1"},Ie=["required"],Ke={key:0,class:"text-red-500 text-xs mt-1"},Oe={key:0,class:"text-red-500 text-xs mt-1"},De={key:1,class:"text-xs text-gray-500 italic"},Fe={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 gap-2"},Te=["disabled"],P=20,Re={__name:"Index",props:{isVerified:Boolean,users:Array,wilayahOptions:Object},setup(d){const w=d,x=U({pin:""}),g=()=>{x.post(route("admin.pengelola.verify"),{preserveScroll:!0,onError:()=>{x.reset()}})},p=M(!1),u=M(null),s=U({name:"",email:"",password:"",role:"pengelola",wilayah:"",pin:""}),y=i=>i==="admin"?"bg-purple-100 text-purple-800":i==="penarik"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",b=(i=null)=>{u.value=i,i?(s.name=i.name,s.email=i.email,s.role=i.role,s.wilayah=i.wilayah||"",s.pin=i.pin||"",s.password=""):(s.reset(),s.password=""),p.value=!0},m=()=>{p.value=!1,s.reset(),u.value=null},_=()=>{u.value?s.put(route("admin.pengelola.update",u.value.id),{onSuccess:()=>m()}):s.post(route("admin.pengelola.store"),{onSuccess:()=>m()})},S=i=>{confirm(`Yakin ingin menghapus akun ${i.name}?`)&&D.delete(route("admin.pengelola.destroy",i.id))},v=M(1),q=N(()=>{const i=(v.value-1)*P,t=i+P;return w.users.slice(i,t)}),z=N(()=>Math.ceil(w.users.length/P)),E=i=>{v.value=i};return(i,t)=>(a(),I(F,null,{default:K(()=>[e("div",G,[e("div",J,[d.isVerified?(a(),n("div",se,[e("div",oe,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Manajemen Pengelola"),e("p",{class:"text-sm text-gray-600"},"Kelola akun admin dan staf pengelola sistem")],-1)),e("button",{onClick:t[1]||(t[1]=o=>b()),class:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-sm transition gap-2"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" Tambah Akun ",-1)])])]),e("div",le,[e("div",ae,[e("table",ne,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Nama & Email"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Role & Wilayah"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"PIN Akses"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",re,[(a(!0),n(j,null,V(q.value,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",ie,[e("div",de,[e("div",ue,r(o.name.charAt(0).toUpperCase()),1),e("div",me,[e("div",ce,r(o.name),1),e("div",pe,r(o.email),1)])])]),e("td",xe,[e("div",null,[e("span",{class:$([y(o.role),"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full capitalize"])},r(o.role),3),o.wilayah?(a(),n("div",ge," ðŸ“ "+r(d.wilayahOptions[o.wilayah]||o.wilayah),1)):c("",!0)])]),e("td",be,r(o.pin||"-"),1),e("td",ye,[e("button",{onClick:C=>b(o),class:"text-blue-600 hover:text-blue-900 mr-3"},"Edit",8,fe),o.id!==i.$page.props.auth.user.id?(a(),n("button",{key:0,onClick:C=>S(o),class:"text-red-600 hover:text-red-900"}," Hapus ",8,he)):c("",!0)])]))),128))])])])]),e("div",we,[e("div",ve,[t[14]||(t[14]=h(" Menampilkan ",-1)),e("span",ke,r(d.users.length>0?(v.value-1)*P+1:0),1),t[15]||(t[15]=h(" sampai ",-1)),e("span",Pe,r(Math.min(v.value*P,d.users.length)),1),t[16]||(t[16]=h(" dari ",-1)),e("span",_e,r(d.users.length),1),t[17]||(t[17]=h(" data ",-1))]),O(Y,{"current-page":v.value,"total-pages":z.value,onPageChange:E},null,8,["current-page","total-pages"])])])):(a(),n("div",Q,[e("div",X,[t[10]||(t[10]=e("div",{class:"bg-blue-600 px-8 py-6 text-center"},[e("div",{class:"bg-blue-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])]),e("h2",{class:"text-2xl font-bold text-white"},"Keamanan Diperlukan"),e("p",{class:"text-blue-100 text-sm mt-1"},"Masukkan PIN Keamanan untuk mengakses halaman ini")],-1)),e("div",Z,[e("form",{onSubmit:A(g,["prevent"]),class:"space-y-6"},[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"PIN Keamanan",-1)),f(e("input",{type:"password","onUpdate:modelValue":t[0]||(t[0]=o=>l(x).pin=o),maxlength:"8",class:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center tracking-[1em] text-xl font-bold",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢",autofocus:""},null,512),[[k,l(x).pin]]),l(x).errors.pin?(a(),n("p",ee,r(l(x).errors.pin),1)):c("",!0)]),e("button",{type:"submit",class:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg shadow transition transform active:scale-95 disabled:opacity-50",disabled:l(x).processing},r(l(x).processing?"Memverifikasi...":"Buka Akses"),9,te)],32),t[9]||(t[9]=e("p",{class:"text-center text-xs text-gray-400 mt-6"}," * PIN default adalah 123456 jika belum diatur ",-1))])])])),p.value?(a(),n("div",Ce,[t[25]||(t[25]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",$e,[e("div",je,[e("div",Me,[e("div",Ne,[e("h3",Ve,r(u.value?"Edit Akun Pengelola":"Tambah Akun Pengelola"),1),e("form",{onSubmit:A(_,["prevent"]),class:"space-y-4"},[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nama Lengkap",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>l(s).name=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[k,l(s).name]]),l(s).errors.name?(a(),n("p",Ue,r(l(s).errors.name),1)):c("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),f(e("input",{type:"email","onUpdate:modelValue":t[3]||(t[3]=o=>l(s).email=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[k,l(s).email]]),l(s).errors.email?(a(),n("p",Ae,r(l(s).errors.email),1)):c("",!0)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Role",-1)),f(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).role=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[...t[20]||(t[20]=[e("option",{value:"pengelola"},"Pengelola Staf",-1),e("option",{value:"admin"},"Administrator",-1),e("option",{value:"penarik"},"Penarik",-1)])],512),[[B,l(s).role]])]),l(s).role==="penarik"?(a(),n("div",Be,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[h("Wilayah "),e("span",{class:"text-red-500"},"*")],-1)),f(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>l(s).wilayah=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:""},[t[22]||(t[22]=e("option",{value:""},"-- Pilih Wilayah --",-1)),(a(!0),n(j,null,V(d.wilayahOptions,(o,C)=>(a(),n("option",{key:C,value:C},r(o),9,Se))),128))],512),[[B,l(s).wilayah]]),l(s).errors.wilayah?(a(),n("p",qe,r(l(s).errors.wilayah),1)):c("",!0)])):c("",!0),e("div",ze,[e("div",null,[e("label",Ee," Password "+r(u.value?"(Opsional)":""),1),f(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>l(s).password=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!u.value,minlength:"8"},null,8,Ie),[[k,l(s).password]]),l(s).errors.password?(a(),n("p",Ke,r(l(s).errors.password),1)):c("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"PIN Akses (4-8 digit)",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>l(s).pin=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",maxlength:"8",placeholder:"123456"},null,512),[[k,l(s).pin]]),l(s).errors.pin?(a(),n("p",Oe,r(l(s).errors.pin),1)):c("",!0)])]),u.value?(a(),n("p",De,"* Kosongkan password jika tidak ingin mengubahnya.")):c("",!0)],32)]),e("div",Fe,[e("button",{onClick:_,type:"button",class:"inline-flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto",disabled:l(s).processing},r(u.value?"Simpan":"Buat Akun"),9,Te),e("button",{onClick:m,type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto"}," Batal ")])])])])])):c("",!0)])])]),_:1}))}};export{Re as default};
