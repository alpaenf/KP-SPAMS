import{m as y,p as H,c as I,w as C,a as e,e as r,f as g,i as F,g as L,l as A,j as i,o as s,t as o,d as v,v as h,y as P,F as R,r as N,b as le,h as se,C as z,k as ne}from"./app-DChihWcP.js";import{_ as re}from"./AppLayout-aK50HhRE.js";/* empty css            */const oe={class:"py-12"},ie={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ue={class:"flex justify-between items-center mb-8"},de={class:"flex gap-3"},pe={key:0,class:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg"},me={class:"bg-white rounded-lg shadow-md p-6 mb-6"},ge={class:"flex flex-col sm:flex-row gap-4"},be={class:"flex-1"},xe=["value"],ve={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},ye={class:"bg-white rounded-lg shadow-md p-6"},ce={class:"flex items-center"},fe={class:"ml-4"},he={class:"text-2xl font-bold text-gray-900"},ke={class:"bg-white rounded-lg shadow-md p-6"},we={class:"flex items-center"},_e={class:"ml-4"},Me={class:"text-2xl font-bold text-gray-900"},Be={class:"bg-white rounded-lg shadow-md p-6"},Ce={class:"flex items-center"},ze={class:"ml-4"},Se={class:"text-2xl font-bold text-gray-900"},je={class:"bg-white rounded-lg shadow-md overflow-hidden"},Ve={class:"overflow-x-auto"},Le={class:"min-w-full divide-y divide-gray-200"},Ae={class:"bg-blue-800"},Pe={key:0,class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},$e={class:"bg-white divide-y divide-gray-200"},Te={key:0},De=["colspan"],He={class:"px-6 py-4 whitespace-nowrap"},Ie={class:"text-sm font-medium text-gray-900"},Re={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"text-sm font-medium text-gray-900"},Ke={class:"px-6 py-4 whitespace-nowrap"},Fe=["href"],Ue={key:1,class:"text-sm text-gray-400"},We={class:"px-6 py-4 whitespace-nowrap"},Je={class:"text-sm text-gray-900"},Ee={class:"px-6 py-4 whitespace-nowrap"},Oe={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},Ge={class:"px-6 py-4 whitespace-nowrap"},Qe={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},qe={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ye={class:"px-6 py-4 whitespace-nowrap"},Xe={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ze={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},ea={class:"px-6 py-4 whitespace-nowrap"},aa={key:0,class:"flex flex-col"},ta={class:"text-xs text-purple-600 font-medium"},la={key:1,class:"flex flex-col"},sa={class:"text-xs text-gray-500"},na={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},ra={class:"px-6 py-4 whitespace-nowrap text-sm"},oa={key:1,class:"text-gray-400 text-xs"},ia={class:"px-6 py-4 whitespace-nowrap text-sm"},ua=["href"],da=["href"],pa={key:2,class:"text-gray-400 text-xs"},ma={key:0,class:"px-6 py-4 whitespace-nowrap text-sm"},ga={class:"flex gap-2 items-center"},ba=["href"],xa=["onClick"],va=["onClick"],ya={class:"flex items-center justify-center min-h-screen px-4"},ca={class:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full"},fa={class:"bg-blue-800 text-white px-6 py-4 rounded-t-lg flex justify-between items-center"},ha={class:"text-xl font-bold"},ka={class:"p-6"},wa={class:"mb-6 bg-gray-50 rounded-lg p-4"},_a={key:0,class:"mb-4 bg-yellow-50 border border-yellow-300 rounded-lg p-3"},Ma={class:"flex items-start"},Ba={class:"text-sm text-yellow-700"},Ca={key:1,class:"mb-4 bg-purple-50 border border-purple-200 rounded-lg p-3"},za={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Sa={key:0,class:"text-red-600 text-sm mt-1"},ja={key:0,class:"text-red-600 text-sm mt-1"},Va={key:0,class:"col-span-2 bg-yellow-50 border border-yellow-300 rounded-lg p-4"},La={key:0,class:"text-red-600 text-sm mt-1"},Aa={key:0,class:"text-red-600 text-sm mt-1"},Pa={key:0,class:"text-red-600 text-sm mt-1"},$a={key:1,class:"text-xs text-purple-600 mt-1 font-medium"},Ta={key:2,class:"text-xs text-gray-500 mt-1"},Da={class:"flex items-center space-x-3 cursor-pointer"},Ha={key:0,class:"text-red-600 text-sm mt-1"},Ia={key:0,class:"text-red-600 text-sm mt-1"},Ra=["disabled"],Na={key:0,class:"text-center py-8"},Ka={key:1,class:"text-center py-8"},Fa={key:2,class:"overflow-x-auto"},Ua={class:"min-w-full divide-y divide-gray-200"},Wa={class:"bg-white divide-y divide-gray-200"},Ja={class:"px-4 py-3 text-sm"},Ea={class:"px-4 py-3 text-sm"},Oa={class:"px-4 py-3 text-sm text-gray-600"},Ga={class:"px-4 py-3 text-sm text-gray-600"},Qa={class:"px-4 py-3 text-sm text-gray-600"},qa={class:"px-4 py-3 text-center"},Ya={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Xa={key:1,class:"text-gray-400 text-sm"},Za={class:"px-4 py-3 text-sm font-medium"},et={class:"px-4 py-3 text-sm text-gray-600"},at={class:"px-4 py-3 text-sm"},tt={class:"flex gap-2 justify-center"},lt=["onClick"],st=["onClick"],it={__name:"CekPelanggan",props:{pelangganList:{type:Array,default:()=>[]},bulanIni:{type:String,default:""}},setup(U){const k=U,d=y(k.pelangganList||[]),w=y(""),_=y("all"),f=y("all"),M=y("all"),$=y(!1),x=y(null),c=y([]),T=y(!1),S=y(!1),n=y({bulan_bayar:k.bulanIni||"",tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,abunemen:!1,tunggakan:0,jumlah_kubik:null,jumlah_bayar:null,keterangan:""}),j=()=>{const l=parseFloat(n.value.meteran_sebelum)||0,t=(parseFloat(n.value.meteran_sesudah)||0)-l;if(n.value.jumlah_kubik=t>=0?t:0,n.value.jumlah_kubik>0||n.value.abunemen||n.value.tunggakan>0)if(x.value?.kategori==="sosial")n.value.jumlah_bayar=0;else{const u=Math.round(n.value.jumlah_kubik*2e3),m=n.value.abunemen?3e3:0,b=parseFloat(n.value.tunggakan)||0;n.value.jumlah_bayar=u+m+b}else n.value.jumlah_bayar=0},p=y({}),W=H(()=>d.value.filter(l=>l.status_aktif).length),J=H(()=>{const l=[],a=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],t=new Date;for(let u=0;u<12;u++){const m=new Date(t.getFullYear(),t.getMonth()-u,1),b=m.getFullYear(),V=m.getMonth(),ae=`${b}-${String(V+1).padStart(2,"0")}`,te=`${a[V]} ${b}`;l.push({value:ae,label:te})}return l}),D=H(()=>{let l=d.value;if(_.value==="aktif"?l=l.filter(a=>a.status_aktif):_.value==="nonaktif"&&(l=l.filter(a=>!a.status_aktif)),M.value!=="all"&&(l=l.filter(a=>a.wilayah===M.value)),f.value!=="all"&&(l=l.filter(a=>a.bulan_dibayar&&a.bulan_dibayar.includes(f.value))),w.value){const a=w.value.toLowerCase();l=l.filter(t=>t.id_pelanggan.toLowerCase().includes(a)||t.nama_pelanggan.toLowerCase().includes(a)||t.rt&&t.rt.toString().includes(a)||t.rw&&t.rw.toString().includes(a))}return l}),B=l=>{const a=f.value!=="all"?f.value:k.bulanIni,t=l.bulan_dibayar&&l.bulan_dibayar.includes(a),u=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],[m,b]=a.split("-"),V=`${u[parseInt(b)-1]} ${m}`;return{sudah_bayar:t,bulan:V}},E=async l=>{x.value=l,$.value=!0,T.value=!0,p.value={};const a=k.bulanIni||new Date().toISOString().slice(0,7);n.value={bulan_bayar:a,tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:0,meteran_sesudah:0,abunemen:!1,tunggakan:0,jumlah_kubik:0,jumlah_bayar:0,keterangan:""};try{const t=await z.get(`/pelanggan/${l.id}/pembayaran`);c.value=t.data.pembayarans;try{const m=await z.get(`/api/tagihan-bulanan/${l.id}/${a}`);if(m.data&&m.data.tagihan){const b=m.data.tagihan;n.value.meteran_sebelum=b.meteran_sebelum||0,n.value.meteran_sesudah=b.meteran_sesudah||0,n.value.jumlah_kubik=b.pemakaian_kubik||0,n.value.jumlah_bayar=b.total_tagihan||0,n.value.abunemen=b.ada_abunemen||!1}}catch{console.log("Tidak ada tagihan bulanan untuk bulan ini")}const u=c.value.filter(m=>m.bulan_bayar<a&&(m.keterangan==="Nunggak"||m.keterangan==="Kurang bayar"||m.keterangan==="Terlambat")).reduce((m,b)=>m+parseFloat(b.jumlah_bayar||0),0);u>0&&(n.value.tunggakan=u)}catch(t){console.error("Error loading pembayaran:",t)}finally{T.value=!1}},K=()=>{$.value=!1,x.value=null,c.value=[],p.value={}},O=async()=>{if(x.value){p.value={},S.value=!0;try{const l=await z.post(`/pelanggan/${x.value.id}/pembayaran`,n.value);c.value.unshift(l.data.pembayaran);const a=d.value.findIndex(t=>t.id===x.value.id);if(a!==-1&&(d.value[a].bulan_dibayar||(d.value[a].bulan_dibayar=[]),d.value[a].bulan_dibayar.includes(l.data.pembayaran.bulan_bayar)||d.value[a].bulan_dibayar.push(l.data.pembayaran.bulan_bayar),l.data.pembayaran.bulan_bayar===k.bulanIni)){d.value[a].sudah_bayar=!0;const t=new Date(l.data.pembayaran.tanggal_bayar);d.value[a].tanggal_bayar=t.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),d.value[a].jumlah_bayar=l.data.pembayaran.jumlah_bayar}n.value={bulan_bayar:k.bulanIni||"",tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,abunemen:!1,tunggakan:0,jumlah_kubik:null,jumlah_bayar:null,keterangan:""},alert("Pembayaran berhasil ditambahkan!")}catch(l){l.response?.status===422?l.response.data.errors?p.value=l.response.data.errors:l.response.data.message&&alert(l.response.data.message):alert("Terjadi kesalahan saat menyimpan pembayaran")}finally{S.value=!1}}},G=async l=>{if(confirm("Apakah Anda yakin ingin menghapus pembayaran ini?"))try{const a=c.value.find(t=>t.id===l);if(await z.delete(`/pembayaran/${l}`),c.value=c.value.filter(t=>t.id!==l),a){const t=d.value.findIndex(u=>u.id===x.value.id);t!==-1&&(d.value[t].bulan_dibayar&&(d.value[t].bulan_dibayar=d.value[t].bulan_dibayar.filter(u=>u!==a.bulan_bayar)),a.bulan_bayar===k.bulanIni&&(d.value[t].sudah_bayar=!1,d.value[t].tanggal_bayar=null,d.value[t].jumlah_bayar=null))}alert("Pembayaran berhasil dihapus")}catch{alert("Terjadi kesalahan saat menghapus pembayaran")}},Q=async l=>{try{const a=await z.post(`/pembayaran/${l}/send-receipt`);a.data.wa_link&&(window.open(a.data.wa_link,"_blank"),alert(`Struk berhasil digenerate!

Pelanggan: ${a.data.pelanggan_nama}
No. WhatsApp: ${a.data.no_whatsapp}

Jendela WhatsApp akan terbuka. Silakan kirim pesan dengan struk pembayaran.`))}catch(a){a.response?.status===422?alert(a.response.data.message||"Nomor WhatsApp pelanggan tidak tersedia"):a.response?.status===404?alert(a.response.data.message||"Data pelanggan tidak ditemukan"):(console.error("Error sending receipt:",a),alert("Terjadi kesalahan saat mengirim struk. Silakan coba lagi."))}},q=()=>{const l=new URLSearchParams({search:w.value,status:_.value,bulan:f.value,wilayah:M.value});window.location.href=`/cek-pelanggan/export-excel?${l.toString()}`},Y=()=>{const l=new URLSearchParams({search:w.value,status:_.value,bulan:f.value,wilayah:M.value});window.location.href=`/cek-pelanggan/export-pdf?${l.toString()}`},X=l=>{if(!l)return"-";const[a,t]=l.split("-");return`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(t)-1]} ${a}`},Z=l=>l?new Date(l).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",ee=l=>{confirm(`Apakah Anda yakin ingin menghapus pelanggan ${l.nama_pelanggan}?`)&&ne.delete(`/pelanggan/${l.id}`)};return(l,a)=>(s(),I(re,null,{default:C(()=>[e("div",oe,[e("div",ie,[e("div",ue,[a[17]||(a[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Data Pelanggan KP-SPAMS"),e("p",{class:"text-gray-600"},"Daftar lengkap pelanggan air bersih desa")],-1)),e("div",de,[F(L(A),{href:"/qr-code/bulk-preview",class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition"},{default:C(()=>[...a[13]||(a[13]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),i(" Print QR Code ",-1)])]),_:1}),e("button",{onClick:q,class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition"},[...a[14]||(a[14]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),i(" Export Excel ",-1)])]),e("button",{onClick:Y,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition"},[...a[15]||(a[15]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),i(" Export PDF ",-1)])]),l.$page.props.auth?.user?(s(),I(L(A),{key:0,href:"/pelanggan/create",class:"inline-flex items-center px-6 py-3 bg-blue-800 text-white rounded-lg font-semibold hover:bg-blue-900 transition"},{default:C(()=>[...a[16]||(a[16]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),i(" Tambah Pelanggan ",-1)])]),_:1})):g("",!0)])]),l.$page.props.flash?.success?(s(),r("div",pe,o(l.$page.props.flash.success),1)):g("",!0),e("div",me,[e("div",ge,[e("div",be,[v(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>w.value=t),placeholder:"Cari berdasarkan ID, nama, RT, atau RW...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[h,w.value]])]),v(e("select",{"onUpdate:modelValue":a[1]||(a[1]=t=>_.value=t),class:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...a[18]||(a[18]=[e("option",{value:"all"},"Semua Status",-1),e("option",{value:"aktif"},"Aktif",-1),e("option",{value:"nonaktif"},"Nonaktif",-1)])],512),[[P,_.value]]),v(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>f.value=t),class:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[a[19]||(a[19]=e("option",{value:"all"},"Semua Bulan",-1)),(s(!0),r(R,null,N(J.value,t=>(s(),r("option",{key:t.value,value:t.value},o(t.label),9,xe))),128))],512),[[P,f.value]]),v(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>M.value=t),class:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...a[20]||(a[20]=[e("option",{value:"all"},"Semua Wilayah",-1),e("option",{value:"Dawuhan"},"Dawuhan",-1),e("option",{value:"Kubangsari Kulon"},"Kubangsari Kulon",-1),e("option",{value:"Kubangsari Wetan"},"Kubangsari Wetan",-1),e("option",{value:"Sokarame"},"Sokarame",-1),e("option",{value:"Tiparjaya"},"Tiparjaya",-1)])],512),[[P,M.value]])])]),e("div",ve,[e("div",ye,[e("div",ce,[a[22]||(a[22]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),e("div",fe,[a[21]||(a[21]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pelanggan",-1)),e("p",he,o(d.value.length),1)])])]),e("div",ke,[e("div",we,[a[24]||(a[24]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",_e,[a[23]||(a[23]=e("p",{class:"text-sm font-medium text-gray-500"},"Pelanggan Aktif",-1)),e("p",Me,o(W.value),1)])])]),e("div",Be,[e("div",Ce,[a[26]||(a[26]=e("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})])],-1)),e("div",ze,[a[25]||(a[25]=e("p",{class:"text-sm font-medium text-gray-500"},"Hasil Pencarian",-1)),e("p",Se,o(D.value.length),1)])])])]),e("div",je,[e("div",Ve,[e("table",Le,[e("thead",Ae,[e("tr",null,[a[27]||(a[27]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID Pelanggan",-1)),a[28]||(a[28]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama",-1)),a[29]||(a[29]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"No. WhatsApp",-1)),a[30]||(a[30]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"RT / RW",-1)),a[31]||(a[31]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah",-1)),a[32]||(a[32]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Kategori",-1)),a[33]||(a[33]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status",-1)),a[34]||(a[34]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status Bayar",-1)),a[35]||(a[35]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Lokasi",-1)),a[36]||(a[36]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Google Maps",-1)),l.$page.props.auth?.user?(s(),r("th",Pe,"Aksi")):g("",!0)])]),e("tbody",$e,[D.value.length===0?(s(),r("tr",Te,[e("td",{colspan:l.$page.props.auth?.user?11:10,class:"px-6 py-12 text-center text-gray-500"},[...a[37]||(a[37]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("p",{class:"mt-2"},"Tidak ada data pelanggan yang ditemukan",-1)])],8,De)])):g("",!0),(s(!0),r(R,null,N(D.value,t=>(s(),r("tr",{key:t.id_pelanggan,class:"hover:bg-gray-50 transition-colors"},[e("td",He,[e("div",Ie,o(t.id_pelanggan),1)]),e("td",Re,[e("div",Ne,o(t.nama_pelanggan),1)]),e("td",Ke,[t.no_whatsapp?(s(),r("a",{key:0,href:`https://wa.me/${t.no_whatsapp.replace(/^0/,"62")}`,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm"},[a[38]||(a[38]=e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})],-1)),i(" "+o(t.no_whatsapp),1)],8,Fe)):(s(),r("span",Ue,"-"))]),e("td",We,[e("div",Je,o(t.rt?`RT ${t.rt}`:"-")+" "+o(t.rt&&t.rw?"/":"")+" "+o(t.rw?`RW ${t.rw}`:""),1)]),e("td",Ee,[e("span",Oe,[a[39]||(a[39]=e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),i(" "+o(t.wilayah||"Belum diset"),1)])]),e("td",Ge,[t.kategori==="sosial"?(s(),r("span",Qe,[...a[40]||(a[40]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1),i(" Sosial (Gratis) ",-1)])])):(s(),r("span",qe,[...a[41]||(a[41]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})],-1),i(" Umum ",-1)])]))]),e("td",Ye,[t.status_aktif?(s(),r("span",Xe,[...a[42]||(a[42]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),i(" Aktif ",-1)])])):(s(),r("span",Ze,[...a[43]||(a[43]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),i(" Nonaktif ",-1)])]))]),e("td",ea,[t.kategori==="sosial"?(s(),r("div",aa,[a[44]||(a[44]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mb-1"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),i(" Gratis ")],-1)),e("span",ta,o(B(t).bulan),1)])):B(t).sudah_bayar?(s(),r("div",la,[a[45]||(a[45]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mb-1"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),i(" Sudah Bayar ")],-1)),e("span",sa,o(B(t).bulan),1)])):(s(),r("span",na,[...a[46]||(a[46]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),i(" Belum Bayar ",-1)])]))]),e("td",ra,[t.has_coordinates?(s(),I(L(A),{key:0,href:`/peta?pelanggan=${t.id_pelanggan}`,class:"inline-flex items-center text-blue-800 hover:text-blue-900 font-medium"},{default:C(()=>[...a[47]||(a[47]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1),i(" Lihat Peta ",-1)])]),_:1},8,["href"])):(s(),r("span",oa,"Tidak ada koordinat"))]),e("td",ia,[t.google_maps_url?(s(),r("a",{key:0,href:t.google_maps_url,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center text-blue-600 hover:text-blue-900 font-medium"},[...a[48]||(a[48]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})],-1),i(" Buka Maps ",-1)])],8,ua)):t.has_coordinates?(s(),r("a",{key:1,href:t.google_maps_link,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center text-blue-600 hover:text-blue-900 font-medium"},[...a[49]||(a[49]=[e("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),e("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})],-1),i(" Buka Maps ",-1)])],8,da)):(s(),r("span",pa,"-"))]),l.$page.props.auth?.user?(s(),r("td",ma,[e("div",ga,[e("a",{href:`/pelanggan/${t.id}/download-qr`,target:"_blank",class:"text-green-600 hover:text-green-800 transition",title:"Download QR Code"},[...a[50]||(a[50]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1)])],8,ba),e("button",{onClick:u=>E(t),class:"text-purple-600 hover:text-purple-800 transition",title:"Riwayat Pembayaran"},[...a[51]||(a[51]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)])],8,xa),F(L(A),{href:`/pelanggan/${t.id}/edit`,class:"text-blue-600 hover:text-blue-800 transition",title:"Edit"},{default:C(()=>[...a[52]||(a[52]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["href"]),e("button",{onClick:u=>ee(t),class:"text-red-600 hover:text-red-800 transition",title:"Hapus"},[...a[53]||(a[53]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,va)])])):g("",!0)]))),128))])])])])])]),$.value?(s(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:le(K,["self"])},[e("div",ya,[a[82]||(a[82]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",ca,[e("div",fa,[e("h3",ha,"Riwayat Pembayaran - "+o(x.value?.nama_pelanggan),1),e("button",{onClick:K,class:"text-white hover:text-gray-200"},[...a[54]||(a[54]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",ka,[e("div",wa,[a[74]||(a[74]=e("h4",{class:"text-lg font-semibold mb-4"},"Tambah Pembayaran Baru",-1)),x.value?.kategori!=="sosial"&&!B(x.value).sudah_bayar?(s(),r("div",_a,[e("div",Ma,[a[58]||(a[58]=e("svg",{class:"w-5 h-5 text-yellow-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[a[57]||(a[57]=e("p",{class:"text-sm font-bold text-yellow-800 mb-1"},"Pelanggan Belum Bayar Bulan Ini",-1)),e("p",Ba,[a[55]||(a[55]=i(" Bulan: ",-1)),e("strong",null,o(B(x.value).bulan),1),a[56]||(a[56]=i(". Silakan input pembayaran untuk bulan ini atau bulan lainnya. ",-1))])])])])):g("",!0),x.value?.kategori==="sosial"?(s(),r("div",Ca,[...a[59]||(a[59]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-purple-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),e("span",{class:"text-sm font-medium text-purple-800"},"Pelanggan Kategori Sosial - Tidak Dikenakan Biaya (Gratis)")],-1)])])):g("",!0),e("div",za,[e("div",null,[a[60]||(a[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan Bayar",-1)),v(e("input",{type:"month","onUpdate:modelValue":a[4]||(a[4]=t=>n.value.bulan_bayar=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[h,n.value.bulan_bayar]]),p.value.bulan_bayar?(s(),r("p",Sa,o(p.value.bulan_bayar),1)):g("",!0)]),e("div",null,[a[61]||(a[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Bayar",-1)),v(e("input",{type:"date","onUpdate:modelValue":a[5]||(a[5]=t=>n.value.tanggal_bayar=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[h,n.value.tanggal_bayar]]),p.value.tanggal_bayar?(s(),r("p",ja,o(p.value.tanggal_bayar),1)):g("",!0)]),!n.value.meteran_sebelum&&!n.value.meteran_sesudah?(s(),r("div",Va,[...a[62]||(a[62]=[e("div",{class:"flex items-start"},[e("svg",{class:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",{class:"text-sm"},[e("p",{class:"font-semibold text-yellow-800 mb-1"},"Data Meteran Belum Tersedia"),e("p",{class:"text-yellow-700"},[i("Meteran untuk bulan ini belum diinput. Silakan input data meteran air terlebih dahulu menggunakan "),e("strong",null,"QR Scanner"),i(" atau isi manual di form ini.")])])],-1)])])):g("",!0),e("div",null,[a[63]||(a[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sebelum",-1)),v(e("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=t=>n.value.meteran_sebelum=t),step:"0.01",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:j},null,544),[[h,n.value.meteran_sebelum]]),p.value.meteran_sebelum?(s(),r("p",La,o(p.value.meteran_sebelum),1)):g("",!0),a[64]||(a[64]=e("p",{class:"text-xs text-gray-500 mt-1"},"Angka meteran bulan lalu",-1))]),e("div",null,[a[65]||(a[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sesudah",-1)),v(e("input",{type:"number","onUpdate:modelValue":a[7]||(a[7]=t=>n.value.meteran_sesudah=t),step:"0.01",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:j},null,544),[[h,n.value.meteran_sesudah]]),p.value.meteran_sesudah?(s(),r("p",Aa,o(p.value.meteran_sesudah),1)):g("",!0),a[66]||(a[66]=e("p",{class:"text-xs text-gray-500 mt-1"},"Angka meteran bulan ini",-1))]),e("div",null,[a[67]||(a[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pemakaian (m³)",-1)),v(e("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=t=>n.value.jumlah_kubik=t),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent bg-gray-50",readonly:""},null,512),[[h,n.value.jumlah_kubik]]),p.value.jumlah_kubik?(s(),r("p",Pa,o(p.value.jumlah_kubik),1)):g("",!0),x.value?.kategori==="sosial"?(s(),r("p",$a,"Tarif: Gratis (Kategori Sosial)")):(s(),r("p",Ta,"Tarif: Rp 2.000 / m³"))]),e("div",null,[e("label",Da,[v(e("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=t=>n.value.abunemen=t),onChange:j,class:"w-5 h-5 text-blue-800 border-gray-300 rounded focus:ring-2 focus:ring-blue-800"},null,544),[[se,n.value.abunemen]]),a[68]||(a[68]=e("div",null,[e("span",{class:"text-sm font-medium text-gray-700"},"Abunemen"),e("p",{class:"text-xs text-gray-500"},"Biaya tambahan: Rp 3.000")],-1))])]),e("div",null,[a[69]||(a[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tunggakan (Rp)",-1)),v(e("input",{type:"number","onUpdate:modelValue":a[10]||(a[10]=t=>n.value.tunggakan=t),step:"1000",placeholder:"0",onInput:j,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,544),[[h,n.value.tunggakan]]),p.value.tunggakan?(s(),r("p",Ha,o(p.value.tunggakan),1)):g("",!0),a[70]||(a[70]=e("p",{class:"text-xs text-gray-500 mt-1"},"Nominal tagihan bulan sebelumnya yang belum dibayar (maksimal 3 bulan)",-1))]),e("div",null,[a[71]||(a[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Tagihan (Rp)",-1)),v(e("input",{type:"number","onUpdate:modelValue":a[11]||(a[11]=t=>n.value.jumlah_bayar=t),step:"1000",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent bg-gray-50",readonly:""},null,512),[[h,n.value.jumlah_bayar]]),p.value.jumlah_bayar?(s(),r("p",Ia,o(p.value.jumlah_bayar),1)):g("",!0)]),e("div",null,[a[73]||(a[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Keterangan",-1)),v(e("select",{"onUpdate:modelValue":a[12]||(a[12]=t=>n.value.keterangan=t),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...a[72]||(a[72]=[e("option",{value:""},"Pilih Keterangan",-1),e("option",{value:"Lunas bulan ini"},"Lunas bulan ini",-1),e("option",{value:"Lunas"},"Lunas",-1),e("option",{value:"Kurang bayar"},"Kurang bayar",-1),e("option",{value:"Terlambat"},"Terlambat",-1),e("option",{value:"Cicilan"},"Cicilan",-1),e("option",{value:"Nunggak"},"Nunggak (Akan masuk bulan depan)",-1)])],512),[[P,n.value.keterangan]])])]),e("button",{onClick:O,disabled:S.value,class:"mt-4 px-4 py-2 bg-blue-800 text-white rounded-lg hover:bg-blue-900 disabled:bg-gray-400 transition"},o(S.value?"Menyimpan...":"Simpan Pembayaran"),9,Ra)]),e("div",null,[a[81]||(a[81]=e("h4",{class:"text-lg font-semibold mb-4"},"Daftar Pembayaran",-1)),T.value?(s(),r("div",Na,[...a[75]||(a[75]=[e("p",{class:"text-gray-500"},"Memuat data...",-1)])])):c.value.length===0?(s(),r("div",Ka,[...a[76]||(a[76]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-gray-500"},"Belum ada riwayat pembayaran",-1)])])):(s(),r("div",Fa,[e("table",Ua,[a[80]||(a[80]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Bulan"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Tanggal Bayar"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Meteran Sebelum"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Meteran Sesudah"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Pemakaian"),e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase"},"Abunemen"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Jumlah"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Keterangan"),e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-700 uppercase w-20"},"Aksi")])],-1)),e("tbody",Wa,[(s(!0),r(R,null,N(c.value,t=>(s(),r("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",Ja,o(X(t.bulan_bayar)),1),e("td",Ea,o(Z(t.tanggal_bayar)),1),e("td",Oa,o(t.meteran_sebelum||"-"),1),e("td",Ga,o(t.meteran_sesudah||"-"),1),e("td",Qa,o(t.jumlah_kubik?t.jumlah_kubik+" m³":"-"),1),e("td",qa,[t.abunemen?(s(),r("span",Ya,[...a[77]||(a[77]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),i(" Ya ",-1)])])):(s(),r("span",Xa,"-"))]),e("td",Za,"Rp "+o(Number(t.jumlah_bayar).toLocaleString("id-ID")),1),e("td",et,o(t.keterangan||"-"),1),e("td",at,[e("div",tt,[e("button",{onClick:u=>Q(t.id),class:"text-blue-600 hover:text-blue-800 transition",title:"Kirim Struk via WhatsApp"},[...a[78]||(a[78]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,lt),e("button",{onClick:u=>G(t.id),class:"text-red-600 hover:text-red-800 transition",title:"Hapus"},[...a[79]||(a[79]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,st)])])]))),128))])])]))])])])])])):g("",!0)]),_:1}))}};export{it as default};
