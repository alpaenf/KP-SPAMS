import{m as p,p as m,c as w,w as x,a as t,i as k,g as D,l as j,j as P,t as o,e as l,f as r,d as g,v as V,o as n,y as C,F as L,r as N}from"./app-BWmZZJjf.js";import{_ as S}from"./AppLayout-D7i6kcxH.js";/* empty css            */const T={class:"py-12"},B={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},M={class:"mb-6"},I={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"},K={class:"flex gap-2"},R={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},z={class:"bg-white rounded-lg shadow-md p-6"},W={class:"flex items-center"},A={class:"ml-4"},F={class:"text-2xl font-bold text-gray-900"},H={class:"bg-white rounded-lg shadow-md p-6"},U={class:"flex items-center"},$={class:"ml-4"},E={class:"text-2xl font-bold text-gray-900"},J={class:"bg-white rounded-lg shadow-md p-6"},q={class:"flex items-center"},G={class:"ml-4"},O={class:"text-2xl font-bold text-gray-900"},Q={class:"bg-white rounded-lg shadow-md p-6 mb-6"},X={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Y={class:"md:col-span-2"},Z={key:0},tt={class:"bg-white rounded-lg shadow-md overflow-hidden"},et={class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-200"},st={class:"bg-white divide-y divide-gray-200"},ot={key:0},nt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"text-sm text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap"},it={class:"text-sm font-medium text-gray-900"},dt={class:"px-6 py-4"},ut={class:"text-sm font-medium text-gray-900"},ct={key:0,class:"text-xs text-purple-600 font-medium"},pt={class:"px-6 py-4 whitespace-nowrap"},mt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},xt={class:"px-6 py-4 whitespace-nowrap text-center"},gt={class:"text-sm text-gray-900"},ht={key:0,class:"text-xs text-blue-600"},vt={class:"px-6 py-4 whitespace-nowrap text-right"},yt={class:"text-sm font-semibold text-gray-900"},ft={key:0,class:"text-xs text-orange-600"},kt={__name:"Index",props:{pembayaranList:{type:Array,default:()=>[]}},setup(h){const v=h,i=p(""),d=p("all"),u=m(()=>{let s=v.pembayaranList;if(i.value){const e=i.value.toLowerCase();s=s.filter(a=>a.id_pelanggan.toLowerCase().includes(e)||a.nama_pelanggan.toLowerCase().includes(e))}return d.value!=="all"&&(s=s.filter(e=>e.wilayah===d.value)),s}),c=m(()=>{const s=u.value,e=s.reduce((b,_)=>b+Number(_.jumlah_bayar),0),a=s.length,f=a>0?e/a:0;return{totalPembayaran:a,totalPemasukan:e,rataRata:f}}),y=s=>{if(!s)return"-";const e=new Date(s),a={year:"numeric",month:"short",day:"numeric"};return e.toLocaleDateString("id-ID",a)};return(s,e)=>(n(),w(S,null,{default:x(()=>[t("div",T,[t("div",B,[t("div",M,[t("div",I,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900"},"Riwayat Pembayaran"),t("p",{class:"text-sm sm:text-base text-gray-600"},"Daftar semua transaksi pembayaran pelanggan")],-1)),t("div",K,[k(D(j),{href:"/cek-pelanggan",class:"inline-flex items-center px-4 py-2 bg-blue-800 text-white rounded-lg font-medium hover:bg-blue-900 transition text-sm"},{default:x(()=>[...e[2]||(e[2]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),P(" Kembali ",-1)])]),_:1})])])]),t("div",R,[t("div",z,[t("div",W,[e[5]||(e[5]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",A,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Transaksi",-1)),t("p",F,o(c.value.totalPembayaran),1)])])]),t("div",H,[t("div",U,[e[7]||(e[7]=t("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",$,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Pemasukan",-1)),t("p",E,"Rp "+o(Number(c.value.totalPemasukan).toLocaleString("id-ID")),1)])])]),t("div",J,[t("div",q,[e[9]||(e[9]=t("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),t("div",G,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500"},"Rata-rata",-1)),t("p",O,"Rp "+o(Number(c.value.rataRata).toLocaleString("id-ID")),1)])])])]),t("div",Q,[t("div",X,[t("div",Y,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cari Pelanggan",-1)),g(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),placeholder:"Cari berdasarkan ID atau nama pelanggan...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[V,i.value]])]),s.$page.props.auth.user.role!=="penarik"?(n(),l("div",Z,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Wilayah",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...e[11]||(e[11]=[t("option",{value:"all"},"Semua Wilayah",-1),t("option",{value:"Dawuhan"},"Dawuhan",-1),t("option",{value:"Kubangsari Kulon"},"Kubangsari Kulon",-1),t("option",{value:"Kubangsari Wetan"},"Kubangsari Wetan",-1),t("option",{value:"Sokarame"},"Sokarame",-1),t("option",{value:"Tiparjaya"},"Tiparjaya",-1)])],512),[[C,d.value]])])):r("",!0)])]),t("div",tt,[t("div",et,[t("table",at,[e[14]||(e[14]=t("thead",{class:"bg-blue-800"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID Pelanggan"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Pemakaian"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-white uppercase tracking-wider"},"Jumlah Bayar")])],-1)),t("tbody",st,[u.value.length===0?(n(),l("tr",ot,[...e[13]||(e[13]=[t("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500"},[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),t("p",{class:"mt-2"},"Tidak ada data pembayaran ditemukan")],-1)])])):r("",!0),(n(!0),l(L,null,N(u.value,a=>(n(),l("tr",{key:a.id,class:"hover:bg-gray-50 transition-colors"},[t("td",nt,[t("div",lt,o(y(a.tanggal_bayar)),1)]),t("td",rt,[t("div",it,o(a.id_pelanggan),1)]),t("td",dt,[t("div",ut,o(a.nama_pelanggan),1),a.kategori==="sosial"?(n(),l("div",ct,"Kategori Sosial")):r("",!0)]),t("td",pt,[t("span",mt,o(a.wilayah||"N/A"),1)]),t("td",xt,[t("div",gt,o(a.jumlah_kubik?a.jumlah_kubik+" mÂ³":"-"),1),a.abunemen?(n(),l("div",ht,"+ Abunemen")):r("",!0)]),t("td",vt,[t("div",yt,"Rp "+o(Number(a.jumlah_bayar).toLocaleString("id-ID")),1),a.tunggakan>0?(n(),l("div",ft,"Tunggakan: Rp "+o(Number(a.tunggakan).toLocaleString("id-ID")),1)):r("",!0)])]))),128))])])])])])])]),_:1}))}};export{kt as default};
