import{m as y,c as M,w as v,a as t,b as k,d as w,l as c,e as b,f as K,g as i,h as n,i as u,n as g,v as p,o as s,t as m,y as h,j,k as F}from"./app-CGBv7if2.js";import{_ as N}from"./AppLayout-B7U_nJBO.js";/* empty css            */const B={class:"py-12"},D={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},G={class:"mb-8"},C={class:"flex items-center gap-4 mb-4"},L={class:"bg-white rounded-lg shadow-md p-8"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={key:0,class:"mt-1 text-sm text-red-600"},R={key:0,class:"mt-1 text-sm text-red-600"},W={key:0,class:"mt-1 text-sm text-red-600"},q={key:0,class:"mt-1 text-sm text-red-600"},E={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},A={key:0,class:"mt-1 text-sm text-red-600"},H={key:0,class:"mt-1 text-sm text-red-600"},I={class:"flex gap-2"},$={key:0,class:"mt-1 text-sm text-red-600"},J={key:0,class:"mt-1 text-sm text-red-600"},O={class:"mt-6"},Q={key:0,class:"mt-1 text-sm text-red-600"},X={class:"mt-6"},Y={key:0,class:"mb-3"},Z=["src"],_={key:1,class:"mt-1 text-sm text-red-600"},ee={key:2,class:"mt-4"},te=["src"],ae={class:"mt-6"},re={class:"flex items-center"},le={class:"mt-8 flex gap-4"},oe=["disabled"],se={key:0},ne={key:1},ge={__name:"Edit",props:{pelanggan:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(r){const d=r,a=y({id_pelanggan:d.pelanggan.id_pelanggan,nama_pelanggan:d.pelanggan.nama_pelanggan,nik:d.pelanggan.nik||"",no_whatsapp:d.pelanggan.no_whatsapp||"",rt:d.pelanggan.rt,rw:d.pelanggan.rw,kategori:d.pelanggan.kategori||"umum",wilayah:d.pelanggan.wilayah||"Dawuhan",latitude:d.pelanggan.latitude,longitude:d.pelanggan.longitude,google_maps_url:d.pelanggan.google_maps_url||"",foto_rumah:null,status_aktif:d.pelanggan.status_aktif}),f=y(!1),x=y(null),U=o=>{const e=o.target.files[0];if(e){a.value.foto_rumah=e;const l=new FileReader;l.onload=P=>{x.value=P.target.result},l.readAsDataURL(e)}},V=()=>{f.value=!0;const o=new FormData;o.append("id_pelanggan",a.value.id_pelanggan||""),o.append("nama_pelanggan",a.value.nama_pelanggan||""),o.append("nik",a.value.nik||""),o.append("no_whatsapp",a.value.no_whatsapp||""),o.append("rt",a.value.rt||""),o.append("rw",a.value.rw||""),o.append("kategori",a.value.kategori||"umum"),o.append("wilayah",a.value.wilayah||""),o.append("latitude",a.value.latitude||""),o.append("longitude",a.value.longitude||""),o.append("google_maps_url",a.value.google_maps_url||""),o.append("status_aktif",a.value.status_aktif?"1":"0"),a.value.foto_rumah instanceof File&&o.append("foto_rumah",a.value.foto_rumah),o.append("_method","PUT"),F.post(`/pelanggan/${d.pelanggan.id}`,o,{onFinish:()=>{f.value=!1}})};return(o,e)=>(s(),M(N,null,{default:v(()=>[t("div",B,[t("div",D,[t("div",G,[t("div",C,[k(w(c),{href:"/cek-pelanggan",class:"inline-flex items-center text-gray-600 hover:text-gray-900 transition"},{default:v(()=>[...e[13]||(e[13]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),b(" Kembali ",-1)])]),_:1})]),e[14]||(e[14]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Pelanggan",-1)),e[15]||(e[15]=t("p",{class:"text-gray-600 mt-1"},"Update informasi pelanggan",-1))]),t("div",L,[t("form",{onSubmit:K(V,["prevent"])},[t("div",S,[t("div",null,[e[16]||(e[16]=t("label",{for:"id_pelanggan",class:"block text-sm font-medium text-gray-700 mb-2"},[b(" ID Pelanggan "),t("span",{class:"text-red-600"},"*")],-1)),i(t("input",{type:"text",id:"id_pelanggan","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.id_pelanggan=l),placeholder:"PLG001",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.id_pelanggan}]),required:""},null,2),[[p,a.value.id_pelanggan]]),r.errors.id_pelanggan?(s(),n("p",T,m(r.errors.id_pelanggan),1)):u("",!0)]),t("div",null,[e[17]||(e[17]=t("label",{for:"nama_pelanggan",class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Nama Pelanggan "),t("span",{class:"text-red-600"},"*")],-1)),i(t("input",{type:"text",id:"nama_pelanggan","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.nama_pelanggan=l),placeholder:"Nama lengkap",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.nama_pelanggan}]),required:""},null,2),[[p,a.value.nama_pelanggan]]),r.errors.nama_pelanggan?(s(),n("p",R,m(r.errors.nama_pelanggan),1)):u("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{for:"nik",class:"block text-sm font-medium text-gray-700 mb-2"},"NIK",-1)),i(t("input",{type:"text",id:"nik","onUpdate:modelValue":e[2]||(e[2]=l=>a.value.nik=l),placeholder:"3579012345678901",maxlength:"16",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.nik}])},null,2),[[p,a.value.nik]]),r.errors.nik?(s(),n("p",W,m(r.errors.nik),1)):u("",!0),e[19]||(e[19]=t("p",{class:"mt-1 text-xs text-gray-500"},"Nomor Induk Kependudukan (16 digit)",-1))]),t("div",null,[e[20]||(e[20]=t("label",{for:"no_whatsapp",class:"block text-sm font-medium text-gray-700 mb-2"},"No. WhatsApp",-1)),i(t("input",{type:"text",id:"no_whatsapp","onUpdate:modelValue":e[3]||(e[3]=l=>a.value.no_whatsapp=l),placeholder:"08123456789",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.no_whatsapp}])},null,2),[[p,a.value.no_whatsapp]]),r.errors.no_whatsapp?(s(),n("p",q,m(r.errors.no_whatsapp),1)):u("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{for:"rt",class:"block text-sm font-medium text-gray-700 mb-2"},"RT",-1)),i(t("input",{type:"number",id:"rt","onUpdate:modelValue":e[4]||(e[4]=l=>a.value.rt=l),placeholder:"001",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.rt}])},null,2),[[p,a.value.rt]]),r.errors.rt?(s(),n("p",E,m(r.errors.rt),1)):u("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{for:"rw",class:"block text-sm font-medium text-gray-700 mb-2"},"RW",-1)),i(t("input",{type:"number",id:"rw","onUpdate:modelValue":e[5]||(e[5]=l=>a.value.rw=l),placeholder:"001",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.rw}])},null,2),[[p,a.value.rw]]),r.errors.rw?(s(),n("p",z,m(r.errors.rw),1)):u("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{for:"kategori",class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Kategori Pelanggan "),t("span",{class:"text-red-600"},"*")],-1)),i(t("select",{id:"kategori","onUpdate:modelValue":e[6]||(e[6]=l=>a.value.kategori=l),class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.kategori}]),required:""},[...e[23]||(e[23]=[t("option",{value:"umum"},"Umum",-1),t("option",{value:"sosial"},"Sosial (Gratis)",-1)])],2),[[h,a.value.kategori]]),r.errors.kategori?(s(),n("p",A,m(r.errors.kategori),1)):u("",!0),e[25]||(e[25]=t("p",{class:"mt-1 text-xs text-gray-500"},"Pelanggan kategori sosial tidak dikenakan biaya",-1))]),t("div",null,[e[27]||(e[27]=t("label",{for:"wilayah",class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Wilayah "),t("span",{class:"text-red-600"},"*")],-1)),i(t("select",{id:"wilayah","onUpdate:modelValue":e[7]||(e[7]=l=>a.value.wilayah=l),class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.wilayah}]),required:""},[...e[26]||(e[26]=[t("option",{value:"Dawuhan"},"Dawuhan",-1),t("option",{value:"Kubangsari Kulon"},"Kubangsari Kulon",-1),t("option",{value:"Kubangsari Wetan"},"Kubangsari Wetan",-1),t("option",{value:"Sokarame"},"Sokarame",-1),t("option",{value:"Tiparjaya"},"Tiparjaya",-1)])],2),[[h,a.value.wilayah]]),r.errors.wilayah?(s(),n("p",H,m(r.errors.wilayah),1)):u("",!0)]),t("div",null,[e[28]||(e[28]=t("label",{for:"latitude",class:"block text-sm font-medium text-gray-700 mb-2"},"Latitude",-1)),t("div",I,[i(t("input",{type:"text",id:"latitude","onUpdate:modelValue":e[8]||(e[8]=l=>a.value.latitude=l),placeholder:"-6.200000",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent transition",{"border-red-500":r.errors.latitude}])},null,2),[[p,a.value.latitude]]),t("button",{type:"button",onClick:e[9]||(e[9]=l=>a.value.latitude=a.value.latitude?a.value.latitude.startsWith("-")?a.value.latitude.substring(1):"-"+a.value.latitude:"-"),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-bold border border-gray-300 shadow-sm",title:"Ubah Tanda +/-"}," ± ")]),r.errors.latitude?(s(),n("p",$,m(r.errors.latitude),1)):u("",!0),e[29]||(e[29]=t("a",{href:"https://www.google.com/maps",target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center mt-1 text-xs text-blue-600 hover:text-blue-800"},[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),t("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]),b(" Buka Google Maps untuk mendapatkan koordinat ")],-1))]),t("div",null,[e[30]||(e[30]=t("label",{for:"longitude",class:"block text-sm font-medium text-gray-700 mb-2"},"Longitude",-1)),i(t("input",{type:"text",inputmode:"decimal",id:"longitude","onUpdate:modelValue":e[10]||(e[10]=l=>a.value.longitude=l),placeholder:"106.816666",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.longitude}])},null,2),[[p,a.value.longitude]]),r.errors.longitude?(s(),n("p",J,m(r.errors.longitude),1)):u("",!0),e[31]||(e[31]=t("p",{class:"mt-1 text-xs text-gray-500"},"Klik kanan pada lokasi di Google Maps → Koordinat akan muncul di bagian atas",-1))])]),t("div",O,[e[32]||(e[32]=t("label",{for:"google_maps_url",class:"block text-sm font-medium text-gray-700 mb-2"}," Link Google Maps ",-1)),i(t("input",{type:"url",id:"google_maps_url","onUpdate:modelValue":e[11]||(e[11]=l=>a.value.google_maps_url=l),placeholder:"https://maps.app.goo.gl/xxxx",class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.google_maps_url}])},null,2),[[p,a.value.google_maps_url]]),r.errors.google_maps_url?(s(),n("p",Q,m(r.errors.google_maps_url),1)):u("",!0),e[33]||(e[33]=t("p",{class:"mt-1 text-xs text-gray-500"},"Paste shortened Google Maps link (contoh: https://maps.app.goo.gl/8jxgfLkPirsLH9uc7)",-1))]),t("div",X,[e[36]||(e[36]=t("label",{for:"foto_rumah",class:"block text-sm font-medium text-gray-700 mb-2"}," Foto Rumah ",-1)),d.pelanggan.foto_rumah_url&&!x.value?(s(),n("div",Y,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-600 mb-2"},"Foto saat ini:",-1)),t("img",{src:d.pelanggan.foto_rumah_url,alt:"Foto Rumah",class:"w-48 h-48 object-cover rounded-lg border border-gray-300"},null,8,Z)])):u("",!0),t("input",{type:"file",id:"foto_rumah",accept:"image/jpeg,image/jpg,image/png",onChange:U,class:g(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",{"border-red-500":r.errors.foto_rumah}])},null,34),r.errors.foto_rumah?(s(),n("p",_,m(r.errors.foto_rumah),1)):u("",!0),e[37]||(e[37]=t("p",{class:"mt-1 text-xs text-gray-500"},"Format: JPG, JPEG, PNG. Maksimal 2MB. Kosongkan jika tidak ingin mengubah foto",-1)),x.value?(s(),n("div",ee,[e[35]||(e[35]=t("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Preview foto baru:",-1)),t("img",{src:x.value,alt:"Preview",class:"w-48 h-48 object-cover rounded-lg border border-gray-300"},null,8,te)])):u("",!0)]),t("div",ae,[t("label",re,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=l=>a.value.status_aktif=l),class:"h-4 w-4 text-blue-800 focus:ring-blue-800 border-gray-300 rounded"},null,512),[[j,a.value.status_aktif]]),e[38]||(e[38]=t("span",{class:"ml-2 text-sm text-gray-700"},"Status Aktif",-1))])]),t("div",le,[t("button",{type:"submit",disabled:f.value,class:"px-6 py-3 bg-blue-800 text-white rounded-lg font-semibold hover:bg-blue-900 transition disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(s(),n("span",se,"Menyimpan...")):(s(),n("span",ne,"Update"))],8,oe),k(w(c),{href:"/cek-pelanggan",class:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition"},{default:v(()=>[...e[39]||(e[39]=[b(" Batal ",-1)])]),_:1})])],32)])])])]),_:1}))}};export{ge as default};
