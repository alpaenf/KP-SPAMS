import{m as p,p as f,B as E,c as W,w,a as t,e as r,f as m,i as T,g as j,l as z,o as n,j as u,t as o,d as c,v as P,y as J,F as Q,r as Y,b as Be,h as je,C as N,k as ze}from"./app-BoQV9IN6.js";import{_ as Pe}from"./AppLayout-nC8R5fbb.js";import{_ as ne}from"./ClientPagination--Qk_pqxY.js";/* empty css            */const Se={class:"py-12"},$e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ve={class:"mb-6"},Ae={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"},Le={class:"hidden lg:flex gap-2 xl:gap-3"},He={class:"lg:hidden relative"},Te={key:0,class:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl z-50 border border-gray-200"},De={class:"py-2"},Ie={key:0,class:"mb-6 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg"},Re={class:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6"},Ne={class:"space-y-3"},Fe={class:"w-full"},Ue={class:"grid grid-cols-1 sm:grid-cols-3 gap-3"},Ke=["value"],Ee={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},We={class:"bg-white rounded-lg shadow-md p-4"},Je={class:"flex items-center"},Ge={class:"ml-3 sm:ml-4"},Oe={class:"text-xl sm:text-2xl font-bold text-gray-900"},qe={class:"bg-white rounded-lg shadow-md p-6"},Qe={class:"flex items-center"},Ye={class:"ml-4"},Xe={class:"text-2xl font-bold text-gray-900"},Ze={class:"bg-white rounded-lg shadow-md p-6"},et={class:"flex items-center"},tt={class:"ml-4"},at={class:"text-2xl font-bold text-gray-900"},st={class:"bg-white rounded-lg shadow-md overflow-hidden"},lt={class:"overflow-x-auto"},nt={class:"min-w-full divide-y divide-gray-200"},rt={class:"bg-blue-800"},ot={key:0,class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},it={class:"bg-white divide-y divide-gray-200"},ut={key:0},dt=["colspan"],pt={class:"px-6 py-4 whitespace-nowrap"},mt={class:"text-sm font-medium text-gray-900"},gt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap"},bt=["href"],ht={key:1,class:"text-sm text-gray-400"},ct={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},kt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},wt={class:"px-6 py-4 whitespace-nowrap"},_t={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Mt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ct={class:"px-6 py-4 whitespace-nowrap"},Bt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},jt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},zt={class:"px-6 py-4 whitespace-nowrap"},Pt={key:0,class:"flex flex-col"},St={class:"text-xs text-purple-600 font-medium"},$t={key:1,class:"flex flex-col"},Vt={class:"text-xs text-gray-500"},At={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm"},Ht={key:1,class:"text-gray-400 text-xs"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm"},Dt=["href"],It=["href"],Rt={key:2,class:"text-gray-400 text-xs"},Nt={key:0,class:"px-6 py-4 whitespace-nowrap text-sm"},Ft={class:"flex gap-2 items-center"},Ut=["href"],Kt=["onClick"],Et=["onClick"],Wt={class:"bg-white px-4 py-3 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between sm:px-6 gap-3"},Jt={class:"text-sm text-gray-700 text-center sm:text-left"},Gt={class:"font-semibold"},Ot={class:"font-semibold"},qt={class:"font-semibold"},Qt={class:"flex items-center justify-center min-h-screen px-4 py-6"},Yt={class:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col"},Xt={class:"bg-blue-800 text-white px-4 sm:px-6 py-3 sm:py-4 rounded-t-lg flex justify-between items-center flex-shrink-0"},Zt={class:"text-lg sm:text-xl font-bold"},ea={class:"p-4 sm:p-6 overflow-y-auto flex-1"},ta={class:"mb-6 bg-gray-50 rounded-lg p-3 sm:p-4"},aa={key:0,class:"mb-4 bg-yellow-50 border border-yellow-300 rounded-lg p-3"},sa={class:"flex items-start"},la={class:"text-sm text-yellow-700"},na={key:1,class:"mb-4 bg-purple-50 border border-purple-200 rounded-lg p-3"},ra={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6"},oa={class:"col-span-1"},ia={class:"relative rounded-md shadow-sm"},ua={key:0,class:"mt-1 text-xs text-red-600"},da={class:"col-span-1"},pa={class:"relative rounded-md shadow-sm"},ma={key:0,class:"mt-1 text-xs text-red-600"},ga={key:0,class:"col-span-1 sm:col-span-2 bg-yellow-50 border border-yellow-300 rounded-lg p-3"},xa={class:"col-span-1 space-y-2"},va={key:0,class:"mt-1 text-xs text-red-600"},ba={class:"col-span-1 space-y-2"},ha={key:0,class:"mt-1 text-xs text-red-600"},ca={key:0,class:"text-red-600 text-sm mt-1"},ya={key:1,class:"text-xs text-purple-600 mt-1 font-medium"},fa={key:2,class:"text-xs text-gray-500 mt-1"},ka={class:"flex items-center space-x-3 cursor-pointer"},wa={key:0,class:"text-red-600 text-sm mt-1"},_a={key:0,class:"text-red-600 text-sm mt-1"},Ma=["disabled"],Ca={key:0,class:"text-center py-8"},Ba={key:1,class:"text-center py-8"},ja={key:2,class:"overflow-x-auto -mx-3 sm:mx-0"},za={class:"min-w-full divide-y divide-gray-200 text-sm"},Pa={class:"bg-white divide-y divide-gray-200"},Sa={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm"},$a={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm"},Va={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm text-gray-600 hidden sm:table-cell"},Aa={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm text-gray-600 hidden sm:table-cell"},La={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm text-gray-600"},Ha={class:"px-2 sm:px-4 py-2 sm:py-3 text-center hidden lg:table-cell"},Ta={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Da={key:1,class:"text-gray-400 text-xs sm:text-sm"},Ia={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm font-medium"},Ra={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm text-gray-600 hidden md:table-cell"},Na={class:"px-2 sm:px-4 py-2 sm:py-3 text-xs sm:text-sm"},Fa={class:"flex gap-1 sm:gap-2 justify-center"},Ua=["onClick"],Ka=["onClick"],Ea=["onClick"],Wa=["onClick"],Ja={class:"mt-4 flex flex-col sm:flex-row items-center justify-between gap-3"},Ga={class:"text-xs text-gray-500 text-center sm:text-left"},Oa={class:"font-semibold"},qa={class:"font-semibold"},Qa={class:"font-semibold"},y=20,as={__name:"CekPelanggan",props:{pelangganList:{type:Array,default:()=>[]},pembayaranList:{type:Array,default:()=>[]},bulanIni:{type:String,default:""},bulanFilter:{type:String,default:""},stats:{type:Object,default:()=>({totalPembayaran:0,totalPemasukan:0,rataRata:0})}},setup(re){const _=re,g=p(_.pelangganList||[]),S=p(""),$=p("all"),V=p("all"),A=p("all"),M=p(!1);p("pelanggan");const X=p(""),Z=p("all"),G=p(!1),v=p(null),b=p([]),O=p(!1),U=p(!1),l=p({bulan_bayar:_.bulanIni||"",tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,abunemen:!1,tunggakan:0,jumlah_kubik:null,jumlah_bayar:null,keterangan:""}),C=()=>{const s=parseFloat(l.value.meteran_sebelum)||0,a=(parseFloat(l.value.meteran_sesudah)||0)-s;if(l.value.jumlah_kubik=a>=0?a:0,l.value.jumlah_kubik>0||l.value.abunemen||l.value.tunggakan>0)if(v.value?.kategori==="sosial")l.value.jumlah_bayar=0;else{const i=Math.round(l.value.jumlah_kubik*2e3),h=l.value.abunemen?3e3:0,d=parseFloat(l.value.tunggakan)||0;l.value.jumlah_bayar=i+h+d}else l.value.jumlah_bayar=0},x=p({}),oe=f(()=>g.value.filter(s=>s.status_aktif).length),ie=f(()=>{const s=[],e=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],a=new Date;for(let i=0;i<12;i++){const h=new Date(a.getFullYear(),a.getMonth()-i,1),d=h.getFullYear(),B=h.getMonth(),R=`${d}-${String(B+1).padStart(2,"0")}`,K=`${e[B]} ${d}`;s.push({value:R,label:K})}return s}),L=f(()=>{let s=g.value;if($.value==="aktif"?s=s.filter(e=>e.status_aktif):$.value==="nonaktif"&&(s=s.filter(e=>!e.status_aktif)),A.value!=="all"&&(s=s.filter(e=>e.wilayah===A.value)),S.value){const e=S.value.toLowerCase();s=s.filter(a=>a.id_pelanggan.toLowerCase().includes(e)||a.nama_pelanggan.toLowerCase().includes(e)||a.rt&&a.rt.toString().includes(e)||a.rw&&a.rw.toString().includes(e))}return s}),F=s=>{const e=V.value!=="all"?V.value:_.bulanIni,a=s.bulan_dibayar&&s.bulan_dibayar.includes(e),i=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],[h,d]=e.split("-"),B=`${i[parseInt(d)-1]} ${h}`;return{sudah_bayar:a,bulan:B}},q=f(()=>{let s=_.pembayaranList||[];if(X.value){const e=X.value.toLowerCase();s=s.filter(a=>a.id_pelanggan.toLowerCase().includes(e)||a.nama_pelanggan.toLowerCase().includes(e))}return Z.value!=="all"&&(s=s.filter(e=>e.wilayah===Z.value)),s}),ue=async s=>{v.value=s,G.value=!0,O.value=!0,x.value={};const e=new Date,a=_.bulanIni||e.toISOString().slice(0,7),i=e.toISOString().split("T")[0];try{const h=await N.get(`/pelanggan/${s.id}/pembayaran`);b.value=h.data.pembayarans;const d=e.getFullYear(),B=e.getMonth()+1;let R=a;for(let k=1;k<=B;k++){const H=`${d}-${String(k).padStart(2,"0")}`;if(!b.value.some(Ce=>Ce.bulan_bayar===H)){R=H;break}}l.value={bulan_bayar:R,tanggal_bayar:i,meteran_sebelum:0,meteran_sesudah:0,abunemen:!1,tunggakan:0,jumlah_kubik:0,jumlah_bayar:0,keterangan:""},await ee(R);const K=b.value.filter(k=>{const H=k.keterangan?k.keterangan.toUpperCase():"";return k.bulan_bayar<R&&(H==="TUNGGAKAN"||H==="CICILAN")}).reduce((k,H)=>k+parseFloat(H.jumlah_bayar||0),0);K>0&&(l.value.tunggakan=K,C())}catch(h){console.error("Error loading data:",h)}finally{O.value=!1}},de=s=>{if(!s)return null;let[e,a]=s.split("-").map(Number);return a=a-1,a===0&&(e-=1,a=12),`${e}-${String(a).padStart(2,"0")}`},ee=async s=>{if(v.value)try{let e;try{e=await N.get(`/api/tagihan-bulanan/${v.value.id}/${s}`)}catch(i){if(i.response&&i.response.status===404)e={data:{tagihan:null}};else throw i}if(e.data&&e.data.tagihan){const i=e.data.tagihan;l.value.meteran_sebelum=i.meteran_sebelum,l.value.meteran_sesudah=i.meteran_sesudah,l.value.jumlah_kubik=i.pemakaian_kubik,i.ada_abunemen&&(l.value.abunemen=!0),C();return}const a=de(s);if(a){let i=!1,h=0;try{const d=await N.get(`/api/tagihan-bulanan/${v.value.id}/${a}`);d.data&&d.data.tagihan&&d.data.tagihan.meteran_sesudah>0&&(h=d.data.tagihan.meteran_sesudah,i=!0)}catch(d){d.response&&d.response.status!==404&&console.error("Error fetching prev tagihan:",d)}if(!i){const d=b.value.find(B=>B.bulan_bayar===a);d&&d.meteran_sesudah>0&&(h=d.meteran_sesudah,i=!0)}if(i){l.value.meteran_sebelum=h,l.value.meteran_sesudah=0,l.value.jumlah_kubik=0,C();return}}l.value.meteran_sebelum=0,l.value.meteran_sesudah=0,l.value.jumlah_kubik=0,C()}catch(e){console.error("Error fetching meteran data:",e)}};E(()=>l.value.bulan_bayar,s=>{s&&v.value&&ee(s)});const te=()=>{G.value=!1,v.value=null,b.value=[],x.value={}},pe=async()=>{if(v.value){x.value={},U.value=!0;try{const s=await N.post(`/pelanggan/${v.value.id}/pembayaran`,l.value);b.value.unshift(s.data.pembayaran);const e=g.value.findIndex(a=>a.id===v.value.id);if(e!==-1&&(g.value[e].bulan_dibayar||(g.value[e].bulan_dibayar=[]),g.value[e].bulan_dibayar.includes(s.data.pembayaran.bulan_bayar)||g.value[e].bulan_dibayar.push(s.data.pembayaran.bulan_bayar),s.data.pembayaran.bulan_bayar===_.bulanIni)){g.value[e].sudah_bayar=!0;const a=new Date(s.data.pembayaran.tanggal_bayar);g.value[e].tanggal_bayar=a.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}),g.value[e].jumlah_bayar=s.data.pembayaran.jumlah_bayar}l.value={bulan_bayar:_.bulanIni||"",tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,abunemen:!1,tunggakan:0,jumlah_kubik:null,jumlah_bayar:null,keterangan:""},alert("Pembayaran berhasil ditambahkan!")}catch(s){s.response?.status===422?s.response.data.errors?x.value=s.response.data.errors:s.response.data.message&&alert(s.response.data.message):alert("Terjadi kesalahan saat menyimpan pembayaran")}finally{U.value=!1}}},me=async s=>{if(confirm("Apakah Anda yakin ingin menghapus pembayaran ini?"))try{const e=b.value.find(a=>a.id===s);if(await N.delete(`/pembayaran/${s}`),b.value=b.value.filter(a=>a.id!==s),e){const a=g.value.findIndex(i=>i.id===v.value.id);a!==-1&&(g.value[a].bulan_dibayar&&(g.value[a].bulan_dibayar=g.value[a].bulan_dibayar.filter(i=>i!==e.bulan_bayar)),e.bulan_bayar===_.bulanIni&&(g.value[a].sudah_bayar=!1,g.value[a].tanggal_bayar=null,g.value[a].jumlah_bayar=null))}alert("Pembayaran berhasil dihapus")}catch{alert("Terjadi kesalahan saat menghapus pembayaran")}},ge=async s=>{try{const e=await N.post(`/pembayaran/${s}/send-receipt`);e.data.wa_link&&(window.open(e.data.wa_link,"_blank"),alert(`Struk berhasil digenerate!

Pelanggan: ${e.data.pelanggan_nama}
No. WhatsApp: ${e.data.no_whatsapp}

Jendela WhatsApp akan terbuka. Silakan kirim pesan dengan struk pembayaran.`))}catch(e){e.response?.status===422?alert(e.response.data.message||"Nomor WhatsApp pelanggan tidak tersedia"):e.response?.status===404?alert(e.response.data.message||"Data pelanggan tidak ditemukan"):(console.error("Error sending receipt:",e),alert("Terjadi kesalahan saat mengirim struk. Silakan coba lagi."))}},xe=s=>{window.open(`/pembayaran/${s}/download-pdf`,"_blank")},ve=s=>{window.open(`/pembayaran/${s}/print`,"_blank")},ae=()=>{const s=new URLSearchParams({search:S.value,status:$.value,bulan:V.value,wilayah:A.value});window.location.href=`/cek-pelanggan/export-excel?${s.toString()}`},se=()=>{const s=new URLSearchParams({search:S.value,status:$.value,bulan:V.value,wilayah:A.value});window.location.href=`/cek-pelanggan/export-pdf?${s.toString()}`},be=s=>{if(!s)return"-";const[e,a]=s.split("-");return`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(a)-1]} ${e}`},he=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",ce=s=>{confirm(`Apakah Anda yakin ingin menghapus pelanggan ${s.nama_pelanggan}?`)&&ze.delete(`/pelanggan/${s.id}`)},D=p(1),ye=f(()=>{const s=(D.value-1)*y,e=s+y;return L.value.slice(s,e)}),fe=f(()=>Math.ceil(L.value.length/y));E([S,$,V,A],()=>{D.value=1});const le=p(1);f(()=>{const s=(le.value-1)*y,e=s+y;return q.value.slice(s,e)}),f(()=>Math.ceil(q.value.length/y)),E(q,()=>{le.value=1});const I=p(1),ke=f(()=>{const s=(I.value-1)*y,e=s+y;return b.value.slice(s,e)}),we=f(()=>Math.ceil(b.value.length/y));E(b,()=>{I.value=1});const _e=s=>{D.value=s},Me=s=>{I.value=s};return(s,e)=>(n(),W(Pe,null,{default:w(()=>[t("div",Se,[t("div",$e,[t("div",Ve,[t("div",Ae,[e[30]||(e[30]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900"},"Data Pelanggan KP-SPAMS"),t("p",{class:"text-sm sm:text-base text-gray-600"},"Daftar lengkap pelanggan air bersih desa")],-1)),t("div",Le,[T(j(z),{href:"/qr-code/bulk-preview",class:"inline-flex items-center px-3 xl:px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition text-sm"},{default:w(()=>[...e[19]||(e[19]=[t("svg",{class:"w-4 h-4 xl:w-5 xl:h-5 xl:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),t("span",{class:"hidden xl:inline"},"Print QR",-1)])]),_:1}),T(j(z),{href:"/pembayaran",class:"inline-flex items-center px-3 xl:px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition text-sm"},{default:w(()=>[...e[20]||(e[20]=[t("svg",{class:"w-4 h-4 xl:w-5 xl:h-5 xl:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1),t("span",{class:"hidden xl:inline"},"Riwayat",-1)])]),_:1}),t("button",{onClick:ae,class:"inline-flex items-center px-3 xl:px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition text-sm"},[...e[21]||(e[21]=[t("svg",{class:"w-4 h-4 xl:w-5 xl:h-5 xl:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("span",{class:"hidden xl:inline"},"Excel",-1)])]),t("button",{onClick:se,class:"inline-flex items-center px-3 xl:px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition text-sm"},[...e[22]||(e[22]=[t("svg",{class:"w-4 h-4 xl:w-5 xl:h-5 xl:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),t("span",{class:"hidden xl:inline"},"PDF",-1)])]),s.$page.props.auth?.user?(n(),W(j(z),{key:0,href:"/pelanggan/create",class:"inline-flex items-center px-4 xl:px-6 py-2 bg-blue-800 text-white rounded-lg font-semibold hover:bg-blue-900 transition text-sm"},{default:w(()=>[...e[23]||(e[23]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",{class:"hidden xl:inline"},"Tambah",-1),t("span",{class:"xl:hidden"},"+",-1)])]),_:1})):m("",!0)]),t("div",He,[t("button",{onClick:e[0]||(e[0]=a=>M.value=!M.value),class:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 bg-blue-800 text-white rounded-lg font-semibold hover:bg-blue-900 transition"},[...e[24]||(e[24]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1),u(" Menu Aksi ",-1)])]),M.value?(n(),r("div",Te,[t("div",De,[T(j(z),{href:"/qr-code/bulk-preview",class:"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition",onClick:e[1]||(e[1]=a=>M.value=!1)},{default:w(()=>[...e[25]||(e[25]=[t("svg",{class:"w-5 h-5 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1),u(" Print QR Code ",-1)])]),_:1}),T(j(z),{href:"/pembayaran",class:"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition",onClick:e[2]||(e[2]=a=>M.value=!1)},{default:w(()=>[...e[26]||(e[26]=[t("svg",{class:"w-5 h-5 mr-3 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1),u(" Riwayat Pembayaran ",-1)])]),_:1}),t("button",{onClick:e[3]||(e[3]=a=>{ae(),M.value=!1}),class:"w-full flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition"},[...e[27]||(e[27]=[t("svg",{class:"w-5 h-5 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Export Excel ",-1)])]),t("button",{onClick:e[4]||(e[4]=a=>{se(),M.value=!1}),class:"w-full flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition"},[...e[28]||(e[28]=[t("svg",{class:"w-5 h-5 mr-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),u(" Export PDF ",-1)])]),s.$page.props.auth?.user?(n(),W(j(z),{key:0,href:"/pelanggan/create",class:"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition border-t border-gray-100",onClick:e[5]||(e[5]=a=>M.value=!1)},{default:w(()=>[...e[29]||(e[29]=[t("svg",{class:"w-5 h-5 mr-3 text-blue-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),u(" Tambah Pelanggan ",-1)])]),_:1})):m("",!0)])])):m("",!0)])])]),s.$page.props.flash?.success?(n(),r("div",Ie,o(s.$page.props.flash.success),1)):m("",!0),t("div",Re,[t("div",Ne,[t("div",Fe,[c(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>S.value=a),placeholder:"Cari berdasarkan ID, nama, RT, atau RW...",class:"w-full px-4 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[P,S.value]])]),t("div",Ue,[c(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>$.value=a),class:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...e[31]||(e[31]=[t("option",{value:"all"},"Semua Status",-1),t("option",{value:"aktif"},"Aktif",-1),t("option",{value:"nonaktif"},"Nonaktif",-1)])],512),[[J,$.value]]),c(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>V.value=a),class:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[e[32]||(e[32]=t("option",{value:"all"},"Semua Bulan",-1)),(n(!0),r(Q,null,Y(ie.value,a=>(n(),r("option",{key:a.value,value:a.value},o(a.label),9,Ke))),128))],512),[[J,V.value]]),s.$page.props.auth.user.role!=="penarik"?c((n(),r("select",{key:0,"onUpdate:modelValue":e[9]||(e[9]=a=>A.value=a),class:"w-full px-3 py-2.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...e[33]||(e[33]=[t("option",{value:"all"},"Semua Wilayah",-1),t("option",{value:"Dawuhan"},"Dawuhan",-1),u(),t("option",{value:"Kubangsari Kulon"},"Kubangsari Kulon",-1),t("option",{value:"Kubangsari Wetan"},"Kubangsari Wetan",-1),t("option",{value:"Sokarame"},"Sokarame",-1),t("option",{value:"Tiparjaya"},"Tiparjaya",-1)])],512)),[[J,A.value]]):m("",!0)])])]),t("div",Ee,[t("div",We,[t("div",Je,[e[35]||(e[35]=t("div",{class:"p-2.5 rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"w-6 h-6 sm:w-8 sm:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),t("div",Ge,[e[34]||(e[34]=t("p",{class:"text-xs sm:text-sm font-medium text-gray-500"},"Total Pelanggan",-1)),t("p",Oe,o(g.value.length),1)])])]),t("div",qe,[t("div",Qe,[e[37]||(e[37]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),t("div",Ye,[e[36]||(e[36]=t("p",{class:"text-sm font-medium text-gray-500"},"Pelanggan Aktif",-1)),t("p",Xe,o(oe.value),1)])])]),t("div",Ze,[t("div",et,[e[39]||(e[39]=t("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})])],-1)),t("div",tt,[e[38]||(e[38]=t("p",{class:"text-sm font-medium text-gray-500"},"Hasil Pencarian",-1)),t("p",at,o(L.value.length),1)])])])]),t("div",st,[t("div",lt,[t("table",nt,[t("thead",rt,[t("tr",null,[e[40]||(e[40]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID Pelanggan",-1)),e[41]||(e[41]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama",-1)),e[42]||(e[42]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"No. WhatsApp",-1)),e[43]||(e[43]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"RT / RW",-1)),e[44]||(e[44]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah",-1)),e[45]||(e[45]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Kategori",-1)),e[46]||(e[46]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status",-1)),e[47]||(e[47]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status Bayar",-1)),e[48]||(e[48]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Lokasi",-1)),e[49]||(e[49]=t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Google Maps",-1)),s.$page.props.auth?.user?(n(),r("th",ot,"Aksi")):m("",!0)])]),t("tbody",it,[L.value.length===0?(n(),r("tr",ut,[t("td",{colspan:s.$page.props.auth?.user?11:10,class:"px-6 py-12 text-center text-gray-500"},[...e[50]||(e[50]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),t("p",{class:"mt-2"},"Tidak ada data pelanggan yang ditemukan",-1)])],8,dt)])):m("",!0),(n(!0),r(Q,null,Y(ye.value,a=>(n(),r("tr",{key:a.id_pelanggan,class:"hover:bg-gray-50 transition-colors"},[t("td",pt,[t("div",mt,o(a.id_pelanggan),1)]),t("td",gt,[t("div",xt,o(a.nama_pelanggan),1)]),t("td",vt,[a.no_whatsapp?(n(),r("a",{key:0,href:`https://wa.me/${a.no_whatsapp.replace(/^0/,"62")}`,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm"},[e[51]||(e[51]=t("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})],-1)),u(" "+o(a.no_whatsapp),1)],8,bt)):(n(),r("span",ht,"-"))]),t("td",ct,[t("div",yt,o(a.rt?`RT ${a.rt}`:"-")+" "+o(a.rt&&a.rw?"/":"")+" "+o(a.rw?`RW ${a.rw}`:""),1)]),t("td",ft,[t("span",kt,[e[52]||(e[52]=t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),u(" "+o(a.wilayah||"Belum diset"),1)])]),t("td",wt,[a.kategori==="sosial"?(n(),r("span",_t,[...e[53]||(e[53]=[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"})],-1),u(" Sosial (Gratis) ",-1)])])):(n(),r("span",Mt,[...e[54]||(e[54]=[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})],-1),u(" Umum ",-1)])]))]),t("td",Ct,[a.status_aktif?(n(),r("span",Bt,[...e[55]||(e[55]=[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),u(" Aktif ",-1)])])):(n(),r("span",jt,[...e[56]||(e[56]=[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1),u(" Nonaktif ",-1)])]))]),t("td",zt,[a.kategori==="sosial"?(n(),r("div",Pt,[e[57]||(e[57]=t("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mb-1"},[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),u(" Gratis ")],-1)),t("span",St,o(F(a).bulan),1)])):F(a).sudah_bayar?(n(),r("div",$t,[e[58]||(e[58]=t("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mb-1"},[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),u(" Sudah Bayar ")],-1)),t("span",Vt,o(F(a).bulan),1)])):(n(),r("span",At,[...e[59]||(e[59]=[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),u(" Belum Bayar ",-1)])]))]),t("td",Lt,[a.has_coordinates?(n(),W(j(z),{key:0,href:`/peta?pelanggan=${a.id_pelanggan}`,class:"inline-flex items-center text-blue-800 hover:text-blue-900 font-medium"},{default:w(()=>[...e[60]||(e[60]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1),u(" Lihat Peta ",-1)])]),_:1},8,["href"])):(n(),r("span",Ht,"Tidak ada koordinat"))]),t("td",Tt,[a.google_maps_url?(n(),r("a",{key:0,href:a.google_maps_url,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center text-blue-600 hover:text-blue-900 font-medium"},[...e[61]||(e[61]=[t("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),t("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})],-1),u(" Buka Maps ",-1)])],8,Dt)):a.has_coordinates?(n(),r("a",{key:1,href:a.google_maps_link,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center text-blue-600 hover:text-blue-900 font-medium"},[...e[62]||(e[62]=[t("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),t("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})],-1),u(" Buka Maps ",-1)])],8,It)):(n(),r("span",Rt,"-"))]),s.$page.props.auth?.user?(n(),r("td",Nt,[t("div",Ft,[t("a",{href:`/pelanggan/${a.id}/download-qr`,target:"_blank",class:"text-green-600 hover:text-green-800 transition",title:"Download QR Code"},[...e[63]||(e[63]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})],-1)])],8,Ut),t("button",{onClick:i=>ue(a),class:"text-purple-600 hover:text-purple-800 transition",title:"Riwayat Pembayaran"},[...e[64]||(e[64]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)])],8,Kt),T(j(z),{href:`/pelanggan/${a.id}/edit`,class:"text-blue-600 hover:text-blue-800 transition",title:"Edit"},{default:w(()=>[...e[65]||(e[65]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["href"]),t("button",{onClick:i=>ce(a),class:"text-red-600 hover:text-red-800 transition",title:"Hapus"},[...e[66]||(e[66]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Et)])])):m("",!0)]))),128))])])]),t("div",Wt,[t("div",Jt,[e[67]||(e[67]=u(" Menampilkan ",-1)),t("span",Gt,o(L.value.length>0?(D.value-1)*y+1:0),1),e[68]||(e[68]=u(" sampai ",-1)),t("span",Ot,o(Math.min(D.value*y,L.value.length)),1),e[69]||(e[69]=u(" dari ",-1)),t("span",qt,o(L.value.length),1),e[70]||(e[70]=u(" data ",-1))]),T(ne,{"current-page":D.value,"total-pages":fe.value,onPageChange:_e},null,8,["current-page","total-pages"])])]),G.value?(n(),r("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:Be(te,["self"])},[t("div",Qt,[e[106]||(e[106]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),t("div",Yt,[t("div",Xt,[t("h3",Zt,"Riwayat Pembayaran - "+o(v.value?.nama_pelanggan),1),t("button",{onClick:te,class:"text-white hover:text-gray-200 p-1"},[...e[71]||(e[71]=[t("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ea,[t("div",ta,[e[92]||(e[92]=t("h4",{class:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"Tambah Pembayaran Baru",-1)),v.value?.kategori!=="sosial"&&!F(v.value).sudah_bayar?(n(),r("div",aa,[t("div",sa,[e[75]||(e[75]=t("svg",{class:"w-5 h-5 text-yellow-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),t("div",null,[e[74]||(e[74]=t("p",{class:"text-sm font-bold text-yellow-800 mb-1"},"Pelanggan Belum Bayar Bulan Ini",-1)),t("p",la,[e[72]||(e[72]=u(" Bulan: ",-1)),t("strong",null,o(F(v.value).bulan),1),e[73]||(e[73]=u(". Silakan input pembayaran untuk bulan ini atau bulan lainnya. ",-1))])])])])):m("",!0),v.value?.kategori==="sosial"?(n(),r("div",na,[...e[76]||(e[76]=[t("div",{class:"flex items-center"},[t("svg",{class:"w-5 h-5 text-purple-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),t("span",{class:"text-sm font-medium text-purple-800"},"Pelanggan Kategori Sosial - Tidak Dikenakan Biaya (Gratis)")],-1)])])):m("",!0),t("div",ra,[t("div",oa,[e[77]||(e[77]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Bulan Bayar",-1)),t("div",ia,[c(t("input",{type:"month","onUpdate:modelValue":e[10]||(e[10]=a=>l.value.bulan_bayar=a),class:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 bg-white"},null,512),[[P,l.value.bulan_bayar]])]),x.value.bulan_bayar?(n(),r("p",ua,o(x.value.bulan_bayar),1)):m("",!0)]),t("div",da,[e[78]||(e[78]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tanggal Bayar",-1)),t("div",pa,[c(t("input",{type:"date","onUpdate:modelValue":e[11]||(e[11]=a=>l.value.tanggal_bayar=a),class:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 bg-white"},null,512),[[P,l.value.tanggal_bayar]])]),x.value.tanggal_bayar?(n(),r("p",ma,o(x.value.tanggal_bayar),1)):m("",!0)]),!l.value.meteran_sebelum&&!l.value.meteran_sesudah?(n(),r("div",ga,[...e[79]||(e[79]=[t("div",{class:"flex items-start gap-3"},[t("svg",{class:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),t("div",{class:"text-sm"},[t("p",{class:"font-semibold text-yellow-800 mb-1"},"Data Meteran Belum Tersedia"),t("p",{class:"text-yellow-700"},[u("Meteran untuk bulan ini belum diinput. Silakan input data meteran air terlebih dahulu menggunakan "),t("strong",null,"QR Scanner"),u(" atau isi manual di form ini.")])])],-1)])])):m("",!0),t("div",xa,[e[80]||(e[80]=t("label",{class:"block text-sm font-medium text-gray-700"},"Meteran Sebelum",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[12]||(e[12]=a=>l.value.meteran_sebelum=a),step:"0.01",placeholder:"0.00",class:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 bg-white",onInput:C},null,544),[[P,l.value.meteran_sebelum]]),x.value.meteran_sebelum?(n(),r("p",va,o(x.value.meteran_sebelum),1)):m("",!0),e[81]||(e[81]=t("p",{class:"text-xs text-gray-500"},"Angka meteran bulan lalu",-1))]),t("div",ba,[e[82]||(e[82]=t("label",{class:"block text-sm font-medium text-gray-700"},"Meteran Sesudah",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=a=>l.value.meteran_sesudah=a),step:"0.01",placeholder:"0.00",class:"block w-full rounded-md border-gray-300 focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 bg-white",onInput:C},null,544),[[P,l.value.meteran_sesudah]]),x.value.meteran_sesudah?(n(),r("p",ha,o(x.value.meteran_sesudah),1)):m("",!0),e[83]||(e[83]=t("p",{class:"text-xs text-gray-500"},"Angka meteran bulan ini",-1))]),t("div",null,[e[84]||(e[84]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pemakaian (m³)",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[14]||(e[14]=a=>l.value.jumlah_kubik=a),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent bg-gray-50",readonly:""},null,512),[[P,l.value.jumlah_kubik]]),x.value.jumlah_kubik?(n(),r("p",ca,o(x.value.jumlah_kubik),1)):m("",!0),v.value?.kategori==="sosial"?(n(),r("p",ya,"Tarif: Gratis (Kategori Sosial)")):(n(),r("p",fa,"Tarif: Rp 2.000 / m³"))]),t("div",null,[t("label",ka,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=a=>l.value.abunemen=a),onChange:C,class:"w-5 h-5 text-blue-800 border-gray-300 rounded focus:ring-2 focus:ring-blue-800"},null,544),[[je,l.value.abunemen]]),e[85]||(e[85]=t("div",null,[t("span",{class:"text-sm font-medium text-gray-700"},"Abunemen"),t("p",{class:"text-xs text-gray-500"},"Biaya tambahan: Rp 3.000")],-1))])]),t("div",null,[e[86]||(e[86]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tunggakan (Rp)",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=a=>l.value.tunggakan=a),step:"1000",placeholder:"0",onInput:C,class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,544),[[P,l.value.tunggakan]]),x.value.tunggakan?(n(),r("p",wa,o(x.value.tunggakan),1)):m("",!0),e[87]||(e[87]=t("p",{class:"text-xs text-gray-500 mt-1"},"Nominal tagihan bulan sebelumnya yang belum dibayar (maksimal 3 bulan)",-1))]),t("div",null,[e[88]||(e[88]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Tagihan (Rp)",-1)),c(t("input",{type:"number","onUpdate:modelValue":e[17]||(e[17]=a=>l.value.jumlah_bayar=a),step:"1000",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent bg-gray-50",readonly:""},null,512),[[P,l.value.jumlah_bayar]]),x.value.jumlah_bayar?(n(),r("p",_a,o(x.value.jumlah_bayar),1)):m("",!0)]),t("div",null,[e[90]||(e[90]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Keterangan",-1)),c(t("select",{"onUpdate:modelValue":e[18]||(e[18]=a=>l.value.keterangan=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...e[89]||(e[89]=[t("option",{value:""},"Pilih Keterangan",-1),t("option",{value:"LUNAS"},"Lunas - Bayar penuh tagihan bulan ini",-1),t("option",{value:"TUNGGAKAN"},"Tunggakan - Belum bayar, masuk bulan depan",-1),t("option",{value:"CICILAN"},"Cicilan - Bayar sebagian",-1)])],512),[[J,l.value.keterangan]]),e[91]||(e[91]=t("p",{class:"text-xs text-gray-500 mt-1"}," Pilih sesuai kondisi pembayaran pelanggan ",-1))])]),t("button",{onClick:pe,disabled:U.value,class:"mt-3 sm:mt-4 w-full sm:w-auto px-4 py-2 text-sm sm:text-base bg-blue-800 text-white rounded-lg hover:bg-blue-900 active:bg-blue-950 disabled:bg-gray-400 transition touch-manipulation"},o(U.value?"Menyimpan...":"Simpan Pembayaran"),9,Ma)]),t("div",null,[e[105]||(e[105]=t("h4",{class:"text-base sm:text-lg font-semibold mb-3 sm:mb-4"},"Daftar Pembayaran",-1)),O.value?(n(),r("div",Ca,[...e[93]||(e[93]=[t("p",{class:"text-gray-500 text-sm"},"Memuat data...",-1)])])):b.value.length===0?(n(),r("div",Ba,[...e[94]||(e[94]=[t("svg",{class:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),t("p",{class:"mt-2 text-gray-500 text-sm"},"Belum ada riwayat pembayaran",-1)])])):(n(),r("div",ja,[t("table",za,[e[100]||(e[100]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Bulan"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Tgl Bayar"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase hidden sm:table-cell"},"Meteran Sebelum"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase hidden sm:table-cell"},"Meteran Sesudah"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Pakai"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-center text-xs font-medium text-gray-700 uppercase hidden lg:table-cell"},"Abunemen"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase"},"Jumlah"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-left text-xs font-medium text-gray-700 uppercase hidden md:table-cell"},"Ket"),t("th",{class:"px-2 sm:px-4 py-2 sm:py-3 text-center text-xs font-medium text-gray-700 uppercase"},"Aksi")])],-1)),t("tbody",Pa,[(n(!0),r(Q,null,Y(ke.value,a=>(n(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[t("td",Sa,o(be(a.bulan_bayar)),1),t("td",$a,o(he(a.tanggal_bayar)),1),t("td",Va,o(a.meteran_sebelum||"-"),1),t("td",Aa,o(a.meteran_sesudah||"-"),1),t("td",La,o(a.jumlah_kubik?a.jumlah_kubik+" m³":"-"),1),t("td",Ha,[a.abunemen?(n(),r("span",Ta,[...e[95]||(e[95]=[t("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),u(" Ya ",-1)])])):(n(),r("span",Da,"-"))]),t("td",Ia,"Rp "+o(Number(a.jumlah_bayar).toLocaleString("id-ID")),1),t("td",Ra,o(a.keterangan||"-"),1),t("td",Na,[t("div",Fa,[t("button",{onClick:i=>ge(a.id),class:"p-1.5 sm:p-2 text-blue-600 hover:text-blue-800 active:text-blue-900 hover:bg-blue-50 active:bg-blue-100 rounded transition touch-manipulation",title:"Kirim Struk via WhatsApp"},[...e[96]||(e[96]=[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,Ua),t("button",{onClick:i=>xe(a.id),class:"p-1.5 sm:p-2 text-green-600 hover:text-green-800 active:text-green-900 hover:bg-green-50 active:bg-green-100 rounded transition touch-manipulation",title:"Download PDF"},[...e[97]||(e[97]=[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,Ka),t("button",{onClick:i=>ve(a.id),class:"p-1.5 sm:p-2 text-purple-600 hover:text-purple-800 active:text-purple-900 hover:bg-purple-50 active:bg-purple-100 rounded transition touch-manipulation",title:"Cetak Struk"},[...e[98]||(e[98]=[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1)])],8,Ea),t("button",{onClick:i=>me(a.id),class:"p-1.5 sm:p-2 text-red-600 hover:text-red-800 active:text-red-900 hover:bg-red-50 active:bg-red-100 rounded transition touch-manipulation",title:"Hapus"},[...e[99]||(e[99]=[t("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Wa)])])]))),128))])])])),t("div",Ja,[t("div",Ga,[e[101]||(e[101]=u(" Menampilkan ",-1)),t("span",Oa,o(b.value.length>0?(I.value-1)*y+1:0),1),e[102]||(e[102]=u(" sampai ",-1)),t("span",qa,o(Math.min(I.value*y,b.value.length)),1),e[103]||(e[103]=u(" dari ",-1)),t("span",Qa,o(b.value.length),1),e[104]||(e[104]=u(" data ",-1))]),T(ne,{"current-page":I.value,"total-pages":we.value,onPageChange:Me},null,8,["current-page","total-pages"])])])])])])])):m("",!0)])])]),_:1}))}};export{as as default};
