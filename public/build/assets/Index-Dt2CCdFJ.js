import{m as b,u as B,p as A,c as z,w as h,a as e,i as P,z as E,e as a,f as d,o as l,n as w,t as i,j as u,F as K,r as V,b as U,d as c,g as r,y as $,v as k,h as q}from"./app-Ct5v73hT.js";import{_ as G}from"./AppLayout-BMqaT3vN.js";/* empty css            */const D={class:"max-w-7xl mx-auto py-8 px-4"},F={key:0,class:"fixed top-4 right-4 z-50 max-w-sm"},I={key:0,class:"w-6 h-6 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={key:1,class:"w-6 h-6 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Y={class:"flex-1"},J={class:"font-semibold"},Q={class:"text-sm"},R={class:"bg-white rounded-lg shadow-md p-6 mb-6"},W={key:0,class:"space-y-3"},X={class:"flex flex-col sm:flex-row sm:justify-between gap-3"},Z={class:"flex-1 min-w-0"},ee={class:"font-semibold text-gray-900 text-sm sm:text-base"},te={class:"text-xs sm:text-sm text-gray-600 mt-1 break-all"},se={key:0,class:"text-xs sm:text-sm text-gray-500 mt-1"},oe={class:"flex sm:flex-col gap-2 justify-end sm:justify-start"},re=["onClick"],le=["onClick"],ae={key:1,class:"text-gray-500 text-center py-8"},ie={class:"bg-white rounded-lg shadow-md p-6"},ne={key:0,class:"space-y-3"},de={class:"flex flex-col sm:flex-row sm:justify-between gap-3"},ue={class:"flex-1 min-w-0"},pe={class:"font-semibold text-gray-900 text-sm sm:text-base"},me={class:"text-xs sm:text-sm text-gray-600 mt-1 break-all"},ce={key:0,class:"text-xs sm:text-sm text-gray-500 mt-1"},xe={class:"flex sm:flex-col gap-2 justify-end sm:justify-start"},be=["onClick"],ge=["onClick"],ve={key:1,class:"text-gray-500 text-center py-8"},fe={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},ke={class:"flex items-center justify-center min-h-screen p-4"},ye={class:"relative bg-white rounded-lg shadow-xl w-full max-w-lg transform transition-all"},he={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},we={class:"text-lg font-semibold text-gray-900 mb-4"},_e={class:"space-y-4"},Me={key:0,class:"mt-1 text-sm text-red-600"},Ce={key:0,class:"mt-1 text-sm text-red-600"},Se={class:"grid grid-cols-2 gap-4"},Le={key:0,class:"mt-1 text-sm text-red-600"},je={key:0,class:"mt-1 text-sm text-red-600"},Be={key:0,class:"mt-1 text-sm text-red-600"},Ae={class:"flex items-center"},Pe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2"},Ee=["disabled"],He={__name:"Index",props:{mapSettings:Array},setup(T){const _=T,g=b(!1),M=b(""),x=b("success"),v=b(!1),p=b(null),s=B({location_type:"kp_spams",name:"",latitude:"",longitude:"",description:"",is_active:!0}),C=A(()=>_.mapSettings.filter(n=>n.location_type==="kp_spams")),S=A(()=>_.mapSettings.filter(n=>n.location_type==="sumber_air")),m=(n,t="success")=>{M.value=n,x.value=t,g.value=!0,setTimeout(()=>{g.value=!1},3e3)},H=()=>{p.value=null,s.reset(),s.clearErrors(),v.value=!0},L=n=>{p.value=n.id,s.location_type=n.location_type,s.name=n.name,s.latitude=n.latitude,s.longitude=n.longitude,s.description=n.description||"",s.is_active=n.is_active,s.clearErrors(),v.value=!0},f=()=>{v.value=!1,p.value=null,s.reset(),s.clearErrors()},N=()=>{p.value?s.put(route("map-settings.update",p.value),{preserveScroll:!0,onSuccess:()=>{f(),m("Lokasi peta berhasil diperbarui!")},onError:()=>{m("Gagal memperbarui lokasi. Silakan coba lagi.","error")}}):s.post(route("map-settings.store"),{preserveScroll:!0,onSuccess:()=>{f(),m("Lokasi peta berhasil ditambahkan!")},onError:()=>{m("Gagal menambahkan lokasi. Silakan coba lagi.","error")}})},j=n=>{confirm("Yakin ingin menghapus lokasi ini?")&&B({}).delete(route("map-settings.destroy",n),{preserveScroll:!0,onSuccess:()=>{m("Lokasi berhasil dihapus!")},onError:()=>{m("Gagal menghapus lokasi.","error")}})};return(n,t)=>(l(),z(G,{title:"Pengaturan Peta"},{default:h(()=>[e("div",D,[P(E,{"enter-active-class":"transform transition ease-out duration-300","enter-from-class":"translate-y-2 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:h(()=>[g.value?(l(),a("div",F,[e("div",{class:w([{"bg-blue-50 border-blue-500 text-blue-800":x.value==="success","bg-red-50 border-red-500 text-red-800":x.value==="error"},"border-l-4 p-4 rounded-lg shadow-lg flex items-start gap-3"])},[x.value==="success"?(l(),a("svg",I,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(l(),a("svg",O,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])),e("div",Y,[e("p",J,i(x.value==="success"?"Berhasil!":"Error!"),1),e("p",Q,i(M.value),1)]),e("button",{onClick:t[0]||(t[0]=o=>g.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])],2)])):d("",!0)]),_:1}),e("div",{class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6"},[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-800"},"Pengaturan Lokasi Peta"),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1"},"Kelola lokasi KP-SPAMS dan Sumber Air yang ditampilkan di peta")],-1)),e("button",{onClick:H,class:"w-full sm:w-auto px-4 py-2 bg-blue-800 text-white rounded-lg hover:bg-blue-900 font-medium flex items-center justify-center gap-2"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"sm:inline"},"Tambah Lokasi",-1)])])]),e("div",R,[t[14]||(t[14]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-blue-800 rounded-full flex items-center justify-center text-white text-xs font-bold"},"K"),u(" Lokasi Kantor KP-SPAMS ")],-1)),C.value.length>0?(l(),a("div",W,[(l(!0),a(K,null,V(C.value,o=>(l(),a("div",{key:o.id,class:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow"},[e("div",X,[e("div",Z,[e("h3",ee,i(o.name),1),e("p",te," Koordinat: "+i(o.latitude)+", "+i(o.longitude),1),o.description?(l(),a("p",se,i(o.description),1)):d("",!0),e("span",{class:w([o.is_active?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600","inline-block px-2 py-1 text-xs rounded mt-2"])},i(o.is_active?"Aktif":"Nonaktif"),3)]),e("div",oe,[e("button",{onClick:y=>L(o),class:"text-blue-600 hover:text-blue-800 p-1.5 sm:p-2 hover:bg-blue-50 rounded",title:"Edit"},[...t[12]||(t[12]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,re),e("button",{onClick:y=>j(o.id),class:"text-red-600 hover:text-red-800 p-1.5 sm:p-2 hover:bg-red-50 rounded",title:"Hapus"},[...t[13]||(t[13]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,le)])])]))),128))])):(l(),a("p",ae,"Belum ada lokasi kantor KP-SPAMS"))]),e("div",ie,[t[17]||(t[17]=e("h2",{class:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("div",{class:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold"},"S"),u(" Lokasi Sumber Air ")],-1)),S.value.length>0?(l(),a("div",ne,[(l(!0),a(K,null,V(S.value,o=>(l(),a("div",{key:o.id,class:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow"},[e("div",de,[e("div",ue,[e("h3",pe,i(o.name),1),e("p",me," Koordinat: "+i(o.latitude)+", "+i(o.longitude),1),o.description?(l(),a("p",ce,i(o.description),1)):d("",!0),e("span",{class:w([o.is_active?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600","inline-block px-2 py-1 text-xs rounded mt-2"])},i(o.is_active?"Aktif":"Nonaktif"),3)]),e("div",xe,[e("button",{onClick:y=>L(o),class:"text-blue-600 hover:text-blue-800 p-1.5 sm:p-2 hover:bg-blue-50 rounded",title:"Edit"},[...t[15]||(t[15]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,be),e("button",{onClick:y=>j(o.id),class:"text-red-600 hover:text-red-800 p-1.5 sm:p-2 hover:bg-red-50 rounded",title:"Hapus"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ge)])])]))),128))])):(l(),a("p",ve,"Belum ada lokasi sumber air"))]),P(E,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:h(()=>[v.value?(l(),a("div",fe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:f}),e("div",ke,[e("div",ye,[e("form",{onSubmit:U(N,["prevent"])},[e("div",he,[e("h3",we,i(p.value?"Edit Lokasi":"Tambah Lokasi Baru"),1),e("div",_e,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Tipe Lokasi "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r(s).location_type=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:""},[...t[18]||(t[18]=[e("option",{value:"kp_spams"},"Kantor KP-SPAMS",-1),e("option",{value:"sumber_air"},"Sumber Air",-1)])],512),[[$,r(s).location_type]]),r(s).errors.location_type?(l(),a("p",Me,i(r(s).errors.location_type),1)):d("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Nama Lokasi "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>r(s).name=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: Kantor Pusat KP-SPAMS",required:""},null,512),[[k,r(s).name]]),r(s).errors.name?(l(),a("p",Ce,i(r(s).errors.name),1)):d("",!0)]),e("div",Se,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Latitude "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>r(s).latitude=o),type:"number",step:"any",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-6.200000",required:""},null,512),[[k,r(s).latitude]]),r(s).errors.latitude?(l(),a("p",Le,i(r(s).errors.latitude),1)):d("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[u(" Longitude "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(s).longitude=o),type:"number",step:"any",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"106.816666",required:""},null,512),[[k,r(s).longitude]]),r(s).errors.longitude?(l(),a("p",je,i(r(s).errors.longitude),1)):d("",!0)])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Deskripsi (Opsional) ",-1)),c(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=o=>r(s).description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tambahkan deskripsi lokasi..."},null,512),[[k,r(s).description]]),r(s).errors.description?(l(),a("p",Be,i(r(s).errors.description),1)):d("",!0)]),e("div",null,[e("label",Ae,[c(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=o=>r(s).is_active=o),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[q,r(s).is_active]]),t[24]||(t[24]=e("span",{class:"ml-2 text-sm text-gray-700"},"Tampilkan di peta",-1))])]),t[25]||(t[25]=e("div",{class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},[e("p",{class:"text-sm text-blue-800"},[e("strong",null,"Tips:"),u(" Untuk mendapatkan koordinat, buka Google Maps, klik kanan pada lokasi, lalu pilih koordinat untuk menyalinnya. ")])],-1))])]),e("div",Pe,[e("button",{type:"submit",disabled:r(s).processing,class:"w-full sm:w-auto px-4 py-2 bg-blue-800 text-white rounded-lg hover:bg-blue-900 disabled:opacity-50 disabled:cursor-not-allowed font-medium"},i(r(s).processing?"Menyimpan...":"Simpan"),9,Ee),e("button",{type:"button",onClick:f,class:"mt-3 sm:mt-0 w-full sm:w-auto px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium"}," Batal ")])],32)])])])):d("",!0)]),_:1})])]),_:1}))}};export{He as default};
