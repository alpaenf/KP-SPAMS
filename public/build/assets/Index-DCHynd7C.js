import{m as p,p as C,c as ne,w as Ce,a as e,g as d,h as i,i as g,v as b,n as E,t as n,o,F as O,r as W,e as m,M as le,f as P,j as S,y as Be,k as Me,C as j}from"./app-DpYE5J6l.js";import{_ as je}from"./AppLayout-8Vv_k1jv.js";import{_ as Te}from"./InfoCicilan-Do03dnLD.js";/* empty css            */const Le={class:"py-12"},Ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ie={class:"mb-6 lg:mb-8"},Pe={class:"flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4 mb-4"},Se={class:"flex flex-col sm:flex-row gap-3"},ze={class:"relative"},Ve={class:"mb-6 border-b border-gray-200"},Ue={class:"-mb-px flex space-x-8"},Re={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6"},De={class:"bg-white rounded-lg shadow-md p-6"},Ne={class:"flex items-center"},$e={class:"ml-4"},Ke={class:"text-2xl font-bold text-gray-900"},Fe={class:"bg-white rounded-lg shadow-md p-6"},Ge={class:"flex items-center"},He={class:"ml-4"},Ye={class:"text-2xl font-bold text-gray-900"},Je={class:"bg-white rounded-lg shadow-md p-6"},qe={class:"flex items-center"},Ee={class:"ml-4"},Oe={class:"text-2xl font-bold text-gray-900"},We={class:"bg-white rounded-lg shadow-md p-6"},Qe={class:"flex items-center"},Xe={class:"ml-4"},Ze={class:"text-2xl font-bold text-gray-900"},et={class:"bg-white rounded-lg shadow-md overflow-hidden"},tt={class:"overflow-x-auto"},at={class:"min-w-full divide-y divide-gray-200"},st={class:"bg-white divide-y divide-gray-200"},nt={class:"px-6 py-4 whitespace-nowrap"},lt={class:"text-sm font-medium text-gray-900"},ot={class:"px-6 py-4 whitespace-nowrap"},it={class:"flex items-center gap-2"},rt={class:"text-sm font-medium text-gray-900"},ut={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-bold bg-red-100 text-red-800",title:"Memiliki Tunggakan"},dt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-600"},mt={class:"px-6 py-4 whitespace-nowrap"},pt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},xt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},bt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap"},vt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-sm font-medium text-gray-900"},kt={class:"px-6 py-4 whitespace-nowrap"},_t={key:0,class:"text-sm font-bold text-red-600"},wt={key:1,class:"text-sm text-gray-400"},Ct={class:"px-6 py-4 whitespace-nowrap"},Bt={key:0,class:"space-y-1"},Mt={class:"text-sm font-bold text-blue-600"},jt={key:0,class:"text-xs text-green-600"},Tt={key:1,class:"text-sm text-gray-400"},Lt={class:"px-6 py-4 whitespace-nowrap"},At={class:"flex flex-col gap-1"},It={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},Pt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},St={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},zt={key:3,class:"inline-flex flex-col items-start gap-1"},Vt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},Ut={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Rt={key:4,class:"text-xs text-gray-400"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm"},Nt=["onClick"],$t={class:"px-6 py-4 whitespace-nowrap text-sm"},Kt={key:0,class:"flex gap-2"},Ft=["onClick"],Gt=["onClick"],Ht={key:2,class:"text-xs text-green-600 font-medium"},Yt={key:3,class:"text-xs text-gray-400"},Jt={class:"flex items-center justify-center min-h-screen px-4"},qt={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},Et={class:"space-y-4"},Ot={class:"flex items-center"},Wt={key:0},Qt={class:"border-t pt-4"},Xt={class:"flex items-start"},Zt={class:"mt-6 flex gap-3"},ea=["disabled"],ta={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},aa={class:"bg-white rounded-lg shadow-md p-6"},sa={class:"flex items-center"},na={class:"ml-4"},la={class:"text-2xl font-bold text-gray-900"},oa={class:"bg-white rounded-lg shadow-md p-6"},ia={class:"flex items-center"},ra={class:"ml-4"},ua={class:"text-2xl font-bold text-gray-900"},da={class:"bg-white rounded-lg shadow-md p-6"},ga={class:"flex items-center"},ma={class:"ml-4"},pa={class:"text-2xl font-bold text-gray-900"},xa={class:"bg-white rounded-lg shadow-md overflow-hidden"},ba={class:"overflow-x-auto"},ca={class:"min-w-full divide-y divide-gray-200"},ya={class:"bg-white divide-y divide-gray-200"},va={class:"px-6 py-4 whitespace-nowrap"},fa={class:"text-sm text-gray-900"},ha={class:"px-6 py-4 whitespace-nowrap"},ka={class:"text-sm font-medium text-gray-900"},_a={class:"px-6 py-4 whitespace-nowrap"},wa={class:"text-sm font-medium text-gray-900"},Ca={class:"px-6 py-4 whitespace-nowrap"},Ba={class:"text-sm text-gray-600"},Ma={class:"px-6 py-4 whitespace-nowrap"},ja={class:"text-sm text-gray-900"},Ta={class:"px-6 py-4 whitespace-nowrap"},La={class:"text-sm text-gray-600"},Aa={class:"px-6 py-4 whitespace-nowrap"},Ia={class:"text-sm text-gray-600"},Pa={class:"px-6 py-4 whitespace-nowrap"},Sa={class:"text-sm text-gray-600"},za={class:"px-6 py-4 text-center"},Va={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ua={key:1,class:"text-gray-400 text-sm"},Ra={class:"px-6 py-4 whitespace-nowrap"},Da={class:"text-sm font-semibold text-gray-900"},Na={class:"px-6 py-4 whitespace-nowrap"},$a={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},Ka={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},Fa={key:2,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},Ga={class:"px-6 py-4 whitespace-nowrap"},Ha={class:"text-sm text-gray-900"},Ya={class:"px-6 py-4"},Ja={class:"text-sm text-gray-600 max-w-xs truncate"},qa={class:"px-6 py-4 whitespace-nowrap text-center"},Ea=["onClick"],Oa={key:0},Wa={colspan:"14",class:"px-6 py-12 text-center text-gray-500"},Qa={key:0},Xa={key:1},Za={class:"flex items-center justify-center min-h-screen px-4"},es={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full p-6"},ts={class:"text-xl font-bold text-gray-900 mb-4"},as={key:0,class:"mb-4 bg-purple-50 border border-purple-200 rounded-lg p-3"},ss={class:"space-y-4"},ns=["value"],ls={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},os={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},is=["value"],rs={key:0},us={key:0},ds={class:"flex items-center"},gs={key:1},ms=["value"],ps={class:"mt-6 flex gap-3"},xs=["disabled"],bs={class:"flex items-center justify-center min-h-screen px-4"},cs={class:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6"},ys={key:0,class:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3"},vs={class:"text-sm"},fs={class:"mt-2 text-lg font-bold text-blue-600"},hs={class:"space-y-4"},ks={key:0,class:"text-xs text-purple-600 mt-1 font-medium"},_s={key:1,class:"text-xs text-gray-500 mt-1"},ws={class:"flex items-center space-x-3 cursor-pointer"},Cs={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Bs={class:"flex items-start"},Ms={class:"flex-1"},js={class:"text-sm font-medium text-yellow-800"},Ts={class:"text-xs text-yellow-700 mt-1"},Ls={class:"text-xs text-yellow-600 mt-2"},As={key:0,class:"mt-3"},Is=["max"],Ps={class:"text-xs text-yellow-600 mt-1"},Ss={class:"block text-sm font-medium text-gray-700 mb-2"},zs={key:0,class:"text-blue-600 text-xs"},Vs=["readonly"],Us={key:0,class:"text-xs text-blue-600 mt-1"},Rs={class:"mt-6 flex gap-3"},Ds=["disabled"],Ns={class:"flex items-center justify-center min-h-screen px-4"},$s={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full p-6"},Ks={key:0,class:"space-y-4"},Fs={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Gs={class:"text-sm"},Hs={class:"text-sm"},Ys={class:"text-sm"},Js={class:"text-sm"},qs={key:0},Es=["src"],Os={key:1},Ws={class:"mt-6 flex gap-3"},Qs=["disabled"],Xs=["disabled"],Zs={class:"flex items-center justify-center min-h-screen px-4"},en={class:"relative bg-white rounded-lg shadow-xl max-w-lg w-full p-6"},tn={key:0,class:"space-y-4"},an={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},sn={class:"space-y-1 text-sm"},nn={class:"space-y-2"},ln={class:"text-base text-gray-900"},on={class:"text-base text-gray-900"},rn={class:"grid grid-cols-3 gap-4 bg-gray-50 p-3 rounded-lg"},un={class:"text-sm font-medium text-gray-900"},dn={class:"text-sm font-medium text-gray-900"},gn={class:"text-sm font-medium text-gray-900"},mn={key:0},pn={class:"text-2xl font-bold text-green-600"},xn={class:"text-base text-gray-900"},bn={class:"text-base text-gray-900"},cn={key:1},yn={class:"text-base text-gray-900"},_n={__name:"Index",props:{pelangganList:Array,pembayaranList:Array,bulan:String},setup(Q){const h=Q,k=p(h.bulan),_=p(""),A=p(!1),$=p(!1),K=p(!1),F=p(!1),G=p(!1),r=p(null),f=p(null),x=p(null),B=p(""),z=p(!1),V=p(!1),U=p(!1),w=p(!1),c=p({bulan:h.bulan,tarif_per_kubik:2e3,ada_abunemen:!0,biaya_abunemen:3e3,masukkan_tunggakan:!1}),u=p({meteran_sebelum:null,meteran_sesudah:null,tarif_per_kubik:2e3,ada_abunemen:!0,biaya_abunemen:3e3}),l=p({tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,jumlah_kubik:0,abunemen:!1,jumlah_bayar:0,keterangan:"LUNAS",catatan:"",bayar_tunggakan:!1,jumlah_bayar_tunggakan:0}),X=C(()=>{const s=parseFloat(u.value.meteran_sebelum)||0;return(parseFloat(u.value.meteran_sesudah)||0)-s}),oe=C(()=>{if(r.value?.kategori==="sosial")return 0;const s=X.value,t=parseFloat(u.value.tarif_per_kubik)||0,a=s*t,v=u.value.ada_abunemen&&parseFloat(u.value.biaya_abunemen)||0;return a+v}),Z=C(()=>h.pelangganList.filter(s=>s.tagihan&&s.tagihan.meteran_sesudah!==null).length),ie=C(()=>h.pelangganList.length-Z.value),re=C(()=>h.pelangganList.filter(s=>s.tagihan&&s.tagihan.status_bayar==="SUDAH_BAYAR").length),T=p("tagihan"),ue=C(()=>{if(!_.value)return h.pelangganList;const s=_.value.toLowerCase();return h.pelangganList.filter(t=>t.nama_pelanggan.toLowerCase().includes(s)||t.id_pelanggan.toLowerCase().includes(s))}),R=C(()=>{if(!_.value)return h.pembayaranList||[];const s=_.value.toLowerCase();return(h.pembayaranList||[]).filter(t=>t.pelanggan.nama_pelanggan.toLowerCase().includes(s)||t.pelanggan.id_pelanggan.toLowerCase().includes(s))}),H=C(()=>{const s=R.value,t=s.reduce((a,v)=>a+parseFloat(v.jumlah_bayar||0),0);return{totalCount:s.length,totalAmount:t,averageAmount:s.length>0?t/s.length:0}}),y=s=>parseInt(s).toLocaleString("id-ID"),ee=s=>s?new Date(s).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}):"-",D=s=>{const[t,a]=s.split("-");return`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(a)-1]} ${t}`},de=s=>s?new Date(s).toLocaleString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",L=()=>{Me.visit("/tagihan-bulanan",{data:{bulan:k.value},preserveState:!1})},ge=async()=>{if(c.value.masukkan_tunggakan){if(!confirm("Yakin ingin memasukkan tunggakan ke tagihan bulan ini? Pelanggan yang punya tunggakan akan mendapat tagihan lebih besar."))return}else if(!confirm("Generate tagihan untuk semua pelanggan aktif?"))return;z.value=!0;try{const s=await j.post("/tagihan-bulanan/generate-bulk",c.value);alert(s.data.message),A.value=!1,L()}catch(s){alert("Gagal generate tagihan: "+(s.response?.data?.message||s.message))}finally{z.value=!1}},me=async s=>{if(s.tagihan&&s.tagihan.meteran_sesudah!==null){u.value.meteran_sebelum=s.tagihan.meteran_sebelum,u.value.meteran_sesudah=s.tagihan.meteran_sesudah,u.value.tarif_per_kubik=s.tagihan.tarif_per_kubik,u.value.ada_abunemen=s.tagihan.ada_abunemen,u.value.biaya_abunemen=s.tagihan.biaya_abunemen;return}const t=te(k.value);if(t){let a=!1,v=0;try{const M=await j.get(`/api/tagihan-bulanan/${s.id}/${t}`);M.data&&M.data.tagihan&&M.data.tagihan.meteran_sesudah>0&&(v=M.data.tagihan.meteran_sesudah,a=!0)}catch{console.log("Tidak ada tagihan bulan sebelumnya")}if(a){u.value.meteran_sebelum=v,u.value.meteran_sesudah=null;return}}u.value.meteran_sebelum=null,u.value.meteran_sesudah=null},pe=async s=>{r.value=s,u.value={meteran_sebelum:null,meteran_sesudah:null,tarif_per_kubik:2e3,ada_abunemen:!0,biaya_abunemen:3e3},$.value=!0,await me(s)},Y=()=>{$.value=!1,r.value=null},te=s=>{if(!s)return null;let[t,a]=s.split("-").map(Number);return a=a-1,a===0&&(t-=1,a=12),`${t}-${String(a).padStart(2,"0")}`},xe=async s=>{if(s.tagihan&&s.tagihan.meteran_sesudah!==null){l.value.meteran_sebelum=s.tagihan.meteran_sebelum,l.value.meteran_sesudah=s.tagihan.meteran_sesudah,l.value.jumlah_kubik=s.tagihan.pemakaian_kubik,l.value.abunemen=s.tagihan.ada_abunemen;return}const t=te(k.value);if(t)try{const a=await j.get(`/api/tagihan-bulanan/${s.id}/${t}`);if(a.data&&a.data.tagihan&&a.data.tagihan.meteran_sesudah>0){l.value.meteran_sebelum=a.data.tagihan.meteran_sesudah,l.value.meteran_sesudah=null,l.value.jumlah_kubik=0;return}}catch{console.log("Tidak ada tagihan bulan sebelumnya")}l.value.meteran_sebelum=0,l.value.meteran_sesudah=null,l.value.jumlah_kubik=0},be=async s=>{r.value=s;const t=s.tagihan?.total_tagihan||0;l.value={tanggal_bayar:new Date().toISOString().split("T")[0],meteran_sebelum:null,meteran_sesudah:null,jumlah_kubik:0,abunemen:s.tagihan?.ada_abunemen||!1,jumlah_bayar:t,keterangan:"LUNAS",catatan:"",bayar_tunggakan:!1},K.value=!0,await xe(s)},J=()=>{const s=parseFloat(l.value.meteran_sebelum)||0,a=(parseFloat(l.value.meteran_sesudah)||0)-s;if(l.value.jumlah_kubik=a>0?a:0,l.value.keterangan!=="CICILAN")if(r.value?.kategori==="sosial")l.value.jumlah_bayar=0;else{const v=l.value.jumlah_kubik*2e3,M=l.value.abunemen?3e3:0,we=l.value.bayar_tunggakan?parseFloat(l.value.jumlah_bayar_tunggakan||0):0;l.value.jumlah_bayar=v+M+we}},ce=()=>{l.value.bayar_tunggakan?l.value.jumlah_bayar_tunggakan=r.value?.tunggakan?.total||0:l.value.jumlah_bayar_tunggakan=0,ae()},ae=()=>{if(!r.value||l.value.keterangan==="CICILAN")return;const s=r.value.tagihan?.total_tagihan||0,t=l.value.bayar_tunggakan?parseFloat(l.value.jumlah_bayar_tunggakan||0):0;l.value.jumlah_bayar=s+t},q=()=>{K.value=!1,r.value=null},ye=s=>{f.value=s,B.value="",F.value=!0},N=()=>{F.value=!1,f.value=null,B.value=""},ve=async()=>{if(confirm("Yakin ingin approve pembayaran ini?")){w.value=!0;try{await j.post(`/tagihan-bulanan/${f.value.tagihan.id}/approve-konfirmasi`,{catatan:B.value}),alert("Pembayaran berhasil di-approve!"),N(),L()}catch(s){alert("Gagal approve: "+(s.response?.data?.message||s.message))}finally{w.value=!1}}},fe=async()=>{if(!B.value){alert("Harap isi catatan alasan penolakan");return}if(confirm("Yakin ingin tolak konfirmasi pembayaran ini?")){w.value=!0;try{await j.post(`/tagihan-bulanan/${f.value.tagihan.id}/reject-konfirmasi`,{catatan:B.value}),alert("Konfirmasi pembayaran ditolak"),N(),L()}catch(s){alert("Gagal tolak: "+(s.response?.data?.message||s.message))}finally{w.value=!1}}},he=async()=>{U.value=!0;try{const s={bulan_bayar:k.value,tanggal_bayar:l.value.tanggal_bayar,jumlah_bayar:l.value.jumlah_bayar,keterangan:`${l.value.keterangan}${l.value.catatan?" - "+l.value.catatan:""}`,bayar_tunggakan:l.value.bayar_tunggakan};l.value.bayar_tunggakan&&r.value?.tunggakan?.detail&&(s.id_tunggakan=r.value.tunggakan.detail.map(t=>t.id)),await j.post(`/pelanggan/${r.value.id}/pembayaran`,s),alert("Pembayaran berhasil disimpan!"),q(),L()}catch(s){alert("Gagal menyimpan pembayaran: "+(s.response?.data?.message||s.message))}finally{U.value=!1}},I=()=>{},ke=async()=>{V.value=!0;try{const s=await j.post("/tagihan-bulanan",{pelanggan_id:r.value.id,bulan:k.value,...u.value});alert("Meteran berhasil disimpan!"),Y(),L()}catch(s){alert("Gagal menyimpan meteran: "+(s.response?.data?.message||s.message))}finally{V.value=!1}},_e=s=>{x.value=s,G.value=!0},se=()=>{G.value=!1,x.value=null};return(s,t)=>(o(),ne(je,null,{default:Ce(()=>[e("div",Le,[e("div",Ae,[e("div",Ie,[e("div",Pe,[t[29]||(t[29]=e("div",null,[e("h1",{class:"text-2xl lg:text-3xl font-bold text-gray-900"},"Tagihan & Pembayaran Bulanan"),e("p",{class:"text-gray-600 mt-1 text-sm lg:text-base"},"Kelola meteran, tagihan, dan pembayaran pelanggan")],-1)),e("div",Se,[d(e("input",{type:"month","onUpdate:modelValue":t[0]||(t[0]=a=>k.value=a),onChange:L,class:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent text-sm"},null,544),[[b,k.value]]),e("button",{onClick:t[1]||(t[1]=a=>A.value=!0),class:"inline-flex items-center justify-center px-4 lg:px-6 py-2 lg:py-3 bg-blue-800 text-white rounded-lg font-semibold hover:bg-blue-900 transition text-sm lg:text-base whitespace-nowrap"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",{class:"hidden sm:inline"},"Generate Tagihan Bulanan",-1),e("span",{class:"sm:hidden"},"Generate",-1)])])])]),e("div",ze,[t[30]||(t[30]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),d(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>_.value=a),placeholder:"Cari nama pelanggan...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-blue-800 focus:border-transparent sm:text-sm"},null,512),[[b,_.value]])])]),e("div",Ve,[e("nav",Ue,[e("button",{onClick:t[3]||(t[3]=a=>T.value="tagihan"),class:E(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",T.value==="tagihan"?"border-blue-800 text-blue-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Input Tagihan ",2),e("button",{onClick:t[4]||(t[4]=a=>T.value="pembayaran"),class:E(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",T.value==="pembayaran"?"border-blue-800 text-blue-800":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Daftar Pembayaran ",2)])]),e("div",Re,[e("div",De,[e("div",Ne,[t[32]||(t[32]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),e("div",$e,[t[31]||(t[31]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pelanggan",-1)),e("p",Ke,n(Q.pelangganList.length),1)])])]),e("div",Fe,[e("div",Ge,[t[34]||(t[34]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",He,[t[33]||(t[33]=e("p",{class:"text-sm font-medium text-gray-500"},"Sudah Input Meteran",-1)),e("p",Ye,n(Z.value),1)])])]),e("div",Je,[e("div",qe,[t[36]||(t[36]=e("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ee,[t[35]||(t[35]=e("p",{class:"text-sm font-medium text-gray-500"},"Belum Input Meteran",-1)),e("p",Oe,n(ie.value),1)])])]),e("div",We,[e("div",Qe,[t[38]||(t[38]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Xe,[t[37]||(t[37]=e("p",{class:"text-sm font-medium text-gray-500"},"Sudah Bayar",-1)),e("p",Ze,n(re.value),1)])])])]),d(e("div",null,[e("div",et,[e("div",tt,[e("table",at,[t[48]||(t[48]=e("thead",{class:"bg-blue-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama Pelanggan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Kategori"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Meteran Sebelum (mÂ³)"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Meteran Sesudah (mÂ³)"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Pemakaian (mÂ³)"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Tunggakan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Total Tagihan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Aksi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Pembayaran")])],-1)),e("tbody",st,[(o(!0),i(O,null,W(ue.value,a=>(o(),i("tr",{key:a.id,class:"hover:bg-gray-50 transition-colors"},[e("td",nt,[e("div",lt,n(a.id_pelanggan),1)]),e("td",ot,[e("div",it,[e("div",rt,n(a.nama_pelanggan),1),a.tunggakan&&a.tunggakan>0?(o(),i("span",ut,[...t[39]||(t[39]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),m(" ! ",-1)])])):g("",!0)])]),e("td",dt,[e("span",gt,n(a.wilayah||"-"),1)]),e("td",mt,[a.kategori==="sosial"?(o(),i("span",pt," Sosial ")):(o(),i("span",xt," Umum "))]),e("td",bt,[e("div",ct,n(a.tagihan?.meteran_sebelum??"-"),1)]),e("td",yt,[e("div",vt,n(a.tagihan?.meteran_sesudah??"-"),1)]),e("td",ft,[e("div",ht,n(a.tagihan?.pemakaian_kubik??"-"),1)]),e("td",kt,[a.tunggakan&&a.tunggakan>0?(o(),i("div",_t,n(y(a.tunggakan)),1)):(o(),i("div",wt,"-"))]),e("td",Ct,[a.tagihan?(o(),i("div",Bt,[e("div",Mt,n(y(a.tagihan.total_tagihan)),1),a.tagihan.jumlah_terbayar>0&&a.tagihan.status_bayar==="BELUM_BAYAR"?(o(),i("div",jt," Terbayar: "+n(y(a.tagihan.jumlah_terbayar)),1)):g("",!0)])):(o(),i("div",Tt,"Belum ada"))]),e("td",Lt,[e("div",At,[a.tagihan?.status_konfirmasi==="pending"?(o(),i("span",It,[...t[40]||(t[40]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1),m(" Pending Konfirmasi ",-1)])])):a.tagihan?.status_bayar==="SUDAH_BAYAR"?(o(),i("span",Pt,[...t[41]||(t[41]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),m(" Sudah Bayar ",-1)])])):a.tunggakan&&a.tunggakan>0?(o(),i("span",St,[...t[42]||(t[42]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293z","clip-rule":"evenodd"})],-1),m(" Nunggak ",-1)])])):a.tagihan&&a.tagihan.status_bayar==="BELUM_BAYAR"&&a.tagihan.status_konfirmasi==="none"?(o(),i("span",zt,[a.tagihan.jumlah_terbayar>0?(o(),i("span",Vt,[t[43]||(t[43]=e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),m(" Cicilan "+n(Math.round(a.tagihan.jumlah_terbayar/a.tagihan.total_tagihan*100))+"% ",1)])):(o(),i("span",Ut,[...t[44]||(t[44]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),m(" Belum Bayar ",-1)])]))])):a.tagihan?g("",!0):(o(),i("span",Rt,"-"))])]),e("td",Dt,[e("button",{onClick:v=>pe(a),class:"text-blue-600 hover:text-blue-800 transition font-medium",title:"Input Meteran"},[...t[45]||(t[45]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Nt)]),e("td",$t,[a.tagihan?.status_konfirmasi==="pending"?(o(),i("div",Kt,[e("button",{onClick:v=>ye(a),class:"inline-flex items-center px-3 py-1.5 bg-orange-600 text-white text-xs font-medium rounded-md hover:bg-orange-700 transition",title:"Lihat Bukti & Approve"},[...t[46]||(t[46]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),m(" Verifikasi ",-1)])],8,Ft)])):a.tagihan&&a.tagihan.status_bayar==="BELUM_BAYAR"&&a.tagihan.status_konfirmasi==="none"?(o(),i("button",{key:1,onClick:v=>be(a),class:"inline-flex items-center px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-md hover:bg-green-700 transition",title:"Input Pembayaran"},[...t[47]||(t[47]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1),m(" Bayar ",-1)])],8,Gt)):a.tagihan?.status_bayar==="SUDAH_BAYAR"?(o(),i("span",Ht," âœ“ Lunas ")):(o(),i("span",Yt,"-"))])]))),128))])])])])],512),[[le,T.value==="tagihan"]])]),A.value?(o(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:t[11]||(t[11]=P(a=>A.value=!1,["self"]))},[e("div",Jt,[t[55]||(t[55]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",qt,[t[54]||(t[54]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Generate Tagihan Bulanan",-1)),e("div",Et,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan",-1)),d(e("input",{type:"month","onUpdate:modelValue":t[5]||(t[5]=a=>c.value.bulan=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[b,c.value.bulan]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tarif per mÂ³ (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=a=>c.value.tarif_per_kubik=a),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[b,c.value.tarif_per_kubik]])]),e("div",null,[e("label",Ot,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>c.value.ada_abunemen=a),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[S,c.value.ada_abunemen]]),t[51]||(t[51]=e("span",{class:"ml-2 text-sm text-gray-700"},"Ada Biaya Abunemen",-1))])]),c.value.ada_abunemen?(o(),i("div",Wt,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biaya Abunemen (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=a=>c.value.biaya_abunemen=a),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[b,c.value.biaya_abunemen]])])):g("",!0),e("div",Qt,[e("label",Xt,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=a=>c.value.masukkan_tunggakan=a),class:"mt-1 rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[S,c.value.masukkan_tunggakan]]),t[53]||(t[53]=e("span",{class:"ml-2"},[e("span",{class:"text-sm font-medium text-gray-700"},"Masukkan Tunggakan ke Tagihan Bulan Ini"),e("span",{class:"block text-xs text-gray-500 mt-1"},"Tunggakan dari bulan sebelumnya akan otomatis ditambahkan ke total tagihan")],-1))])])]),e("div",Zt,[e("button",{onClick:ge,disabled:z.value,class:"flex-1 px-4 py-2 bg-blue-800 text-white rounded-lg font-medium hover:bg-blue-900 transition disabled:opacity-50"},n(z.value?"Generating...":"Generate"),9,ea),e("button",{onClick:t[10]||(t[10]=a=>A.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0)]),d(e("div",null,[e("div",ta,[e("div",aa,[e("div",sa,[t[57]||(t[57]=e("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})])],-1)),e("div",na,[t[56]||(t[56]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pembayaran",-1)),e("p",la,n(H.value.totalCount),1)])])]),e("div",oa,[e("div",ia,[t[59]||(t[59]=e("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ra,[t[58]||(t[58]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Pemasukan",-1)),e("p",ua,"Rp "+n(y(H.value.totalAmount)),1)])])]),e("div",da,[e("div",ga,[t[61]||(t[61]=e("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",ma,[t[60]||(t[60]=e("p",{class:"text-sm font-medium text-gray-500"},"Rata-rata Pembayaran",-1)),e("p",pa,"Rp "+n(y(H.value.averageAmount)),1)])])])]),e("div",xa,[e("div",ba,[e("table",ca,[t[64]||(t[64]=e("thead",{class:"bg-blue-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID Pelanggan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama Pelanggan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Bulan Bayar"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"M. Sebelum"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"M. Sesudah"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Pemakaian"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Abunemen"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Jumlah Bayar"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Keterangan"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Metode"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Catatan"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Aksi")])],-1)),e("tbody",ya,[(o(!0),i(O,null,W(R.value,a=>(o(),i("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",va,[e("div",fa,n(ee(a.tanggal_bayar)),1)]),e("td",ha,[e("div",ka,n(a.pelanggan.id_pelanggan),1)]),e("td",_a,[e("div",wa,n(a.pelanggan.nama_pelanggan),1)]),e("td",Ca,[e("div",Ba,n(a.pelanggan.wilayah||"-"),1)]),e("td",Ma,[e("div",ja,n(D(a.bulan_bayar)),1)]),e("td",Ta,[e("div",La,n(a.meteran_sebelum||"-"),1)]),e("td",Aa,[e("div",Ia,n(a.meteran_sesudah||"-"),1)]),e("td",Pa,[e("div",Sa,n(a.jumlah_kubik?a.jumlah_kubik+" mÂ³":"-"),1)]),e("td",za,[a.abunemen?(o(),i("span",Va,[...t[62]||(t[62]=[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),m(" Ya ",-1)])])):(o(),i("span",Ua,"-"))]),e("td",Ra,[e("div",Da,"Rp "+n(y(a.jumlah_bayar)),1)]),e("td",Na,[a.keterangan==="Nunggak"?(o(),i("span",$a,n(a.keterangan),1)):a.keterangan==="Cicilan"?(o(),i("span",Ka,n(a.keterangan),1)):(o(),i("span",Fa,n(a.keterangan||"Lunas"),1))]),e("td",Ga,[e("div",Ha,n(a.metode_bayar),1)]),e("td",Ya,[e("div",Ja,n(a.catatan||"-"),1)]),e("td",qa,[e("button",{onClick:v=>_e(a),class:"text-blue-600 hover:text-blue-900 transition",title:"Lihat Detail"},[...t[63]||(t[63]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Ea)])]))),128)),!R.value||R.value.length===0?(o(),i("tr",Oa,[e("td",Wa,[_.value?(o(),i("div",Qa,' Tidak ada pembayaran yang sesuai dengan pencarian "'+n(_.value)+'" ',1)):(o(),i("div",Xa," Belum ada pembayaran di bulan ini "))])])):g("",!0)])])])])],512),[[le,T.value==="pembayaran"]]),$.value?(o(),i("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:P(Y,["self"])},[e("div",Za,[t[75]||(t[75]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",es,[e("h3",ts," Input Meteran - "+n(r.value?.nama_pelanggan),1),r.value?.kategori==="sosial"?(o(),i("div",as,[...t[65]||(t[65]=[e("p",{class:"text-sm text-purple-700"},[e("strong",null,"Pelanggan Kategori Sosial:"),m(" Tidak dikenakan biaya (gratis) ")],-1)])])):g("",!0),e("div",ss,[e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan Tagihan",-1)),e("input",{type:"month",value:k.value,readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,8,ns),t[67]||(t[67]=e("p",{class:"text-xs text-gray-500 mt-1"},"Bulan yang sedang dipilih di halaman utama",-1))]),e("div",ls,[e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sebelum (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=a=>u.value.meteran_sebelum=a),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:I},null,544),[[b,u.value.meteran_sebelum]])]),e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sesudah (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=a=>u.value.meteran_sesudah=a),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:I},null,544),[[b,u.value.meteran_sesudah]])])]),e("div",os,[e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pemakaian (mÂ³)",-1)),e("input",{type:"number",value:X.value,readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"},null,8,is)]),r.value?.kategori!=="sosial"?(o(),i("div",rs,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tarif per mÂ³ (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=a=>u.value.tarif_per_kubik=a),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:I},null,544),[[b,u.value.tarif_per_kubik]])])):g("",!0)]),r.value?.kategori!=="sosial"?(o(),i("div",us,[e("label",ds,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=a=>u.value.ada_abunemen=a),class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",onChange:I},null,544),[[S,u.value.ada_abunemen]]),t[72]||(t[72]=e("span",{class:"ml-2 text-sm text-gray-700"},"Ada Biaya Abunemen",-1))])])):g("",!0),u.value.ada_abunemen&&r.value?.kategori!=="sosial"?(o(),i("div",gs,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biaya Abunemen (Rp)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=a=>u.value.biaya_abunemen=a),step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent",onInput:I},null,544),[[b,u.value.biaya_abunemen]])])):g("",!0),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Tagihan (Rp)",-1)),e("input",{type:"text",value:y(oe.value),readonly:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-blue-50 font-bold text-blue-600"},null,8,ms)])]),r.value?.tagihan?(o(),ne(Te,{key:1,"total-tagihan":r.value.tagihan.total_tagihan||0,"jumlah-terbayar":r.value.tagihan.jumlah_terbayar||0,"status-bayar":r.value.tagihan.status_bayar||"BELUM_BAYAR",class:"mt-4"},null,8,["total-tagihan","jumlah-terbayar","status-bayar"])):g("",!0),e("div",ps,[e("button",{onClick:ke,disabled:V.value,class:"flex-1 px-4 py-2 bg-blue-800 text-white rounded-lg font-medium hover:bg-blue-900 transition disabled:opacity-50"},n(V.value?"Menyimpan...":"Simpan"),9,xs),e("button",{onClick:Y,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0),K.value?(o(),i("div",{key:1,class:"fixed inset-0 z-50 overflow-y-auto",onClick:P(q,["self"])},[e("div",bs,[t[92]||(t[92]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",cs,[t[91]||(t[91]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Input Pembayaran",-1)),r.value?(o(),i("div",ys,[e("div",vs,[e("p",null,[t[76]||(t[76]=e("strong",null,"ID:",-1)),m(" "+n(r.value.id_pelanggan),1)]),e("p",null,[t[77]||(t[77]=e("strong",null,"Nama:",-1)),m(" "+n(r.value.nama_pelanggan),1)]),e("p",null,[t[78]||(t[78]=e("strong",null,"Bulan:",-1)),m(" "+n(D(k.value)),1)]),e("p",fs," Total Tagihan: "+n(y(r.value.tagihan?.total_tagihan||0)),1)])])):g("",!0),e("div",hs,[e("div",null,[t[79]||(t[79]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tanggal Bayar",-1)),d(e("input",{type:"date","onUpdate:modelValue":t[17]||(t[17]=a=>l.value.tanggal_bayar=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",required:""},null,512),[[b,l.value.tanggal_bayar]])]),e("div",null,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sebelum (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=a=>l.value.meteran_sebelum=a),step:"0.01",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",onInput:J},null,544),[[b,l.value.meteran_sebelum]]),t[81]||(t[81]=e("p",{class:"text-xs text-gray-500 mt-1"},"Angka meteran bulan lalu",-1))]),e("div",null,[t[82]||(t[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Meteran Sesudah (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=a=>l.value.meteran_sesudah=a),step:"0.01",placeholder:"0.00",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",onInput:J},null,544),[[b,l.value.meteran_sesudah]]),t[83]||(t[83]=e("p",{class:"text-xs text-gray-500 mt-1"},"Angka meteran bulan ini",-1))]),e("div",null,[t[84]||(t[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pemakaian (mÂ³)",-1)),d(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=a=>l.value.jumlah_kubik=a),step:"0.01",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 bg-gray-50",readonly:""},null,512),[[b,l.value.jumlah_kubik]]),r.value?.kategori==="sosial"?(o(),i("p",ks,"Tarif: Gratis (Kategori Sosial)")):(o(),i("p",_s,"Tarif: Rp 2.000 / mÂ³"))]),e("div",null,[e("label",ws,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=a=>l.value.abunemen=a),onChange:J,class:"w-5 h-5 text-blue-800 border-gray-300 rounded focus:ring-2 focus:ring-blue-800"},null,544),[[S,l.value.abunemen]]),t[85]||(t[85]=e("div",null,[e("span",{class:"text-sm font-medium text-gray-700"},"Abunemen"),e("p",{class:"text-xs text-gray-500"},"Biaya tambahan: Rp 3.000")],-1))])]),r.value?.tunggakan?.jumlah>0?(o(),i("div",Cs,[e("div",Bs,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=a=>l.value.bayar_tunggakan=a),onChange:ce,class:"mt-1 mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[S,l.value.bayar_tunggakan]]),e("div",Ms,[e("label",js," Bayar Tunggakan ("+n(r.value.tunggakan.jumlah)+" bulan) ",1),e("p",Ts," Total tunggakan: "+n(y(r.value.tunggakan.total)),1),e("div",Ls,[(o(!0),i(O,null,W(r.value.tunggakan.detail,a=>(o(),i("div",{key:a.id,class:"flex justify-between"},[e("span",null,n(D(a.bulan)),1),e("span",null,n(y(a.total_tagihan)),1)]))),128))]),l.value.bayar_tunggakan?(o(),i("div",As,[t[86]||(t[86]=e("label",{class:"block text-sm font-medium text-yellow-800 mb-1"},[m(" Jumlah Bayar Tunggakan (Rp) "),e("span",{class:"text-xs font-normal text-yellow-600"},"- Bisa bayar sebagian/cicil")],-1)),d(e("input",{type:"number","onUpdate:modelValue":t[23]||(t[23]=a=>l.value.jumlah_bayar_tunggakan=a),onInput:ae,step:"1000",min:"0",max:r.value.tunggakan.total,class:"w-full px-3 py-2 border border-yellow-300 rounded-lg focus:ring-2 focus:ring-blue-800 bg-white",placeholder:"Isi jumlah bayar tunggakan (bisa cicil)"},null,40,Is),[[b,l.value.jumlah_bayar_tunggakan]]),e("p",Ps," ðŸ’¡ Isi sesuai kemampuan (misal: Rp 5.000 dari total Rp "+n(y(r.value.tunggakan.total))+") ",1)])):g("",!0)])])])):g("",!0),e("div",null,[e("label",Ss,[m(n(l.value.keterangan==="CICILAN"?"Jumlah Cicilan":"Jumlah Bayar")+" (Rp) ",1),l.value.keterangan==="CICILAN"?(o(),i("span",zs,"- Bisa diedit")):g("",!0)]),d(e("input",{type:"number","onUpdate:modelValue":t[24]||(t[24]=a=>l.value.jumlah_bayar=a),class:E(["w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",l.value.keterangan==="CICILAN"||l.value.bayar_tunggakan?"bg-white":"bg-gray-50"]),step:"1000",min:"0",required:"",readonly:l.value.keterangan!=="CICILAN"&&!l.value.bayar_tunggakan},null,10,Vs),[[b,l.value.jumlah_bayar]]),l.value.keterangan==="CICILAN"?(o(),i("p",Us,"ðŸ’¡ Untuk cicilan, isi jumlah berapa saja (misal: Rp 1.000, Rp 5.000, dll)")):g("",!0)]),e("div",null,[t[88]||(t[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[m("Keterangan "),e("span",{class:"text-red-500"},"*")],-1)),d(e("select",{"onUpdate:modelValue":t[25]||(t[25]=a=>l.value.keterangan=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",required:""},[...t[87]||(t[87]=[e("option",{value:"LUNAS"},"Lunas - Bayar penuh tagihan bulan ini",-1),e("option",{value:"TUNGGAKAN"},"Tunggakan - Belum bayar, masuk bulan depan",-1),e("option",{value:"CICILAN"},"Cicilan - Bayar sebagian",-1)])],512),[[Be,l.value.keterangan]]),t[89]||(t[89]=e("p",{class:"text-xs text-gray-500 mt-1"}," Lunas = Bayar penuh | Tunggakan = Belum bayar | Cicilan = Bayar sebagian ",-1))]),e("div",null,[t[90]||(t[90]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catatan Tambahan (Opsional)",-1)),d(e("textarea",{"onUpdate:modelValue":t[26]||(t[26]=a=>l.value.catatan=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",placeholder:"Catatan pembayaran..."},null,512),[[b,l.value.catatan]])])]),e("div",Rs,[e("button",{onClick:he,disabled:U.value,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition disabled:opacity-50"},n(U.value?"Menyimpan...":"Simpan Pembayaran"),9,Ds),e("button",{onClick:q,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0),F.value?(o(),i("div",{key:2,class:"fixed inset-0 z-50 overflow-y-auto",onClick:P(N,["self"])},[e("div",Ns,[t[101]||(t[101]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",$s,[t[100]||(t[100]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Verifikasi Konfirmasi Pembayaran",-1)),f.value?(o(),i("div",Ks,[e("div",Fs,[e("p",Gs,[t[93]||(t[93]=e("strong",null,"ID Pelanggan:",-1)),m(" "+n(f.value.id_pelanggan),1)]),e("p",Hs,[t[94]||(t[94]=e("strong",null,"Nama:",-1)),m(" "+n(f.value.nama_pelanggan),1)]),e("p",Ys,[t[95]||(t[95]=e("strong",null,"Total Tagihan:",-1)),m(" "+n(y(f.value.tagihan?.total_tagihan||0)),1)]),e("p",Js,[t[96]||(t[96]=e("strong",null,"Waktu Konfirmasi:",-1)),m(" "+n(de(f.value.tagihan?.konfirmasi_at)),1)])]),f.value.tagihan?.bukti_transfer?(o(),i("div",qs,[t[97]||(t[97]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bukti Transfer:",-1)),e("img",{src:`/storage/${f.value.tagihan.bukti_transfer}`,alt:"Bukti Transfer",class:"w-full max-h-96 object-contain border rounded-lg"},null,8,Es)])):(o(),i("div",Os,[...t[98]||(t[98]=[e("p",{class:"text-sm text-gray-500 italic"},"Tidak ada bukti transfer yang diupload",-1)])])),e("div",null,[t[99]||(t[99]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catatan (Opsional)",-1)),d(e("textarea",{"onUpdate:modelValue":t[27]||(t[27]=a=>B.value=a),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800",placeholder:"Tambahkan catatan jika perlu..."},null,512),[[b,B.value]])])])):g("",!0),e("div",Ws,[e("button",{onClick:ve,disabled:w.value,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition disabled:opacity-50"},n(w.value?"Memproses...":"âœ“ Approve"),9,Qs),e("button",{onClick:fe,disabled:w.value,class:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition disabled:opacity-50"},n(w.value?"Memproses...":"âœ— Tolak"),9,Xs),e("button",{onClick:N,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Batal ")])])])])):g("",!0),G.value?(o(),i("div",{key:3,class:"fixed inset-0 z-50 overflow-y-auto",onClick:P(se,["self"])},[e("div",Zs,[t[117]||(t[117]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),e("div",en,[t[116]||(t[116]=e("h3",{class:"text-xl font-bold text-gray-900 mb-4"},"Detail Pembayaran",-1)),x.value?(o(),i("div",tn,[e("div",an,[t[105]||(t[105]=e("h4",{class:"font-semibold text-gray-900 mb-2"},"Informasi Pelanggan",-1)),e("div",sn,[e("p",null,[t[102]||(t[102]=e("span",{class:"font-medium"},"ID Pelanggan:",-1)),m(" "+n(x.value.pelanggan.id_pelanggan),1)]),e("p",null,[t[103]||(t[103]=e("span",{class:"font-medium"},"Nama:",-1)),m(" "+n(x.value.pelanggan.nama_pelanggan),1)]),e("p",null,[t[104]||(t[104]=e("span",{class:"font-medium"},"Wilayah:",-1)),m(" "+n(x.value.pelanggan.wilayah||"-"),1)])])]),e("div",nn,[e("div",null,[t[106]||(t[106]=e("label",{class:"text-sm font-medium text-gray-500"},"Tanggal Pembayaran",-1)),e("p",ln,n(ee(x.value.tanggal_bayar)),1)]),e("div",null,[t[107]||(t[107]=e("label",{class:"text-sm font-medium text-gray-500"},"Bulan Bayar",-1)),e("p",on,n(D(x.value.bulan_bayar)),1)]),e("div",rn,[e("div",null,[t[108]||(t[108]=e("label",{class:"text-xs font-medium text-gray-500"},"Meteran Sebelum",-1)),e("p",un,n(x.value.meteran_sebelum||"-"),1)]),e("div",null,[t[109]||(t[109]=e("label",{class:"text-xs font-medium text-gray-500"},"Meteran Sesudah",-1)),e("p",dn,n(x.value.meteran_sesudah||"-"),1)]),e("div",null,[t[110]||(t[110]=e("label",{class:"text-xs font-medium text-gray-500"},"Pemakaian",-1)),e("p",gn,n(x.value.jumlah_kubik?x.value.jumlah_kubik+" mÂ³":"-"),1)])]),x.value.abunemen?(o(),i("div",mn,[...t[111]||(t[111]=[e("label",{class:"text-sm font-medium text-gray-500"},"Abunemen",-1),e("p",{class:"text-base text-gray-900"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})]),m(" Ya (Rp 3.000) ")])],-1)])])):g("",!0),e("div",null,[t[112]||(t[112]=e("label",{class:"text-sm font-medium text-gray-500"},"Jumlah Bayar",-1)),e("p",pn,"Rp "+n(y(x.value.jumlah_bayar)),1)]),e("div",null,[t[113]||(t[113]=e("label",{class:"text-sm font-medium text-gray-500"},"Metode Pembayaran",-1)),e("p",xn,n(x.value.metode_bayar),1)]),e("div",null,[t[114]||(t[114]=e("label",{class:"text-sm font-medium text-gray-500"},"Keterangan",-1)),e("p",bn,n(x.value.keterangan||"Lunas"),1)]),x.value.catatan?(o(),i("div",cn,[t[115]||(t[115]=e("label",{class:"text-sm font-medium text-gray-500"},"Catatan",-1)),e("p",yn,n(x.value.catatan),1)])):g("",!0)])])):g("",!0),e("div",{class:"mt-6 flex justify-end"},[e("button",{onClick:se,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-400 transition"}," Tutup ")])])])])):g("",!0)]),_:1}))}};export{_n as default};
