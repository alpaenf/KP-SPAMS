import{m,p as y,c as N,w as z,a as t,e as r,f as d,t as a,d as C,v as D,o as i,y as I,F as T,r as P,j as x,n as $,b as W,k as K}from"./app-BgHyD-Ud.js";import{_ as A}from"./AppLayout-6je1GNuW.js";/* empty css            */const F={class:"py-12"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},U={class:"bg-white rounded-lg shadow-md p-6"},O={class:"flex items-center"},q={class:"ml-4"},E={class:"text-2xl font-bold text-gray-900"},Q={class:"bg-white rounded-lg shadow-md p-6"},Y={class:"flex items-center"},G={class:"ml-4"},X={class:"text-2xl font-bold text-gray-900"},Z={class:"bg-white rounded-lg shadow-md p-6"},tt={class:"flex items-center"},et={class:"ml-4"},st={class:"text-2xl font-bold text-gray-900"},at={class:"bg-white rounded-lg shadow-md p-6 mb-6"},lt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ot={class:"md:col-span-2"},nt={key:0},it={class:"bg-white rounded-lg shadow-md overflow-hidden"},rt={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-gray-200"},ut={class:"bg-white divide-y divide-gray-200"},pt={key:0},mt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-900"},xt={class:"px-6 py-4 whitespace-nowrap"},ct={class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4"},bt={class:"text-sm font-medium text-gray-900"},yt={key:0,class:"text-xs text-purple-600 font-medium"},ht={class:"px-6 py-4 whitespace-nowrap"},ft={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},wt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm text-gray-900"},_t={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm text-gray-900"},Mt={class:"px-6 py-4 whitespace-nowrap text-center"},Bt={class:"text-sm text-gray-900"},jt={key:0,class:"text-xs text-blue-600"},Dt={class:"px-6 py-4 whitespace-nowrap text-right"},Tt={class:"text-sm font-semibold text-gray-900"},Pt={key:0,class:"text-xs text-orange-600"},Rt={class:"px-6 py-4 whitespace-nowrap text-center"},Vt=["onClick"],St={key:0,class:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Lt={class:"flex-1 flex justify-between sm:hidden"},Nt=["disabled"],zt=["disabled"],It={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},$t={class:"text-sm text-gray-700"},Wt={class:"font-medium"},Kt={class:"font-medium"},At={class:"font-medium"},Ft={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ht=["disabled"],Jt=["onClick"],Ut=["disabled"],Ot={class:"flex items-center justify-center min-h-screen px-4 py-6"},qt={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full"},Et={key:0,class:"p-6"},Qt={class:"grid grid-cols-2 gap-4"},Yt={class:"col-span-2 border-b pb-4 mb-4"},Gt={class:"grid grid-cols-2 gap-3"},Xt={class:"font-medium"},Zt={class:"font-medium"},te={class:"font-medium"},ee={class:"font-medium"},se={class:"col-span-2 border-b pb-4 mb-4"},ae={class:"grid grid-cols-2 gap-3"},le={class:"font-medium"},oe={class:"font-medium"},ne={class:"font-medium"},ie={class:"font-medium"},re={class:"font-medium"},de={class:"font-medium"},ue={class:"font-medium"},pe={class:"text-xl font-bold text-blue-800"},me={class:"col-span-2"},ge={class:"grid grid-cols-2 gap-3"},xe={class:"font-medium"},ce={class:"font-medium"},ve={key:0,class:"col-span-2"},be={class:"font-medium"},ye={class:"mt-6 flex gap-3 justify-end"},he=["href"],g=20,_e={__name:"RiwayatPembayaran",props:{pembayaranList:{type:Array,default:()=>[]},bulan:{type:String,default:""},stats:{type:Object,default:()=>({totalPembayaran:0,totalPemasukan:0,rataRata:0})}},setup(c){const M=c,v=m(""),h=m(M.bulan),b=m("all"),f=m(!1),l=m(null),n=m(1),u=y(()=>{let o=M.pembayaranList;if(v.value){const e=v.value.toLowerCase();o=o.filter(s=>s.id_pelanggan.toLowerCase().includes(e)||s.nama_pelanggan.toLowerCase().includes(e))}return b.value!=="all"&&(o=o.filter(e=>e.wilayah===b.value)),o}),w=y(()=>Math.ceil(u.value.length/g)),R=y(()=>{const o=(n.value-1)*g,e=o+g;return u.value.slice(o,e)}),V=y(()=>{const o=[];let s=Math.max(1,n.value-Math.floor(2.5)),p=Math.min(w.value,s+5-1);p-s<4&&(s=Math.max(1,p-5+1));for(let _=s;_<=p;_++)o.push(_);return o}),S=()=>{K.get("/riwayat-pembayaran",{bulan:h.value},{preserveState:!0,preserveScroll:!0})},L=o=>{l.value=o,f.value=!0},k=()=>{f.value=!1,l.value=null},B=o=>{const[e,s]=o.split("-");return`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(s)-1]} ${e}`},j=o=>new Date(o).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"});return(o,e)=>(i(),N(A,null,{default:z(()=>[t("div",F,[t("div",H,[e[26]||(e[26]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold text-gray-900"},"Riwayat Pembayaran"),t("p",{class:"text-gray-600 mt-1"},"Kelola dan pantau semua transaksi pembayaran pelanggan")],-1)),t("div",J,[t("div",U,[t("div",O,[e[8]||(e[8]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t("div",q,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Transaksi",-1)),t("p",E,a(c.stats.totalPembayaran),1)])])]),t("div",Q,[t("div",Y,[e[10]||(e[10]=t("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",G,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-500"},"Total Pemasukan",-1)),t("p",X,"Rp "+a(Number(c.stats.totalPemasukan).toLocaleString("id-ID")),1)])])]),t("div",Z,[t("div",tt,[e[12]||(e[12]=t("div",{class:"p-3 rounded-full bg-purple-100 text-purple-600"},[t("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),t("div",et,[e[11]||(e[11]=t("p",{class:"text-sm font-medium text-gray-500"},"Rata-rata Bayar",-1)),t("p",st,"Rp "+a(Number(c.stats.rataRata).toLocaleString("id-ID")),1)])])])]),t("div",at,[t("div",lt,[t("div",ot,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cari Pelanggan",-1)),C(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),placeholder:"Cari berdasarkan ID atau nama pelanggan...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,512),[[D,v.value]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Bulan",-1)),C(t("input",{type:"month","onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),onChange:S,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},null,544),[[D,h.value]])]),o.$page.props.auth.user.role!=="penarik"?(i(),r("div",nt,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Wilayah",-1)),C(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>b.value=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-800 focus:border-transparent"},[...e[15]||(e[15]=[t("option",{value:"all"},"Semua Wilayah",-1),t("option",{value:"Dawuhan"},"Dawuhan",-1),t("option",{value:"Kubangsari Kulon"},"Kubangsari Kulon",-1),t("option",{value:"Kubangsari Wetan"},"Kubangsari Wetan",-1),t("option",{value:"Sokarame"},"Sokarame",-1),t("option",{value:"Tiparjaya"},"Tiparjaya",-1)])],512),[[I,b.value]])])):d("",!0)])]),t("div",it,[t("div",rt,[t("table",dt,[e[19]||(e[19]=t("thead",{class:"bg-blue-800"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Tanggal"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"ID Pelanggan"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Nama"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Wilayah"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"RT/RW"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-white uppercase tracking-wider"},"Bulan Bayar"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Pemakaian"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-white uppercase tracking-wider"},"Jumlah Bayar"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-white uppercase tracking-wider"},"Aksi")])],-1)),t("tbody",ut,[u.value.length===0?(i(),r("tr",pt,[...e[17]||(e[17]=[t("td",{colspan:"9",class:"px-6 py-12 text-center text-gray-500"},[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),t("p",{class:"mt-2"},"Tidak ada data pembayaran ditemukan")],-1)])])):d("",!0),(i(!0),r(T,null,P(R.value,s=>(i(),r("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[t("td",mt,[t("div",gt,a(j(s.tanggal_bayar)),1)]),t("td",xt,[t("div",ct,a(s.id_pelanggan),1)]),t("td",vt,[t("div",bt,a(s.nama_pelanggan),1),s.kategori==="sosial"?(i(),r("div",yt,"Kategori Sosial")):d("",!0)]),t("td",ht,[t("span",ft,a(s.wilayah||"N/A"),1)]),t("td",wt,[t("div",kt,a(s.rt?`RT ${s.rt}`:"-")+" "+a(s.rt&&s.rw?"/":"")+" "+a(s.rw?`RW ${s.rw}`:""),1)]),t("td",_t,[t("div",Ct,a(B(s.bulan_bayar)),1)]),t("td",Mt,[t("div",Bt,a(s.jumlah_kubik?s.jumlah_kubik+" m³":"-"),1),s.abunemen?(i(),r("div",jt,"+ Abunemen")):d("",!0)]),t("td",Dt,[t("div",Tt,"Rp "+a(Number(s.jumlah_bayar).toLocaleString("id-ID")),1),s.tunggakan>0?(i(),r("div",Pt,"Tunggakan: Rp "+a(Number(s.tunggakan).toLocaleString("id-ID")),1)):d("",!0)]),t("td",Rt,[t("button",{onClick:p=>L(s),class:"text-blue-600 hover:text-blue-800 transition",title:"Lihat Detail"},[...e[18]||(e[18]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Vt)])]))),128))])])]),u.value.length>g?(i(),r("div",St,[t("div",Lt,[t("button",{onClick:e[3]||(e[3]=s=>n.value--),disabled:n.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Previous ",8,Nt),t("button",{onClick:e[4]||(e[4]=s=>n.value++),disabled:n.value===w.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50"}," Next ",8,zt)]),t("div",It,[t("div",null,[t("p",$t,[e[20]||(e[20]=x(" Menampilkan ",-1)),t("span",Wt,a((n.value-1)*g+1),1),e[21]||(e[21]=x(" sampai ",-1)),t("span",Kt,a(Math.min(n.value*g,u.value.length)),1),e[22]||(e[22]=x(" dari ",-1)),t("span",At,a(u.value.length),1),e[23]||(e[23]=x(" hasil ",-1))])]),t("div",null,[t("nav",Ft,[t("button",{onClick:e[5]||(e[5]=s=>n.value--),disabled:n.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},[...e[24]||(e[24]=[t("span",{class:"sr-only"},"Previous",-1),t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],8,Ht),(i(!0),r(T,null,P(V.value,s=>(i(),r("button",{key:s,onClick:p=>n.value=s,class:$(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",n.value===s?"z-10 bg-blue-800 border-blue-800 text-white":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"])},a(s),11,Jt))),128)),t("button",{onClick:e[6]||(e[6]=s=>n.value++),disabled:n.value===w.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50"},[...e[25]||(e[25]=[t("span",{class:"sr-only"},"Next",-1),t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])],8,Ut)])])])])):d("",!0)])])]),f.value?(i(),r("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:W(k,["self"])},[t("div",Ot,[e[48]||(e[48]=t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)),t("div",qt,[t("div",{class:"bg-blue-800 text-white px-6 py-4 rounded-t-lg flex justify-between items-center"},[e[28]||(e[28]=t("h3",{class:"text-xl font-bold"},"Detail Pembayaran",-1)),t("button",{onClick:k,class:"text-white hover:text-gray-200"},[...e[27]||(e[27]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),l.value?(i(),r("div",Et,[t("div",Qt,[t("div",Yt,[e[33]||(e[33]=t("h4",{class:"font-semibold text-gray-900 mb-2"},"Informasi Pelanggan",-1)),t("div",Gt,[t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"ID Pelanggan",-1)),t("p",Xt,a(l.value.id_pelanggan),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Nama",-1)),t("p",Zt,a(l.value.nama_pelanggan),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"},"Wilayah",-1)),t("p",te,a(l.value.wilayah),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"RT/RW",-1)),t("p",ee,"RT "+a(l.value.rt)+" / RW "+a(l.value.rw),1)])])]),t("div",se,[e[42]||(e[42]=t("h4",{class:"font-semibold text-gray-900 mb-2"},"Detail Transaksi",-1)),t("div",ae,[t("div",null,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-600"},"Bulan Bayar",-1)),t("p",le,a(B(l.value.bulan_bayar)),1)]),t("div",null,[e[35]||(e[35]=t("p",{class:"text-sm text-gray-600"},"Tanggal Bayar",-1)),t("p",oe,a(j(l.value.tanggal_bayar)),1)]),t("div",null,[e[36]||(e[36]=t("p",{class:"text-sm text-gray-600"},"Meteran Sebelum",-1)),t("p",ne,a(l.value.meteran_sebelum||"-"),1)]),t("div",null,[e[37]||(e[37]=t("p",{class:"text-sm text-gray-600"},"Meteran Sesudah",-1)),t("p",ie,a(l.value.meteran_sesudah||"-"),1)]),t("div",null,[e[38]||(e[38]=t("p",{class:"text-sm text-gray-600"},"Pemakaian",-1)),t("p",re,a(l.value.jumlah_kubik?l.value.jumlah_kubik+" m³":"-"),1)]),t("div",null,[e[39]||(e[39]=t("p",{class:"text-sm text-gray-600"},"Abunemen",-1)),t("p",de,a(l.value.abunemen?"Ya (Rp 3.000)":"Tidak"),1)]),t("div",null,[e[40]||(e[40]=t("p",{class:"text-sm text-gray-600"},"Tunggakan",-1)),t("p",ue,a(l.value.tunggakan>0?"Rp "+Number(l.value.tunggakan).toLocaleString("id-ID"):"Tidak ada"),1)]),t("div",null,[e[41]||(e[41]=t("p",{class:"text-sm text-gray-600"},"Total Bayar",-1)),t("p",pe,"Rp "+a(Number(l.value.jumlah_bayar).toLocaleString("id-ID")),1)])])]),t("div",me,[e[46]||(e[46]=t("h4",{class:"font-semibold text-gray-900 mb-2"},"Informasi Tambahan",-1)),t("div",ge,[t("div",null,[e[43]||(e[43]=t("p",{class:"text-sm text-gray-600"},"Metode Bayar",-1)),t("p",xe,a(l.value.metode_bayar||"Tunai"),1)]),t("div",null,[e[44]||(e[44]=t("p",{class:"text-sm text-gray-600"},"Keterangan",-1)),t("p",ce,a(l.value.keterangan||"-"),1)]),l.value.catatan?(i(),r("div",ve,[e[45]||(e[45]=t("p",{class:"text-sm text-gray-600"},"Catatan",-1)),t("p",be,a(l.value.catatan),1)])):d("",!0)])])]),t("div",ye,[t("a",{href:`/pembayaran/${l.value.id}/download-pdf`,target:"_blank",class:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition"},[...e[47]||(e[47]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),x(" Download PDF ",-1)])],8,he),t("button",{onClick:k,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition"}," Tutup ")])])):d("",!0)])])])):d("",!0)]),_:1}))}};export{_e as default};
